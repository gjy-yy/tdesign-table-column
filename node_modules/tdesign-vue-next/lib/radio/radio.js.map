{"version":3,"file":"radio.js","sources":["../../src/radio/radio.tsx"],"sourcesContent":["import { defineComponent, inject, toRefs, computed } from 'vue';\nimport { usePrefixClass, useCommonClassName } from '../hooks/useConfig';\nimport { omit } from '../utils/helper';\nimport props from './props';\nimport { RadioGroupInjectionKey, RadioButtonInjectionKey } from './constants';\n\n// hooks\nimport { useFormDisabled } from '../form/hooks';\nimport useVModel from '../hooks/useVModel';\nimport { useContent } from '../hooks/tnode';\n\nfunction getValidAttrs(obj: Record<string, any>): Record<string, any> {\n  const newObj = {};\n  Object.keys(obj).forEach((key) => {\n    if (typeof obj[key] !== 'undefined') {\n      newObj[key] = obj[key];\n    }\n  });\n  return newObj;\n}\n\nexport default defineComponent({\n  name: 'TRadio',\n  inheritAttrs: false,\n  props: { ...props },\n\n  setup(props, { attrs }) {\n    const { checked, modelValue } = toRefs(props);\n    const [innerChecked, setInnerChecked] = useVModel(\n      checked,\n      modelValue,\n      props.defaultChecked,\n      props.onChange,\n      'checked',\n    );\n    const radioChecked = computed(() => (radioGroup ? props.value === radioGroup.value : innerChecked.value));\n\n    const radioGroup = inject(RadioGroupInjectionKey, undefined);\n\n    /** Event */\n    const handleChange = (e: Event) => {\n      if (radioGroup?.setValue) {\n        radioGroup.setValue(props.value, { e });\n      } else {\n        const { checked } = e.target as HTMLInputElement;\n        setInnerChecked(checked, { e });\n      }\n    };\n    const handleClick = (e: MouseEvent) => {\n      e.stopPropagation();\n      props.onClick?.({ e });\n      if (!radioChecked.value || !props.allowUncheck) return;\n      if (radioGroup) {\n        radioGroup.setValue(undefined, { e });\n      } else {\n        setInnerChecked(false, { e });\n      }\n    };\n    const inputEvents = computed(() =>\n      getValidAttrs({\n        focus: attrs.onFocus,\n        blur: attrs.onBlur,\n        keydown: attrs.onKeydown,\n        keyup: attrs.onKeyup,\n        keypresss: attrs.onKeypresss,\n      }),\n    );\n    const wrapperAttrs = computed(() => {\n      const events = [...Object.keys(inputEvents.value), 'input', 'change'].map(\n        (str) => `on${str[0].toUpperCase()}${str.slice(1)}`,\n      );\n      return omit(attrs, events);\n    });\n    /** Event END */\n\n    // extend radioGroup disabled props\n    const groupDisabled = computed(() => radioGroup?.disabled);\n    const disabled = useFormDisabled(groupDisabled);\n\n    // attribute\n    const inputProps = computed(() => ({\n      name: radioGroup ? radioGroup.name : props.name,\n      checked: radioChecked.value,\n      disabled: disabled.value,\n      value: props.value,\n    }));\n\n    /** Style */\n    const { STATUS } = useCommonClassName();\n    const radioButton = inject(RadioButtonInjectionKey, undefined);\n    const radioBtnName = usePrefixClass('radio-button');\n    const COMPONENT_NAME = usePrefixClass('radio');\n    const prefixCls = computed(() => (radioButton ? radioBtnName.value : COMPONENT_NAME.value));\n    const inputClass = computed(() => [\n      `${prefixCls.value}`,\n      {\n        [STATUS.value.checked]: inputProps.value.checked,\n        [STATUS.value.disabled]: inputProps.value.disabled,\n      },\n    ]);\n    /** Style END */\n\n    const renderContent = useContent();\n\n    return () => (\n      <label class={inputClass.value} {...wrapperAttrs.value}>\n        <input\n          type=\"radio\"\n          class={`${prefixCls.value}__former`}\n          {...inputEvents.value}\n          {...inputProps.value}\n          onChange={handleChange}\n          onClick={handleClick}\n        />\n        <span class={`${prefixCls.value}__input`}></span>\n        <span class={`${prefixCls.value}__label`}>{renderContent('default', 'label')}</span>\n      </label>\n    );\n  },\n});\n"],"names":["getValidAttrs","obj","newObj","Object","keys","forEach","key","defineComponent","name","inheritAttrs","props","setup","attrs","toRefs","checked","modelValue","useVModel","defaultChecked","onChange","innerChecked","setInnerChecked","radioChecked","computed","radioGroup","value","inject","RadioGroupInjectionKey","handleChange","e","setValue","target","handleClick","stopPropagation","onClick","allowUncheck","inputEvents","focus","onFocus","blur","onBlur","keydown","onKeydown","keyup","onKeyup","keypresss","onKeypresss","wrapperAttrs","events","map","str","toUpperCase","slice","omit","groupDisabled","disabled","useFormDisabled","inputProps","useCommonClassName","STATUS","radioButton","RadioButtonInjectionKey","radioBtnName","usePrefixClass","COMPONENT_NAME","prefixCls","inputClass","renderContent","useContent","_createVNode","_mergeProps"],"mappings":"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"}