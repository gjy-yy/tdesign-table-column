{"version":3,"file":"calendar-cell.js","sources":["../../src/calendar/calendar-cell.tsx"],"sourcesContent":["import { computed, defineComponent } from 'vue';\nimport dayjs from 'dayjs';\n\nimport { useCommonClassName } from '../hooks/useConfig';\nimport { useContent } from '../hooks/tnode';\n\nimport { useCalendarCellClass } from './hook';\n\n// 组件相关的自定义类型\nimport { CalendarCell } from './type';\n\nconst clickTypeEmitEventMap = {\n  click: 'click',\n  dblclick: 'dblclick',\n  contextmenu: 'rightclick',\n};\n\nexport default defineComponent({\n  name: `TCalendarCell`,\n  inheritAttrs: false,\n  props: {\n    item: {\n      type: Object,\n      default: (): CalendarCell => null,\n    },\n    fillWithZero: {\n      type: Boolean,\n      default: undefined,\n    },\n    theme: {\n      type: String,\n      default: (): string => null,\n    },\n    t: Function,\n    global: Object,\n    cell: [String, Function],\n  },\n  emits: [...Object.values(clickTypeEmitEventMap)],\n  setup(props, { emit }) {\n    const renderContent = useContent();\n    const cls = useCalendarCellClass();\n    const { STATUS } = useCommonClassName();\n\n    const valueDisplay = computed<string>(() => {\n      if (props.item.mode === 'month') {\n        const dateNum = props.item.date.getDate();\n        const fillZero = dateNum < 10 && (props.fillWithZero ?? props.global.fillWithZero ?? true);\n        return fillZero ? `0${dateNum}` : dateNum;\n      }\n      const map = props.t(props.global.cellMonth).split(',');\n      return map[props.item.date.getMonth().toString()];\n    });\n    const allowSlot = computed<boolean>(() => {\n      return props.theme === 'full';\n    });\n    const disabled = computed<boolean>(() => {\n      return props.item.mode === 'month' && props.item.belongTo !== 0;\n    });\n    const cellCls = computed(() => {\n      const { mode, date, formattedDate, isCurrent } = props.item;\n      const isNow =\n        mode === 'year' ? new Date().getMonth() === date.getMonth() : formattedDate === dayjs().format('YYYY-MM-DD');\n      return [\n        cls.tableBodyCell.value,\n        {\n          [STATUS.value.disabled]: disabled.value,\n          [STATUS.value.checked]: isCurrent,\n          [cls.tableBodyCell4Now.value]: isNow,\n        },\n      ];\n    });\n    const clickCell = (e: MouseEvent): void => {\n      if (disabled.value) return;\n      const emitName = clickTypeEmitEventMap[e.type];\n      emit(emitName, e);\n    };\n\n    const renderDefaultNode = () => (\n      <>\n        <div class={cls.tableBodyCellDisplay.value}>{valueDisplay.value}</div>\n        <div class={cls.tableBodyCellCsontent.value}>\n          {allowSlot.value &&\n            renderContent('cellAppend', undefined, {\n              params: { ...props.item },\n            })}\n        </div>\n      </>\n    );\n\n    return () => {\n      return (\n        props.item && (\n          <td class={cellCls.value} onClick={clickCell} ondblclick={clickCell} oncontextmenu={clickCell}>\n            {typeof props.cell === 'function'\n              ? props.cell({ ...props.item })\n              : renderContent('cell', undefined, {\n                  defaultNode: renderDefaultNode(),\n                  params: { ...props.item },\n                })}\n          </td>\n        )\n      );\n    };\n  },\n});\n"],"names":["clickTypeEmitEventMap","click","dblclick","contextmenu","defineComponent","name","inheritAttrs","props","item","type","Object","fillWithZero","Boolean","theme","String","t","Function","global","cell","emits","values","setup","emit","renderContent","useContent","cls","useCalendarCellClass","useCommonClassName","STATUS","valueDisplay","computed","mode","dateNum","date","getDate","fillZero","map","cellMonth","split","getMonth","toString","allowSlot","disabled","belongTo","cellCls","formattedDate","isCurrent","isNow","Date","dayjs","format","tableBodyCell","value","checked","tableBodyCell4Now","clickCell","e","emitName","renderDefaultNode","_createVNode","_Fragment","tableBodyCellDisplay","tableBodyCellCsontent","params","defaultNode"],"mappings":"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"}