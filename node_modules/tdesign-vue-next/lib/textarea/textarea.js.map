{"version":3,"file":"textarea.js","sources":["../../src/textarea/textarea.tsx"],"sourcesContent":["import { defineComponent, computed, watch, ref, nextTick, onMounted, toRefs, inject, StyleValue } from 'vue';\nimport props from './props';\nimport { TextareaValue, TdTextareaProps } from './type';\nimport { getCharacterLength, omit } from '../utils/helper';\nimport calcTextareaHeight from './calcTextareaHeight';\nimport { FormItemInjectionKey } from '../form/const';\n\n// hooks\nimport useVModel from '../hooks/useVModel';\nimport { useFormDisabled } from '../form/hooks';\nimport { useTNodeJSX } from '../hooks/tnode';\nimport { usePrefixClass, useCommonClassName } from '../hooks/useConfig';\n\nfunction getValidAttrs(obj: object): object {\n  const newObj = {};\n  Object.keys(obj).forEach((key) => {\n    if (typeof obj[key] !== 'undefined') {\n      newObj[key] = obj[key];\n    }\n  });\n  return newObj;\n}\n\nexport default defineComponent({\n  name: 'TTextarea',\n  inheritAttrs: false,\n  props: { ...props },\n\n  setup(props: TdTextareaProps, { attrs, expose }) {\n    const prefix = usePrefixClass();\n    const name = usePrefixClass('textarea');\n    const TEXTAREA_TIPS_CLASS = computed(() => `${name.value}__tips`);\n    const TEXTAREA_LIMIT = computed(() => `${name.value}__limit`);\n\n    const { value, modelValue } = toRefs(props);\n    const [innerValue, setInnerValue] = useVModel(value, modelValue, props.defaultValue, props.onChange);\n    const disabled = useFormDisabled();\n    const textareaStyle = ref({});\n    const computedStyle = computed(() => {\n      const { style } = attrs as { style: StyleValue };\n      return [style, textareaStyle.value];\n    });\n\n    const refTextareaElem = ref<HTMLTextAreaElement>();\n    const focused = ref(false);\n\n    const focus = () => refTextareaElem.value?.focus();\n    const blur = () => refTextareaElem.value?.blur();\n\n    // methods\n    const adjustTextareaHeight = () => {\n      if (props.autosize === true) {\n        nextTick(() => {\n          textareaStyle.value = calcTextareaHeight(refTextareaElem.value);\n        });\n      } else if (typeof props.autosize === 'object') {\n        const { minRows, maxRows } = props.autosize;\n        textareaStyle.value = calcTextareaHeight(refTextareaElem.value, minRows, maxRows);\n      } else if (attrs.rows) {\n        textareaStyle.value = { height: 'auto', minHeight: 'auto' };\n      } else if (attrs.style && refTextareaElem.value?.style?.height) {\n        textareaStyle.value = { height: refTextareaElem.value.style.height };\n      }\n    };\n\n    const setInputValue = (v: TextareaValue = '') => {\n      const textareaElem = refTextareaElem.value;\n      const sV = String(v);\n      if (!textareaElem) {\n        return;\n      }\n      if (textareaElem.value !== sV) {\n        textareaElem.value = sV;\n        innerValue.value = sV;\n      }\n    };\n    const inputValueChangeHandle = (e: InputEvent) => {\n      const { target } = e;\n      let val = (target as HTMLInputElement).value;\n      if (props.maxcharacter && props.maxcharacter >= 0) {\n        const stringInfo = getCharacterLength(val, props.maxcharacter);\n        val = typeof stringInfo === 'object' && stringInfo.characters;\n      }\n      setInnerValue(val, { e });\n      nextTick(() => setInputValue(val));\n      adjustTextareaHeight();\n    };\n\n    const handleInput = (e: any) => {\n      if (e.isComposing || e.inputType === 'insertCompositionText') return;\n      inputValueChangeHandle(e);\n    };\n    const onCompositionend = (e: InputEvent | CompositionEvent) => {\n      inputValueChangeHandle(e as InputEvent);\n    };\n\n    const eventDeal = (name: 'keydown' | 'keyup' | 'keypress' | 'change', e: KeyboardEvent | FocusEvent) => {\n      if (disabled.value) return;\n      const _name = `on${name[0].toUpperCase()}${name.slice(1)}`;\n      props[_name]?.(innerValue.value, { e });\n    };\n\n    const emitKeyDown = (e: KeyboardEvent) => {\n      eventDeal('keydown', e);\n    };\n    const emitKeyUp = (e: KeyboardEvent) => {\n      eventDeal('keyup', e);\n    };\n    const emitKeypress = (e: KeyboardEvent) => {\n      eventDeal('keypress', e);\n    };\n\n    const emitFocus = (e: FocusEvent) => {\n      adjustTextareaHeight();\n      if (disabled.value) return;\n      focused.value = true;\n      props.onFocus?.(innerValue.value, { e });\n    };\n\n    const formItem = inject(FormItemInjectionKey, undefined);\n    const emitBlur = (e: FocusEvent) => {\n      adjustTextareaHeight();\n      focused.value = false;\n      props.onBlur?.(innerValue.value, { e });\n      formItem?.handleBlur();\n    };\n\n    // computed\n    const textareaClasses = computed(() => {\n      return [\n        name.value,\n        {\n          [`${prefix.value}-is-disabled`]: disabled.value,\n          [`${prefix.value}-is-readonly`]: props.readonly,\n        },\n      ];\n    });\n    const inputAttrs = computed<Record<string, any>>(() => {\n      return getValidAttrs({\n        autofocus: props.autofocus,\n        disabled: disabled.value,\n        readonly: props.readonly,\n        placeholder: props.placeholder,\n        maxlength: props.maxlength || undefined,\n        name: props.name || undefined,\n      });\n    });\n    const characterNumber = computed(() => {\n      const characterInfo = getCharacterLength(String(innerValue.value || ''));\n      if (typeof characterInfo === 'object') {\n        return characterInfo.length;\n      }\n      return characterInfo;\n    });\n\n    // watch\n    watch(\n      () => innerValue.value,\n      () => adjustTextareaHeight(),\n    );\n\n    watch(refTextareaElem, (el) => {\n      if (!el) return;\n      adjustTextareaHeight();\n    });\n\n    watch(\n      () => props.autofocus,\n      (val) => {\n        if (val) {\n          refTextareaElem.value.focus();\n        }\n      },\n    );\n\n    expose({\n      focus,\n      blur,\n    });\n\n    onMounted(() => {\n      adjustTextareaHeight();\n    });\n\n    const renderTNodeJSX = useTNodeJSX();\n    return () => {\n      const inputEvents = getValidAttrs({\n        onFocus: emitFocus,\n        onBlur: emitBlur,\n        onKeydown: emitKeyDown,\n        onKeyup: emitKeyUp,\n        onKeypress: emitKeypress,\n      });\n      const { STATUS } = useCommonClassName();\n      const classes = computed(() => [\n        `${name.value}__inner`,\n        {\n          [`${prefix.value}-is-${props.status}`]: props.status,\n          [STATUS.value.disabled]: disabled.value,\n          [STATUS.value.focused]: focused.value,\n          [`${prefix.value}-resize-none`]: props.maxlength,\n        },\n        'narrow-scrollbar',\n      ]);\n\n      const tips = renderTNodeJSX('tips');\n\n      return (\n        <div class={textareaClasses.value} {...omit(attrs, ['style'])}>\n          <textarea\n            onInput={handleInput}\n            onCompositionend={onCompositionend}\n            ref={refTextareaElem}\n            value={innerValue.value}\n            style={computedStyle.value}\n            class={classes.value}\n            {...inputEvents}\n            {...inputAttrs.value}\n          ></textarea>\n          {props.maxcharacter && (\n            <span class={TEXTAREA_LIMIT.value}>{`${characterNumber.value}/${props.maxcharacter}`}</span>\n          )}\n          {!props.maxcharacter && props.maxlength ? (\n            <span class={TEXTAREA_LIMIT.value}>{`${innerValue.value ? String(innerValue.value)?.length : 0}/${\n              props.maxlength\n            }`}</span>\n          ) : null}\n          {tips && (\n            <div class={`${TEXTAREA_TIPS_CLASS.value} ${name.value}__tips--${props.status || 'normal'}`}>{tips}</div>\n          )}\n        </div>\n      );\n    };\n  },\n});\n"],"names":["getValidAttrs","obj","newObj","Object","keys","forEach","key","defineComponent","name","inheritAttrs","props","setup","attrs","expose","prefix","usePrefixClass","TEXTAREA_TIPS_CLASS","computed","value","TEXTAREA_LIMIT","toRefs","modelValue","useVModel","defaultValue","onChange","innerValue","setInnerValue","disabled","useFormDisabled","textareaStyle","ref","computedStyle","style","refTextareaElem","focused","focus","blur","adjustTextareaHeight","autosize","nextTick","calcTextareaHeight","minRows","maxRows","rows","height","minHeight","setInputValue","v","textareaElem","sV","String","inputValueChangeHandle","e","target","val","maxcharacter","stringInfo","getCharacterLength","characters","handleInput","isComposing","inputType","onCompositionend","eventDeal","_name","toUpperCase","slice","emitKeyDown","emitKeyUp","emitKeypress","emitFocus","onFocus","formItem","inject","FormItemInjectionKey","emitBlur","onBlur","handleBlur","textareaClasses","readonly","inputAttrs","autofocus","placeholder","maxlength","characterNumber","characterInfo","length","watch","el","onMounted","renderTNodeJSX","useTNodeJSX","inputEvents","onKeydown","onKeyup","onKeypress","useCommonClassName","STATUS","classes","status","tips","_createVNode","_mergeProps","omit"],"mappings":"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"}