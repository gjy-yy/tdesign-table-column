{"version":3,"file":"trigger.js","sources":["../../src/color-picker/trigger.tsx"],"sourcesContent":["import { defineComponent, PropType, ref, watch } from 'vue';\nimport TInput from '../input';\nimport { Color } from './utils';\nimport { TdColorPickerProps } from './type';\nimport { useBaseClassName } from './hooks';\n\nexport default defineComponent({\n  name: 'DefaultTrigger',\n  inheritAttrs: false,\n  props: {\n    color: {\n      type: String,\n      default: '',\n    },\n    disabled: {\n      type: Boolean,\n      default: false,\n    },\n    inputProps: {\n      type: Object as PropType<TdColorPickerProps['inputProps']>,\n      default: () => {\n        return {\n          autoWidth: true,\n        };\n      },\n    },\n    onTriggerChange: {\n      type: Function,\n      default: () => {\n        return () => {};\n      },\n    },\n  },\n  setup(props) {\n    const baseClassName = useBaseClassName();\n    const value = ref(props.color);\n\n    watch(\n      () => [props.color],\n      () => (value.value = props.color),\n    );\n\n    const handleChange = (input: string) => {\n      if (input === props.color) {\n        return;\n      }\n      if (!Color.isValid(input)) {\n        value.value = props.color;\n      } else {\n        value.value = input;\n      }\n      props.onTriggerChange(value.value);\n    };\n\n    return {\n      baseClassName,\n      value,\n      handleChange,\n    };\n  },\n\n  render() {\n    const { baseClassName } = this;\n    const inputSlots = {\n      label: () => {\n        return (\n          <div class={[`${baseClassName}__trigger--default__color`, `${baseClassName}--bg-alpha`]}>\n            <span\n              class={['color-inner']}\n              style={{\n                background: this.value,\n              }}\n            ></span>\n          </div>\n        );\n      },\n    };\n    return (\n      <div class={`${baseClassName}__trigger--default`}>\n        <TInput\n          {...this.inputProps}\n          v-slots={inputSlots}\n          v-model={this.value}\n          disabled={this.disabled}\n          onBlur={this.handleChange}\n        />\n      </div>\n    );\n  },\n});\n"],"names":["defineComponent","name","inheritAttrs","props","color","type","String","disabled","Boolean","inputProps","Object","autoWidth","onTriggerChange","Function","setup","baseClassName","useBaseClassName","value","ref","watch","handleChange","input","Color","isValid","render","inputSlots","label","_createVNode","background","TInput","_mergeProps"],"mappings":"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"}