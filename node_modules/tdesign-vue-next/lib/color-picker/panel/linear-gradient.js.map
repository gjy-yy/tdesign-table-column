{"version":3,"file":"linear-gradient.js","sources":["../../../src/color-picker/panel/linear-gradient.tsx"],"sourcesContent":["import { defineComponent, onBeforeUnmount, onMounted, reactive, ref, watch } from 'vue';\nimport cloneDeep from 'lodash/cloneDeep';\nimport { GRADIENT_SLIDER_DEFAULT_WIDTH } from '../const';\nimport { genGradientPoint, gradientColors2string, GradientColorPoint } from '../utils';\nimport { InputNumber as TInputNumber } from '../../input-number';\nimport { useBaseClassName } from '../hooks';\nimport { useCommonClassName } from '../../hooks/useConfig';\nimport baseProps from './base-props';\n\nconst DELETE_KEYS: string[] = ['delete', 'backspace'];\n\nexport default defineComponent({\n  name: 'LinearGradient',\n\n  inheritAttrs: false,\n  props: {\n    ...baseProps,\n  },\n  setup(props) {\n    const baseClassName = useBaseClassName();\n    const { STATUS } = useCommonClassName();\n    const statusClassNames = STATUS.value;\n    const refSlider = ref<HTMLElement>(null);\n    const sliderRect = reactive({\n      left: 0,\n      width: GRADIENT_SLIDER_DEFAULT_WIDTH,\n    });\n    const isDragging = ref<Boolean>(false);\n    const isMoved = ref<Boolean>(false);\n    const degree = ref(props.color.gradientDegree);\n    const selectedId = ref(props.color.gradientSelectedId);\n    const colors = ref<GradientColorPoint[]>(cloneDeep(props.color.gradientColors));\n\n    watch(\n      () => props.color.gradientDegree,\n      (value) => (degree.value = value),\n    );\n    watch(\n      () => props.color.gradientSelectedId,\n      (value) => (selectedId.value = value),\n    );\n    watch(\n      () => props.color.gradientColors,\n      (value) => {\n        colors.value = cloneDeep(value);\n      },\n      {\n        deep: true,\n      },\n    );\n\n    const handleChange = (key: 'degree' | 'selectedId' | 'colors', payload: any, addUsedColor?: boolean) => {\n      if (props.disabled) {\n        return;\n      }\n      props.onChange({\n        key,\n        payload,\n        addUsedColor,\n      });\n    };\n\n    const handleDegreeChange = (value: number) => {\n      if (props.disabled || value === props.color.gradientDegree) {\n        return;\n      }\n      degree.value = value;\n      handleChange('degree', value, true);\n    };\n\n    const handleSelectedIdChange = (value: string) => {\n      if (props.disabled) {\n        return;\n      }\n      selectedId.value = value;\n      handleChange('selectedId', value);\n    };\n\n    const handleColorsChange = (value: GradientColorPoint[], isEnded?: boolean) => {\n      if (props.disabled) {\n        return;\n      }\n      colors.value = value;\n      handleChange('colors', value, isEnded);\n    };\n\n    /**\n     * 设置bar的位置\n     * @param left\n     * @returns\n     */\n    const updateActiveThumbLeft = (left: number) => {\n      const index = colors.value.findIndex((c) => c.id === selectedId.value);\n      if (index === -1) {\n        return;\n      }\n      const point = colors.value[index];\n      left = Math.max(0, Math.min(sliderRect.width, left));\n      const percentLeft = (left / sliderRect.width) * 100;\n      colors.value.splice(index, 1, {\n        color: point.color,\n        left: percentLeft,\n        id: point.id,\n      });\n      handleColorsChange(colors.value);\n    };\n\n    // 移动开始\n    const handleStart = (id: string, e: MouseEvent) => {\n      const rect = refSlider.value.getBoundingClientRect();\n      sliderRect.left = rect.left;\n      sliderRect.width = rect.width || GRADIENT_SLIDER_DEFAULT_WIDTH;\n      if (isDragging.value || props.disabled) {\n        return;\n      }\n      isMoved.value = false;\n      isDragging.value = true;\n      e.preventDefault();\n      e.stopPropagation();\n      handleSelectedIdChange(id);\n      // 让slider获取焦点，以便键盘事件生效。\n      refSlider.value.focus();\n      window.addEventListener('mousemove', handleMove, false);\n      window.addEventListener('mouseup', handleEnd, false);\n      window.addEventListener('contextmenu', handleEnd, false);\n    };\n\n    // 移动中\n    const handleMove = (e: MouseEvent) => {\n      if (!isDragging.value || props.disabled) {\n        return;\n      }\n      const left = e.clientX - sliderRect.left;\n      isMoved.value = true;\n      updateActiveThumbLeft(left);\n    };\n\n    // 移动结束\n    const handleEnd = () => {\n      if (!isDragging.value) {\n        return;\n      }\n      setTimeout(() => {\n        isDragging.value = false;\n      }, 0);\n      if (isMoved.value) {\n        handleColorsChange(colors.value, true);\n        isMoved.value = false;\n      }\n      window.removeEventListener('mousemove', handleMove, false);\n      window.removeEventListener('mouseup', handleEnd, false);\n      window.removeEventListener('contextmenu', handleEnd, false);\n    };\n\n    const handleKeyup = (e: KeyboardEvent) => {\n      if (props.disabled) {\n        return;\n      }\n      const points = colors.value;\n      let pos = points.findIndex((c) => c.id === selectedId.value);\n      const { length } = points;\n      // 必须保证有两个点\n      if (DELETE_KEYS.includes(e.key.toLocaleLowerCase()) && length > 2 && pos >= 0 && pos <= length - 1) {\n        points.splice(pos, 1);\n        if (!points[pos]) {\n          // eslint-disable-next-line no-nested-ternary\n          pos = points[pos + 1] ? pos + 1 : points[pos - 1] ? pos - 1 : 0;\n        }\n        const current = points[pos];\n        handleColorsChange(points, true);\n        handleSelectedIdChange(current?.id);\n      }\n    };\n\n    const handleThumbBarClick = (e: MouseEvent) => {\n      if (props.disabled) {\n        return;\n      }\n      let left = e.clientX - sliderRect.left;\n      left = Math.max(0, Math.min(sliderRect.width, left));\n      const percentLeft = (left / sliderRect.width) * 100;\n      const newPoint = genGradientPoint(percentLeft, props.color.rgba);\n      colors.value.push(newPoint);\n      handleColorsChange(colors.value, true);\n      handleSelectedIdChange(newPoint.id);\n    };\n\n    onMounted(() => {\n      const rect = refSlider.value.getBoundingClientRect();\n      sliderRect.left = rect.left;\n      sliderRect.width = rect.width || GRADIENT_SLIDER_DEFAULT_WIDTH;\n    });\n\n    onBeforeUnmount(() => {\n      window.removeEventListener('mousemove', handleMove, false);\n      window.removeEventListener('mouseup', handleEnd, false);\n      window.removeEventListener('contextmenu', handleEnd, false);\n    });\n\n    return {\n      baseClassName,\n      statusClassNames,\n      refSlider,\n      degree,\n      selectedId,\n      colors,\n      handleDegreeChange,\n      handleStart,\n      handleMove,\n      handleEnd,\n      handleKeyup,\n      handleThumbBarClick,\n    };\n  },\n  render() {\n    const { linearGradient, gradientColors } = this.color;\n    const { colors, selectedId, degree, disabled, baseClassName, statusClassNames } = this;\n    const thumbBackground = gradientColors2string({\n      points: gradientColors,\n      degree: 90,\n    });\n    return (\n      <div class={`${baseClassName}__gradient`}>\n        <div class={`${baseClassName}__gradient-slider`}>\n          <div\n            class={[`${baseClassName}__slider`, `${baseClassName}--bg-alpha`]}\n            onKeyup={this.handleKeyup}\n            tabindex={0}\n            ref=\"refSlider\"\n          >\n            <ul\n              class=\"gradient-thumbs\"\n              onClick={this.handleThumbBarClick}\n              style={{\n                background: thumbBackground,\n              }}\n            >\n              {colors.map((t) => {\n                const left = `${Math.round(t.left * 100) / 100}%`;\n                return (\n                  <li\n                    class={[\n                      `${baseClassName}__thumb`,\n                      'gradient-thumbs__item',\n                      selectedId === t.id ? statusClassNames.active : '',\n                    ]}\n                    key={t.id}\n                    title={`${t.color} ${left}`}\n                    style={{\n                      color: t.color,\n                      left,\n                    }}\n                    onClick={(e: MouseEvent) => e.stopPropagation()}\n                    onMousedown={(e: MouseEvent) => this.handleStart(t.id, e)}\n                  >\n                    <span class={['gradient-thumbs__item-inner', `${baseClassName}--bg-alpha`]}></span>\n                  </li>\n                );\n              })}\n            </ul>\n          </div>\n        </div>\n        <div class={`${baseClassName}__gradient-degree`} title={`${degree}deg`}>\n          <TInputNumber\n            size=\"small\"\n            theme=\"normal\"\n            min={0}\n            max={360}\n            step={1}\n            format={(value: number) => `${value}°`}\n            v-model={this.degree}\n            onBlur={this.handleDegreeChange}\n            onEnter={this.handleDegreeChange}\n            disabled={disabled}\n          />\n        </div>\n        <div class={[`${baseClassName}__gradient-preview`, `${baseClassName}--bg-alpha`]}>\n          <span\n            class=\"preview-inner\"\n            style={{\n              background: linearGradient,\n            }}\n          ></span>\n        </div>\n      </div>\n    );\n  },\n});\n"],"names":["DELETE_KEYS","defineComponent","name","inheritAttrs","props","baseProps","setup","baseClassName","useBaseClassName","useCommonClassName","STATUS","statusClassNames","value","refSlider","ref","sliderRect","reactive","left","width","GRADIENT_SLIDER_DEFAULT_WIDTH","isDragging","isMoved","degree","color","gradientDegree","selectedId","gradientSelectedId","colors","cloneDeep","gradientColors","watch","deep","handleChange","key","payload","addUsedColor","disabled","onChange","handleDegreeChange","handleSelectedIdChange","handleColorsChange","isEnded","updateActiveThumbLeft","index","findIndex","c","id","point","Math","max","min","percentLeft","splice","handleStart","e","rect","getBoundingClientRect","preventDefault","stopPropagation","focus","window","addEventListener","handleMove","handleEnd","clientX","setTimeout","removeEventListener","handleKeyup","points","pos","length","includes","toLocaleLowerCase","current","handleThumbBarClick","newPoint","genGradientPoint","rgba","push","onMounted","onBeforeUnmount","render","linearGradient","thumbBackground","gradientColors2string","_createVNode","background","map","t","round","active","TInputNumber"],"mappings":"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"}