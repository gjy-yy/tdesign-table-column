{"version":3,"file":"image-viewer.js","sources":["../../src/image-viewer/image-viewer.tsx"],"sourcesContent":["import { computed, defineComponent, ref, toRefs, Teleport, onMounted, onBeforeUnmount } from 'vue';\nimport { ChevronLeftIcon, ChevronDownIcon, CloseIcon } from 'tdesign-icons-vue-next';\n\nimport props from './props';\nimport TImageViewerIcon from './base/ImageModalIcon';\nimport TImageViewerUtils from './base/ImageViewerUtils';\nimport TImageItem from './base/ImageItem';\nimport TImageViewerModal from './base/ImageViewerModal';\nimport { useTNodeJSX } from '../hooks/tnode';\nimport useVModel from '../hooks/useVModel';\nimport useDefaultValue from '../hooks/useDefaultValue';\nimport { usePrefixClass } from '../hooks/useConfig';\nimport { TdImageViewerProps } from './type';\nimport { useMirror, useRotate, useScale } from './hooks';\nimport { formatImages, getOverlay } from './utils';\nimport { EVENT_CODE } from './const';\n\nexport default defineComponent({\n  name: 'TImageViewer',\n  props: { ...props },\n  setup(props) {\n    const classPrefix = usePrefixClass();\n    const COMPONENT_NAME = usePrefixClass('image-viewer');\n    const renderTNodeJSX = useTNodeJSX();\n    const isExpand = ref(false);\n    const showOverlayValue = computed(() => getOverlay(props));\n    const wrapClass = computed(() => [\n      `${COMPONENT_NAME.value}-preview-image`,\n      {\n        [`${classPrefix.value}-is-hide`]: !props.visible,\n      },\n    ]);\n    const headerClass = computed(() => [\n      `${classPrefix.value}-image-viewer__modal-header`,\n      {\n        [`${classPrefix.value}-is-show`]: isExpand.value,\n      },\n    ]);\n    const zIndexValue = computed(() => props.zIndex ?? 2000);\n    const toggleExpand = () => {\n      isExpand.value = !isExpand.value;\n    };\n\n    const { mirror, onMirror, resetMirror } = useMirror();\n    const { scale, onZoomIn, onZoomOut, resetScale } = useScale(props.imageScale);\n    const { rotate, onRotate, resetRotate } = useRotate();\n    const onRest = () => {\n      resetMirror();\n      resetScale();\n      resetRotate();\n    };\n\n    const images = computed(() => formatImages(props.images));\n    const { index, visible, modelValue } = toRefs(props);\n    const [indexValue, setIndexValue] = useDefaultValue(index, props.defaultIndex ?? 0, props.onIndexChange, 'index');\n    const currentImage = computed(() => images.value[indexValue.value] ?? { mainImage: '' });\n\n    const prevImage = () => {\n      const newIndex = indexValue.value - 1;\n      setIndexValue(newIndex < 0 ? 0 : newIndex, { trigger: 'prev' });\n    };\n\n    const nextImage = () => {\n      const newIndex = indexValue.value + 1;\n      setIndexValue(newIndex >= images.value.length ? indexValue.value : newIndex, { trigger: 'next' });\n    };\n\n    const onImgClick = (i: number) => {\n      setIndexValue(i);\n    };\n\n    const [visibleValue, setVisibleValue] = useVModel(visible, modelValue, props.defaultVisible, () => {}, 'visible');\n    const onClose: TdImageViewerProps['onClose'] = (ctx) => {\n      setVisibleValue(false, ctx);\n      props.onClose?.(ctx);\n    };\n    const closeBtnAction = (e: MouseEvent) => {\n      onClose({ e, trigger: 'close-btn' });\n    };\n    const clickOverlayHandler = (e: MouseEvent) => {\n      if (props.closeOnOverlay) {\n        onClose({ e, trigger: 'overlay' });\n      }\n    };\n\n    const keydownHandler = (e: KeyboardEvent) => {\n      switch (e.code) {\n        case EVENT_CODE.left:\n          prevImage();\n          break;\n        case EVENT_CODE.right:\n          nextImage();\n          break;\n        case EVENT_CODE.up:\n          onZoomIn();\n          break;\n        case EVENT_CODE.down:\n          onZoomOut();\n          break;\n        case EVENT_CODE.esc:\n          onClose({ e, trigger: 'esc' });\n          break;\n        default:\n          break;\n      }\n    };\n    onMounted(() => {\n      window.addEventListener('keydown', keydownHandler);\n    });\n\n    onBeforeUnmount(() => {\n      window.removeEventListener('keydown', keydownHandler);\n    });\n\n    const onWheel = (e: WheelEvent) => {\n      e.preventDefault();\n      const { deltaY, ctrlKey } = e;\n      // mac触摸板双指缩放时ctrlKey=true，deltaY>0为缩小  <0为放大\n      if (ctrlKey) {\n        return deltaY > 0 ? onZoomOut() : onZoomIn();\n      }\n      deltaY > 0 ? onZoomIn() : onZoomOut();\n    };\n\n    const transStyle = computed(() => ({ transform: `translateX(-${indexValue.value * 84}px)` }));\n\n    const renderHeader = () => (\n      <div class={headerClass.value}>\n        <TImageViewerIcon\n          icon={() => <ChevronDownIcon size=\"20px\" />}\n          class={`${COMPONENT_NAME.value}__header--pre__bt`}\n          onClick={toggleExpand}\n        />\n        <div class={`${COMPONENT_NAME.value}__header--prev`}>\n          <div class={`${COMPONENT_NAME.value}__bokeh--left`} />\n          <div class={`${COMPONENT_NAME.value}__bokeh--right`} />\n          <div class={`${COMPONENT_NAME.value}__header--trans`} style={transStyle.value}>\n            {images.value.map((image, index) => (\n              <div\n                key={index}\n                class={[\n                  `${COMPONENT_NAME.value}__header--box`,\n                  {\n                    [`${classPrefix.value}-is-active`]: index === indexValue.value,\n                  },\n                ]}\n              >\n                <img\n                  alt=\"\"\n                  src={image.thumbnail || image.mainImage}\n                  className={`${COMPONENT_NAME.value}__header--img`}\n                  onClick={() => onImgClick(index)}\n                />\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n    const renderNavigationArrow = (type: 'prev' | 'next') => {\n      const rotateDeg = type === 'prev' ? 0 : 180;\n      const icon = renderTNodeJSX(\n        'navigationArrow',\n        <ChevronLeftIcon style={{ transform: `rotate(${rotateDeg}deg)` }} size=\"24px\" />,\n      );\n\n      return (\n        <TImageViewerIcon\n          class={`${COMPONENT_NAME.value}__modal--${type}-bt`}\n          onClick={type === 'prev' ? prevImage : nextImage}\n          icon={() => icon}\n        />\n      );\n    };\n\n    return () => {\n      if (props.mode === 'modeless') {\n        return (\n          <>\n            {renderTNodeJSX('trigger')}\n            <TImageViewerModal\n              zIndex={zIndexValue.value}\n              visible={visibleValue.value}\n              index={indexValue.value}\n              images={images.value}\n              scale={scale.value}\n              rotate={rotate.value}\n              mirror={mirror.value}\n              currentImage={currentImage.value}\n              onRotate={onRotate}\n              onZoomIn={onZoomIn}\n              onZoomOut={onZoomOut}\n              onMirror={onMirror}\n              onReset={onRest}\n              onClose={onClose}\n              draggable={props.draggable}\n              showOverlay={showOverlayValue.value}\n              closeBtn={props.closeBtn}\n            />\n          </>\n        );\n      }\n\n      return (\n        <>\n          {renderTNodeJSX('trigger')}\n          <Teleport to=\"body\">\n            {visibleValue.value && (\n              <div class={wrapClass.value} style={{ zIndex: zIndexValue.value }} onWheel={onWheel}>\n                {!!showOverlayValue.value && (\n                  <div class={`${COMPONENT_NAME.value}__modal--mask`} onClick={clickOverlayHandler} />\n                )}\n                <TImageViewerModal />\n                {images.value.length > 1 && (\n                  <>\n                    {renderHeader()}\n                    <div class={`${COMPONENT_NAME.value}__modal--index`}>{`${indexValue.value + 1}/${\n                      images.value.length\n                    }`}</div>\n                    {renderNavigationArrow('prev')}\n                    {renderNavigationArrow('next')}\n                  </>\n                )}\n                <div\n                  class={[`${COMPONENT_NAME.value}__modal--icon`, `${COMPONENT_NAME.value}__modal--close-bt`]}\n                  onClick={closeBtnAction}\n                >\n                  {renderTNodeJSX('closeBtn', <CloseIcon size=\"24px\" />)}\n                </div>\n                <TImageViewerUtils\n                  onZoomIn={onZoomIn}\n                  onZoomOut={onZoomOut}\n                  onMirror={onMirror}\n                  onReset={onRest}\n                  onRotate={onRotate}\n                  scale={scale.value}\n                  currentImage={currentImage.value}\n                />\n                <TImageItem\n                  scale={scale.value}\n                  rotate={rotate.value}\n                  mirror={mirror.value}\n                  src={currentImage.value.mainImage}\n                  placementSrc={currentImage.value.thumbnail}\n                />\n              </div>\n            )}\n          </Teleport>\n        </>\n      );\n    };\n  },\n});\n"],"names":["defineComponent","name","props","setup","classPrefix","usePrefixClass","COMPONENT_NAME","renderTNodeJSX","useTNodeJSX","isExpand","ref","showOverlayValue","computed","getOverlay","wrapClass","value","visible","headerClass","zIndexValue","zIndex","toggleExpand","useMirror","mirror","onMirror","resetMirror","useScale","imageScale","scale","onZoomIn","onZoomOut","resetScale","useRotate","rotate","onRotate","resetRotate","onRest","images","formatImages","toRefs","index","modelValue","useDefaultValue","defaultIndex","onIndexChange","indexValue","setIndexValue","currentImage","mainImage","prevImage","newIndex","trigger","nextImage","length","onImgClick","i","useVModel","defaultVisible","visibleValue","setVisibleValue","onClose","ctx","closeBtnAction","e","clickOverlayHandler","closeOnOverlay","keydownHandler","code","EVENT_CODE","left","right","up","down","esc","onMounted","window","addEventListener","onBeforeUnmount","removeEventListener","onWheel","preventDefault","deltaY","ctrlKey","transStyle","transform","renderHeader","_createVNode","map","image","thumbnail","renderNavigationArrow","type","rotateDeg","icon","mode","draggable","closeBtn"],"mappings":"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"}