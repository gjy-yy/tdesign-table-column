{"version":3,"file":"popconfirm.js","sources":["../../src/popconfirm/popconfirm.tsx"],"sourcesContent":["import { defineComponent, computed, toRefs } from 'vue';\nimport {\n  InfoCircleFilledIcon as TdInfoCircleFilledIcon,\n  ErrorCircleFilledIcon as TdErrorCircleFilledIcon,\n} from 'tdesign-icons-vue-next';\n\nimport { useConfig, usePrefixClass } from '../hooks/useConfig';\nimport { useGlobalIcon } from '../hooks/useGlobalIcon';\nimport Popup, { PopupProps, PopupVisibleChangeContext } from '../popup/index';\nimport props from './props';\nimport { PopconfirmVisibleChangeContext } from './type';\nimport { useAction } from '../dialog/hooks';\nimport { useContent, useTNodeJSX, useTNodeDefault } from '../hooks/tnode';\nimport useVModel from '../hooks/useVModel';\n\nexport default defineComponent({\n  name: 'TPopconfirm',\n  props,\n\n  setup(props) {\n    const { globalConfig } = useConfig('popconfirm');\n    const COMPONENT_NAME = usePrefixClass('popconfirm');\n    const { InfoCircleFilledIcon, ErrorCircleFilledIcon } = useGlobalIcon({\n      InfoCircleFilledIcon: TdInfoCircleFilledIcon,\n      ErrorCircleFilledIcon: TdErrorCircleFilledIcon,\n    });\n\n    const { visible, modelValue } = toRefs(props);\n    const [innerVisible, setInnerVisible] = useVModel(\n      visible,\n      modelValue,\n      props.defaultVisible,\n      props.onVisibleChange,\n      'visible',\n    );\n\n    const confirmBtnAction = (e: MouseEvent) => {\n      props.onConfirm?.({ e });\n      setInnerVisible(false, { e });\n    };\n\n    const cancelBtnAction = (e: MouseEvent) => {\n      props.onCancel?.({ e });\n      setInnerVisible(false, { e });\n    };\n\n    const { getConfirmBtn, getCancelBtn } = useAction({ confirmBtnAction, cancelBtnAction });\n\n    const renderTNodeJSX = useTNodeJSX();\n    const innerPopupProps = computed(() => {\n      return {\n        showArrow: props.showArrow,\n        overlayClassName: COMPONENT_NAME.value,\n        trigger: 'click' as PopupProps['trigger'],\n        destroyOnClose: props.destroyOnClose,\n        placement: props.placement,\n        ...(props.popupProps as PopupProps),\n      };\n    });\n\n    const renderTNodeDefault = useTNodeDefault();\n    const renderContent = () => {\n      const cancelBtn = getCancelBtn({\n        cancelBtn: props.cancelBtn,\n        globalCancel: globalConfig.value.cancel,\n        className: `${COMPONENT_NAME.value}__cancel`,\n        size: 'small',\n      });\n\n      const confirmBtn = getConfirmBtn({\n        theme: props.theme,\n        confirmBtn: props.confirmBtn,\n        globalConfirm: globalConfig.value.confirm,\n        globalConfirmBtnTheme: globalConfig.value.confirmBtnTheme,\n        className: `${COMPONENT_NAME.value}__confirm`,\n        size: 'small',\n      });\n\n      const renderIcon = () => {\n        const Icon = {\n          default: InfoCircleFilledIcon,\n          warning: ErrorCircleFilledIcon,\n          danger: ErrorCircleFilledIcon,\n        }[props.theme];\n        const theme = props.theme || 'default';\n        return renderTNodeDefault('icon', <Icon class={`${COMPONENT_NAME.value}__icon--${theme}`} />);\n      };\n\n      return (\n        <div class={`${COMPONENT_NAME.value}__content`}>\n          <div class={`${COMPONENT_NAME.value}__body`}>\n            {renderIcon()}\n            <div class={`${COMPONENT_NAME.value}__inner`}>{renderTNodeJSX('content')}</div>\n          </div>\n          {Boolean(cancelBtn || confirmBtn) && (\n            <div class={`${COMPONENT_NAME.value}__buttons`}>\n              {cancelBtn}\n              {confirmBtn}\n            </div>\n          )}\n        </div>\n      );\n    };\n\n    const onPopupVisibleChange = (val: boolean, context: PopupVisibleChangeContext) => {\n      setInnerVisible(val, context as PopconfirmVisibleChangeContext);\n    };\n\n    const renderTNodeContent = useContent();\n\n    return () => (\n      <Popup\n        visible={innerVisible.value}\n        {...innerPopupProps.value}\n        onVisibleChange={onPopupVisibleChange}\n        v-slots={{\n          content: renderContent,\n        }}\n      >\n        {renderTNodeContent('default', 'triggerElement')}\n      </Popup>\n    );\n  },\n});\n"],"names":["defineComponent","name","props","setup","useConfig","globalConfig","COMPONENT_NAME","usePrefixClass","useGlobalIcon","InfoCircleFilledIcon","TdInfoCircleFilledIcon","ErrorCircleFilledIcon","TdErrorCircleFilledIcon","toRefs","visible","modelValue","useVModel","defaultVisible","onVisibleChange","innerVisible","setInnerVisible","confirmBtnAction","e","onConfirm","cancelBtnAction","onCancel","useAction","getConfirmBtn","getCancelBtn","renderTNodeJSX","useTNodeJSX","innerPopupProps","computed","showArrow","overlayClassName","value","trigger","destroyOnClose","placement","popupProps","renderTNodeDefault","useTNodeDefault","renderContent","cancelBtn","globalCancel","cancel","className","size","confirmBtn","theme","globalConfirm","confirm","globalConfirmBtnTheme","confirmBtnTheme","renderIcon","Icon","warning","danger","_createVNode","Boolean","onPopupVisibleChange","val","context","renderTNodeContent","useContent","_mergeProps","content"],"mappings":"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"}