{"version":3,"file":"useInputWidth.js","sources":["../../src/input/useInputWidth.ts"],"sourcesContent":["import { onMounted, Ref, ref, watch, nextTick } from 'vue';\nimport { InputValue, TdInputProps } from './type';\n\nexport default function useInputWidth(\n  props: TdInputProps,\n  inputPreRef: Ref<HTMLInputElement>,\n  inputRef: Ref<HTMLInputElement>,\n  innerValue: Ref<InputValue>,\n) {\n  const composing = ref(false);\n  const updateInputWidth = () => {\n    if (!inputPreRef.value) return;\n    const width = inputPreRef.value.offsetWidth;\n    if (width === 0) return;\n    inputRef.value.style.width = `${width}px`;\n  };\n\n  const addListeners = () => {\n    watch(\n      () => innerValue.value + props.placeholder,\n      () => {\n        if (!props.autoWidth) return;\n        nextTick(() => {\n          updateInputWidth();\n        });\n      },\n      { immediate: true },\n    );\n  };\n\n  onMounted(() => {\n    composing.value = false;\n    if (props.autoWidth) {\n      addListeners();\n    }\n  });\n}\n"],"names":["useInputWidth","props","inputPreRef","inputRef","innerValue","composing","ref","updateInputWidth","value","width","offsetWidth","style","addListeners","watch","placeholder","autoWidth","nextTick","immediate","onMounted"],"mappings":";;;;;;;;AAGA,SAAwBA,aAAxB,CACEC,KADF,EAEEC,WAFF,EAGEC,QAHF,EAIEC,UAJF,EAKE;AACM,EAAA,IAAAC,SAAA,GAAYC,IAAI,MAAhB,CAAA;;AACN,EAAA,IAAMC,mBAAmB,SAAnBA,gBAAmB,GAAM;AAC7B,IAAA,IAAI,CAACL,WAAY,CAAAM,KAAjB,EAAwB,OAAA;AAClB,IAAA,IAAAC,KAAA,GAAQP,YAAYM,KAAZ,CAAkBE,WAA1B,CAAA;IACN,IAAID,KAAU,KAAA,CAAd,EAAiB,OAAA;AACRN,IAAAA,QAAA,CAAAK,KAAA,CAAMG,KAAN,CAAYF,KAAZ,aAAuBA,KAAvB,EAAA,IAAA,CAAA,CAAA;GAJX,CAAA;;AAOA,EAAA,IAAMG,eAAe,SAAfA,YAAe,GAAM;AACzBC,IAAAA,KAAA,CACE,YAAA;AAAA,MAAA,OAAMT,UAAW,CAAAI,KAAX,GAAmBP,KAAM,CAAAa,WAA/B,CAAA;AAAA,KADF,EAEE,YAAM;AACJ,MAAA,IAAI,CAACb,KAAM,CAAAc,SAAX,EAAsB,OAAA;AACtBC,MAAAA,QAAA,CAAS,YAAM;QACIT,gBAAA,EAAA,CAAA;AAClB,OAFD,CAAA,CAAA;AAGF,KAPF,EAQE;AAAEU,MAAAA,WAAW,IAAA;AAAb,KARF,CAAA,CAAA;GADF,CAAA;;AAaAC,EAAAA,SAAA,CAAU,YAAM;IACdb,SAAA,CAAUG,KAAV,GAAkB,KAAlB,CAAA;;IACA,IAAIP,MAAMc,SAAV,EAAqB;MACNH,YAAA,EAAA,CAAA;AACf,KAAA;AACD,GALD,CAAA,CAAA;AAMF;;;;"}