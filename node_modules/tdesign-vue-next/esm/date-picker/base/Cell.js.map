{"version":3,"file":"Cell.js","sources":["../../../src/date-picker/base/Cell.tsx"],"sourcesContent":["import { defineComponent, computed } from 'vue';\nimport { usePrefixClass } from '../../hooks/useConfig';\nimport { extractTimeObj } from '../../_common/js/date-picker/utils';\n\nexport default defineComponent({\n  name: 'TDatePickerCell',\n  props: {\n    time: String,\n    text: [String, Number],\n    value: Date,\n    active: Boolean,\n    highlight: Boolean,\n    disabled: Boolean,\n    startOfRange: Boolean,\n    endOfRange: Boolean,\n    hoverHighlight: Boolean,\n    hoverStartOfRange: Boolean,\n    hoverEndOfRange: Boolean,\n    additional: Boolean,\n    now: Boolean,\n    firstDayOfMonth: Boolean,\n    lastDayOfMonth: Boolean,\n    onClick: Function,\n    onMouseEnter: Function,\n  },\n  setup(props) {\n    const COMPONENT_NAME = usePrefixClass('date-picker__cell');\n\n    const cellClass = computed(() => [\n      COMPONENT_NAME.value,\n      {\n        [`${COMPONENT_NAME.value}--now`]: props.now,\n        [`${COMPONENT_NAME.value}--active`]: props.active,\n        [`${COMPONENT_NAME.value}--disabled`]: props.disabled,\n        [`${COMPONENT_NAME.value}--highlight`]: props.highlight,\n        [`${COMPONENT_NAME.value}--hover-highlight`]: props.hoverHighlight,\n        [`${COMPONENT_NAME.value}--active-start`]: props.startOfRange,\n        [`${COMPONENT_NAME.value}--active-end`]: props.endOfRange,\n        [`${COMPONENT_NAME.value}--hover-start`]: props.hoverStartOfRange,\n        [`${COMPONENT_NAME.value}--hover-end`]: props.hoverEndOfRange,\n        [`${COMPONENT_NAME.value}--additional`]: props.additional,\n        [`${COMPONENT_NAME.value}--first-day-of-month`]: props.firstDayOfMonth,\n        [`${COMPONENT_NAME.value}--last-day-of-month`]: props.lastDayOfMonth,\n      },\n    ]);\n\n    function handleClick(e: MouseEvent) {\n      if (props.disabled) return;\n      if (props.time) {\n        const { hours, minutes, seconds, milliseconds, meridiem } = extractTimeObj(props.time);\n        // am pm 12小时制转化 24小时制\n        let nextHours = hours;\n        if (/am/i.test(meridiem) && nextHours === 12) nextHours -= 12;\n        if (/pm/i.test(meridiem) && nextHours < 12) nextHours += 12;\n        props.value.setHours(nextHours);\n        props.value.setMinutes(minutes);\n        props.value.setSeconds(seconds);\n        props.value.setMilliseconds(milliseconds);\n      }\n      props.onClick?.(props.value, { e });\n    }\n\n    function handleMouseEnter() {\n      if (props.disabled) return;\n      if (props.time) {\n        const { hours, minutes, seconds, milliseconds, meridiem } = extractTimeObj(props.time);\n        // am pm 12小时制转化 24小时制\n        let nextHours = hours;\n        if (/am/i.test(meridiem) && nextHours === 12) nextHours -= 12;\n        if (/pm/i.test(meridiem) && nextHours < 12) nextHours += 12;\n        props.value.setHours(nextHours);\n        props.value.setMinutes(minutes);\n        props.value.setSeconds(seconds);\n        props.value.setMilliseconds(milliseconds);\n      }\n      props.onMouseEnter?.(props.value);\n    }\n\n    return () => (\n      <td class={cellClass.value} onClick={handleClick} onMouseenter={handleMouseEnter}>\n        <div class={`${COMPONENT_NAME.value}-inner`}>{props.text}</div>\n      </td>\n    );\n  },\n});\n"],"names":["defineComponent","name","props","time","String","text","Number","value","Date","active","Boolean","highlight","disabled","startOfRange","endOfRange","hoverHighlight","hoverStartOfRange","hoverEndOfRange","additional","now","firstDayOfMonth","lastDayOfMonth","onClick","Function","onMouseEnter","setup","COMPONENT_NAME","usePrefixClass","cellClass","computed","handleClick","e","extractTimeObj","hours","minutes","seconds","milliseconds","meridiem","nextHours","test","setHours","setMinutes","setSeconds","setMilliseconds","handleMouseEnter","_createVNode"],"mappings":"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"}