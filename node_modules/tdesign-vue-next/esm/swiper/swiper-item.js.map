{"version":3,"file":"swiper-item.js","sources":["../../src/swiper/swiper-item.tsx"],"sourcesContent":["import { defineComponent, computed } from 'vue';\nimport props from './props';\nimport { usePrefixClass } from '../hooks/useConfig';\n\nconst swiperItemProps = {\n  index: {\n    type: Number,\n  },\n  currentIndex: {\n    type: Number,\n  },\n  isSwitching: {\n    type: Boolean,\n    default: false,\n  },\n  getWrapAttribute: {\n    type: Function,\n  },\n  swiperItemLength: {\n    type: Number,\n    default: 0,\n  },\n};\nconst CARD_SCALE = 210 / 332; // 缩放比例\nconst itemWidth = 0.415; // 依据设计稿使用t-swiper__card控制每个swiper的宽度为41.5%\n\nexport default defineComponent({\n  name: 'TSwiperItem',\n  props: {\n    ...props,\n    ...swiperItemProps,\n  },\n  setup(props, { slots }) {\n    const prefix = usePrefixClass();\n    const active = computed(() => props.index === props.currentIndex);\n    const disposeIndex = computed(() => {\n      if (props.type !== 'card') return 0;\n      if (props.currentIndex === 0 && props.index === props.swiperItemLength - 1) {\n        return -1;\n      }\n      if (props.currentIndex === props.swiperItemLength - 1 && props.index === 0) {\n        return props.swiperItemLength;\n      }\n      if (props.index < props.currentIndex - 1 && props.currentIndex - props.index >= props.swiperItemLength / 2) {\n        return props.swiperItemLength + 1;\n      }\n      if (props.index > props.currentIndex + 1 && props.index - props.currentIndex >= props.swiperItemLength / 2) {\n        return -2;\n      }\n      return props.index;\n    });\n    const translateX = computed(() => {\n      if (props.type !== 'card') return 0;\n      const wrapWidth = props.getWrapAttribute('offsetWidth') || 0;\n      const translateIndex = !active.value && props.swiperItemLength > 2 ? disposeIndex.value : props.index;\n      const inStage = Math.abs(translateIndex - props.currentIndex) <= 1;\n      if (inStage) {\n        return (wrapWidth * ((translateIndex - props.currentIndex) * (1 - itemWidth * CARD_SCALE) - itemWidth + 1)) / 2;\n      }\n      if (translateIndex < props.currentIndex) {\n        return (-itemWidth * (1 + CARD_SCALE) * wrapWidth) / 2;\n      }\n      return ((2 + itemWidth * (CARD_SCALE - 1)) * wrapWidth) / 2;\n    });\n    const zIndex = computed(() => {\n      if (props.type !== 'card') return 0;\n      const translateIndex = !active.value && props.swiperItemLength > 2 ? disposeIndex.value : props.index;\n      const isActivity = translateIndex === props.currentIndex;\n      const inStage = Math.round(Math.abs(translateIndex - props.currentIndex)) <= 1;\n      if (isActivity) {\n        return 2;\n      }\n      if (inStage) {\n        return 1;\n      }\n      return 0;\n    });\n    const itemStyle = computed(() => {\n      if (props.animation === 'fade') {\n        return {\n          opacity: active.value ? 1 : 0,\n          transition: props.isSwitching ? `opacity ${props.duration / 1000}s` : '',\n        };\n      }\n      if (props.type === 'card') {\n        const translateIndex = !active.value && props.swiperItemLength > 2 ? disposeIndex.value : props.index;\n        const isActivity = translateIndex === props.currentIndex;\n        return {\n          transform: `translateX(${translateX.value}px) scale(${isActivity ? 1 : CARD_SCALE})`,\n          transition: `transform ${props.duration / 1000}s ease`,\n          zIndex: zIndex.value,\n        };\n      }\n      return {};\n    });\n\n    return () => (\n      <div\n        class={[\n          `${prefix.value}-swiper__container__item`,\n          {\n            [`${prefix.value}-swiper__card`]: props.type === 'card',\n            [`${prefix.value}-is-active`]: props.type === 'card' && active.value,\n            [`${prefix.value}-swiper__fade`]: props.animation === 'fade',\n          },\n        ]}\n        style={itemStyle.value}\n      >\n        {slots.default?.({}) || []}\n      </div>\n    );\n  },\n});\n"],"names":["swiperItemProps","index","type","Number","currentIndex","isSwitching","Boolean","getWrapAttribute","Function","swiperItemLength","CARD_SCALE","itemWidth","defineComponent","name","props","setup","slots","prefix","usePrefixClass","active","computed","disposeIndex","translateX","wrapWidth","translateIndex","value","inStage","Math","abs","zIndex","isActivity","round","itemStyle","animation","opacity","transition","duration","transform","_createVNode"],"mappings":"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"}