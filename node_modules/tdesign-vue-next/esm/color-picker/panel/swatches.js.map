{"version":3,"file":"swatches.js","sources":["../../../src/color-picker/panel/swatches.tsx"],"sourcesContent":["import { computed, defineComponent, PropType, ref } from 'vue';\nimport { DeleteIcon as TdDeleteIcon, AddIcon as TdAddIcon } from 'tdesign-icons-vue-next';\n\nimport { Color } from '../utils';\nimport { useBaseClassName } from '../hooks';\nimport { useCommonClassName } from '../../hooks/useConfig';\nimport { useGlobalIcon } from '../../hooks/useGlobalIcon';\nimport baseProps from './base-props';\n\nexport default defineComponent({\n  name: 'SwatchesPanel',\n  props: {\n    ...baseProps,\n    colors: {\n      type: Array as PropType<string[]>,\n      default: () => [] as PropType<string[]>,\n    },\n    title: {\n      type: String,\n      default: '系统色彩',\n    },\n    editable: {\n      type: Boolean,\n      default: false,\n    },\n    onSetColor: {\n      type: Function,\n      default: () => {\n        return () => {};\n      },\n    },\n    handleAddColor: {\n      type: Function,\n      default: () => {\n        return () => {};\n      },\n    },\n  },\n  setup(props) {\n    const baseClassName = useBaseClassName();\n    const { DeleteIcon, AddIcon } = useGlobalIcon({ DeleteIcon: TdDeleteIcon, AddIcon: TdAddIcon });\n    const { STATUS } = useCommonClassName();\n    const statusClassNames = STATUS.value;\n    const visiblePopConfirm = ref<boolean>(false);\n    const setVisiblePopConfirm = (visible: boolean) => {\n      visiblePopConfirm.value = visible;\n    };\n\n    const handleClick = (color: string) => props.onSetColor(color);\n\n    const isEqualCurrentColor = (color: string) => {\n      return Color.compare(color, props.color.css);\n    };\n\n    const selectedColorIndex = computed(() => {\n      return props.colors.findIndex((color) => isEqualCurrentColor(color));\n    });\n\n    /**\n     * 移除颜色\n     */\n    const handleRemoveColor = () => {\n      const colors = [...props.colors];\n      const selectedIndex = selectedColorIndex.value;\n      if (selectedIndex > -1) {\n        colors.splice(selectedIndex, 1);\n      } else {\n        colors.length = 0;\n      }\n      props.onChange(colors);\n      setVisiblePopConfirm(false);\n    };\n\n    return {\n      baseClassName,\n      DeleteIcon,\n      AddIcon,\n      statusClassNames,\n      selectedColorIndex,\n      visiblePopConfirm,\n      setVisiblePopConfirm,\n      handleClick,\n      isEqualCurrentColor,\n      handleRemoveColor,\n    };\n  },\n  render() {\n    const { baseClassName, DeleteIcon, AddIcon, statusClassNames, title, editable } = this;\n    const swatchesClass = `${baseClassName}__swatches`;\n\n    const renderActions = () => {\n      if (!editable) {\n        return null;\n      }\n\n      return (\n        <div class={`${swatchesClass}--actions`}>\n          <span role=\"button\" class={`${baseClassName}__icon`} onClick={() => this.handleAddColor()}>\n            <AddIcon />\n          </span>\n          {this.colors.length > 0 ? (\n            <span role=\"button\" class={`${baseClassName}__icon`} onClick={() => this.handleRemoveColor()}>\n              <DeleteIcon />\n            </span>\n          ) : null}\n        </div>\n      );\n    };\n\n    return (\n      <div class={swatchesClass}>\n        <h3 class={`${swatchesClass}--title`}>\n          <span>{title}</span>\n          {renderActions()}\n        </h3>\n        <ul class={[`${swatchesClass}--items`, 'narrow-scrollbar']}>\n          {this.colors.map((color) => {\n            return (\n              <li\n                class={[\n                  `${swatchesClass}--item`,\n                  this.isEqualCurrentColor(color) && editable ? statusClassNames.active : '',\n                ]}\n                title={color}\n                key={color}\n                onClick={() => {\n                  if (this.disabled) {\n                    return;\n                  }\n                  this.handleClick(color);\n                }}\n              >\n                <div class={[`${swatchesClass}--color`, `${baseClassName}--bg-alpha`]}>\n                  <span\n                    class={`${swatchesClass}--inner`}\n                    style={{\n                      background: color,\n                    }}\n                  ></span>\n                </div>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  },\n});\n"],"names":["defineComponent","name","props","baseProps","colors","type","Array","title","String","editable","Boolean","onSetColor","Function","handleAddColor","setup","baseClassName","useBaseClassName","useGlobalIcon","DeleteIcon","TdDeleteIcon","AddIcon","TdAddIcon","useCommonClassName","STATUS","statusClassNames","value","visiblePopConfirm","ref","setVisiblePopConfirm","visible","handleClick","color","isEqualCurrentColor","Color","compare","css","selectedColorIndex","computed","findIndex","handleRemoveColor","selectedIndex","splice","length","onChange","render","swatchesClass","renderActions","_createVNode","map","active","disabled","background"],"mappings":"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"}