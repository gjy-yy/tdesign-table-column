{"version":3,"file":"color-picker.js","sources":["../../src/color-picker/color-picker.tsx"],"sourcesContent":["import { defineComponent, ref, toRefs } from 'vue';\nimport useVModel from '../hooks/useVModel';\nimport { renderTNodeJSXDefault } from '../utils/render-tnode';\nimport props from './props';\nimport { Popup as TPopup } from '../popup';\nimport ColorPanel from './panel';\nimport DefaultTrigger from './trigger';\nimport { TdColorContext } from './interfaces';\nimport { useBaseClassName } from './hooks';\n\nexport default defineComponent({\n  name: 'TColorPicker',\n  props: {\n    ...props,\n  },\n  setup(props) {\n    const baseClassName = useBaseClassName();\n    const visible = ref(false);\n    const setVisible = (value: boolean) => (visible.value = value);\n\n    const { value: inputValue, modelValue } = toRefs(props);\n    const [innerValue, setInnerValue] = useVModel(inputValue, modelValue, props.defaultValue, props.onChange);\n\n    const refTrigger = ref<HTMLElement>();\n\n    const renderPopupContent = () => {\n      if (props.disabled) {\n        return null;\n      }\n      const newProps = { ...props };\n      delete newProps.onChange;\n      return (\n        <ColorPanel\n          {...newProps}\n          disabled={props.disabled}\n          value={innerValue.value}\n          togglePopup={setVisible}\n          onChange={(value: string, context: TdColorContext) => setInnerValue(value, context)}\n        />\n      );\n    };\n\n    return {\n      baseClassName,\n      innerValue,\n      visible,\n      refTrigger,\n      renderPopupContent,\n      setVisible,\n      setInnerValue,\n    };\n  },\n  render() {\n    const { popupProps, disabled, baseClassName } = this;\n    const popProps = {\n      placement: 'bottom-left',\n      ...((popupProps as any) || {}),\n      trigger: 'click',\n      attach: 'body',\n      overlayClassName: [baseClassName],\n      visible: this.visible,\n      overlayInnerStyle: {\n        padding: 0,\n      },\n      onVisibleChange: (\n        visible: boolean,\n        context: {\n          trigger: string;\n        },\n      ) => {\n        if (context.trigger === 'document') {\n          this.setVisible(false);\n        }\n      },\n    };\n    return (\n      <TPopup {...popProps} content={this.renderPopupContent}>\n        <div class={`${baseClassName}__trigger`} onClick={() => this.setVisible(!this.visible)} ref=\"refTrigger\">\n          {renderTNodeJSXDefault(\n            this,\n            'default',\n            <DefaultTrigger\n              color={this.innerValue}\n              disabled={disabled}\n              input-props={this.inputProps}\n              onTriggerChange={this.setInnerValue}\n            />,\n          )}\n        </div>\n      </TPopup>\n    );\n  },\n});\n"],"names":["defineComponent","name","props","setup","baseClassName","useBaseClassName","visible","ref","setVisible","value","toRefs","inputValue","modelValue","useVModel","defaultValue","onChange","innerValue","setInnerValue","refTrigger","renderPopupContent","disabled","newProps","_createVNode","_mergeProps","context","render","popupProps","popProps","placement","trigger","attach","overlayClassName","overlayInnerStyle","padding","onVisibleChange","TPopup","renderTNodeJSXDefault","inputProps"],"mappings":"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"}