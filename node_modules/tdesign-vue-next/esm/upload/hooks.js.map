{"version":3,"file":"hooks.js","sources":["../../src/upload/hooks.tsx"],"sourcesContent":["import { computed, ref, ComputedRef } from 'vue';\nimport findIndex from 'lodash/findIndex';\nimport log from '../_common/js/log';\n\nimport {\n  TdUploadProps,\n  UploadFile,\n  UploadRemoveOptions,\n  FlowRemoveContext,\n  HTMLInputEvent,\n  UploadCtxType,\n} from './interface';\n\nimport { useUpload } from './useUpload';\n\nexport const useComponentsStatus = (props: TdUploadProps, uploadCtx: UploadCtxType) => {\n  const showUploadList = computed(() => {\n    if (props.multiple && props.theme === 'file' && props.draggable) return true;\n    return props.multiple && ['file-flow', 'image-flow'].includes(props.theme);\n  });\n\n  // 默认文件上传风格：文件进行上传和上传成功后不显示 tips\n  const showTips = computed(() => {\n    if (props.theme === 'file') {\n      const hasNoFile = (!uploadCtx.uploadValue || !uploadCtx.uploadValue.length) && !uploadCtx.loadingFile;\n      return props.tips && hasNoFile;\n    }\n    return Boolean(props.tips);\n  });\n\n  const showErrorMsg = computed(() => {\n    return !showUploadList.value && !!uploadCtx.errorMsg;\n  });\n\n  // 拖拽类单文件或图片上传\n  const singleDraggable = computed(\n    () => !props.multiple && props.draggable && ['file', 'file-input', 'image'].includes(props.theme),\n  );\n\n  return {\n    showUploadList,\n    showTips,\n    showErrorMsg,\n    singleDraggable,\n  };\n};\n\n// 图片预览相关逻辑\nexport const useImgPreview = (props: TdUploadProps) => {\n  const showImageViewUrl = ref('');\n  const showImageViewDialog = ref(false);\n\n  const handlePreviewImg = (event: MouseEvent, file?: UploadFile) => {\n    if (!file || !file.url) return log.error('Uploader', 'Preview Error file');\n    showImageViewUrl.value = file.url;\n    showImageViewDialog.value = true;\n    const previewCtx = { file, e: event };\n    props.onPreview?.(previewCtx);\n  };\n\n  // close image view dialog\n  const cancelPreviewImgDialog = () => {\n    showImageViewDialog.value = false;\n    // Dialog 动画结束后，再清理图片\n    let timer = setTimeout(() => {\n      showImageViewUrl.value = null;\n      clearTimeout(timer);\n      timer = null;\n    }, 500);\n  };\n\n  return {\n    showImageViewUrl,\n    showImageViewDialog,\n    handlePreviewImg,\n    cancelPreviewImgDialog,\n  };\n};\n\n// 拖拽相关\nexport const useDragger = (props: TdUploadProps, disabled: ComputedRef<boolean>) => {\n  const dragActive = ref(false);\n  const handleDragenter = (e: DragEvent) => {\n    if (disabled.value) return;\n    dragActive.value = true;\n    props.onDragenter?.({ e });\n  };\n\n  const handleDragleave = (e: DragEvent) => {\n    if (disabled.value) return;\n    dragActive.value = false;\n    props.onDragleave?.({ e });\n  };\n\n  return {\n    handleDragenter,\n    handleDragleave,\n    dragActive,\n  };\n};\n\n// 删除相关\nexport const useRemove = (props: TdUploadProps, uploadCtx: UploadCtxType) => {\n  const handleSingleRemove = (e: MouseEvent) => {\n    const changeCtx = { trigger: 'remove' };\n    if (uploadCtx.loadingFile) uploadCtx.loadingFile = null;\n    uploadCtx.errorMsg = '';\n    uploadCtx.setUploadValue([], changeCtx);\n    props.onRemove?.({ e });\n  };\n\n  const handleFileInputRemove = (e: MouseEvent) => {\n    e?.stopPropagation();\n    handleSingleRemove(e);\n  };\n\n  const handleMultipleRemove = (options: UploadRemoveOptions) => {\n    let files: UploadFile[] = [];\n    if (!uploadCtx.canBatchUpload) {\n      files = uploadCtx.uploadValue.concat();\n      files.splice(options.index, 1);\n    } else {\n      // All files remove in batchUpload\n      files = [];\n      options.files = uploadCtx.uploadValue.concat();\n    }\n    const changeCtx = { trigger: 'remove', ...options };\n    uploadCtx.setUploadValue(files, changeCtx);\n    props.onRemove?.(options);\n  };\n\n  const handleListRemove = (context: FlowRemoveContext) => {\n    const { file } = context;\n    const index = findIndex(uploadCtx.toUploadFiles, (o: any) => o.name === file?.name);\n    if (index >= 0) {\n      uploadCtx.toUploadFiles.splice(index, 1);\n    } else {\n      const index = findIndex(uploadCtx.uploadValue, (o: any) => o.name === file?.name);\n      handleMultipleRemove({ e: context.e, index });\n    }\n  };\n\n  return {\n    handleFileInputRemove,\n    handleSingleRemove,\n    handleMultipleRemove,\n    handleListRemove,\n  };\n};\n\n// 上传相关动作\nexport const useActions = (props: TdUploadProps, uploadCtx: UploadCtxType, disabled: ComputedRef<boolean>) => {\n  const { uploadFiles, upload, xhrReq } = useUpload(props, uploadCtx);\n  const inputRef = ref(null);\n  const handleChange = (event: HTMLInputEvent) => {\n    const { files } = event.target;\n    if (disabled.value) return;\n    uploadFiles(files);\n\n    (inputRef.value as HTMLInputElement).value = '';\n  };\n\n  const multipleUpload = (currentFiles: Array<UploadFile>) => {\n    if (props.uploadAllFilesInOneRequest) {\n      // 一个请求同时上传多个文件\n      upload(currentFiles);\n    } else {\n      currentFiles.forEach((file) => {\n        upload(file);\n      });\n    }\n  };\n\n  const triggerUpload = () => {\n    if (disabled.value) return;\n    (inputRef.value as HTMLInputElement).click();\n  };\n\n  const cancelUpload = () => {\n    if (uploadCtx.loadingFile) {\n      // 如果存在自定义上传方法，则只需要抛出事件，而后由父组件处理取消上传\n      if (!props.requestMethod) {\n        xhrReq.value && xhrReq.value.abort();\n        uploadCtx.toUploadFiles = [];\n      }\n      props.onCancelUpload?.();\n      uploadCtx.loadingFile = null;\n    }\n    (inputRef.value as HTMLInputElement).value = '';\n  };\n\n  const handleDragChange = (files: FileList) => {\n    if (disabled.value) return;\n    uploadFiles(files);\n  };\n  return { handleChange, multipleUpload, triggerUpload, cancelUpload, handleDragChange, upload, inputRef };\n};\n\n// 合并上传\nexport const useBatchUpload = (props: TdUploadProps) => {\n  const uploadInOneRequest = computed(() => {\n    return props.multiple && props.uploadAllFilesInOneRequest;\n  });\n  const canBatchUpload = computed(() => {\n    return uploadInOneRequest.value && props.isBatchUpload;\n  });\n\n  return {\n    uploadInOneRequest,\n    canBatchUpload,\n  };\n};\n"],"names":["useComponentsStatus","props","uploadCtx","showUploadList","computed","multiple","theme","draggable","includes","showTips","hasNoFile","uploadValue","length","loadingFile","tips","Boolean","showErrorMsg","value","errorMsg","singleDraggable","useImgPreview","showImageViewUrl","ref","showImageViewDialog","handlePreviewImg","event","file","url","log","error","previewCtx","e","onPreview","cancelPreviewImgDialog","timer","setTimeout","clearTimeout","useDragger","disabled","dragActive","handleDragenter","onDragenter","handleDragleave","onDragleave","useRemove","handleSingleRemove","changeCtx","trigger","setUploadValue","onRemove","handleFileInputRemove","stopPropagation","handleMultipleRemove","options","files","canBatchUpload","concat","splice","index","handleListRemove","context","findIndex","toUploadFiles","o","name","useActions","useUpload","uploadFiles","upload","xhrReq","inputRef","handleChange","target","multipleUpload","currentFiles","uploadAllFilesInOneRequest","forEach","triggerUpload","click","cancelUpload","requestMethod","abort","onCancelUpload","handleDragChange","useBatchUpload","uploadInOneRequest","isBatchUpload"],"mappings":"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"}