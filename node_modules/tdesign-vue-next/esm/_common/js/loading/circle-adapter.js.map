{"version":3,"file":"circle-adapter.js","sources":["../../../../src/_common/js/loading/circle-adapter.ts"],"sourcesContent":["import setStyle from '../utils/set-style';\nimport { getIEVersion } from '../utils/helper';\n\nexport default function circleAdapter(circleElem: HTMLElement) {\n  let basicStyle = {};\n\n  if (!circleElem) {\n    return;\n  }\n\n  const { color, fontSize } = window?.getComputedStyle?.(circleElem);\n\n  // to fix the browser compat of foreignObject in Safari,\n  // https://bugs.webkit.org/show_bug.cgi?id=23113\n  const ua = window?.navigator?.userAgent;\n  const isSafari = /Safari/.test(ua) && !/Chrome/.test(ua);\n  // 判断是否为 iOS 下的微信和企业微信\n  const isIosWechat = /(?=.*iPhone)[?=.*MicroMessenger]/.test(ua) && !/Chrome/.test(ua);\n  if (isSafari || isIosWechat) {\n    basicStyle = {\n      transformOrigin: '-1px -1px',\n      transform: `scale(${parseInt(fontSize, 10) / 14})`,\n    };\n  }\n  // 添加：判断是否为IE浏览器\n  if (color && getIEVersion() > 11) {\n    const matched = color.match(/[\\d.]+/g);\n    const endColor = matched ? `rgba(${matched[0]}, ${matched[1]}, ${matched[2]}, 0)` : '';\n    setStyle(circleElem, {\n      ...basicStyle,\n      background: `conic-gradient(from 90deg at 50% 50%,${endColor} 0deg, ${color} 360deg)`,\n    });\n  } else {\n    setStyle(circleElem, {\n      ...basicStyle,\n      background: '',\n    });\n  }\n}\n"],"names":["circleAdapter","circleElem","basicStyle","window","getComputedStyle","color","fontSize","ua","navigator","userAgent","isSafari","test","isIosWechat","transformOrigin","transform","parseInt","getIEVersion","matched","match","endColor","setStyle","background"],"mappings":";;;;;;;;;;;;;;;;AAGA,SAAwBA,aAAxB,CAAsCC,UAAtC,EAA+D;AAAA,EAAA,IAAA,OAAA,EAAA,sBAAA,EAAA,QAAA,EAAA,kBAAA,CAAA;;EAC7D,IAAIC,aAAa,EAAjB,CAAA;;EAEA,IAAI,CAACD,UAAL,EAAiB;AACf,IAAA,OAAA;AACF,GAAA;;AAEA,EAAA,IAAA,qBAAA,GAAA,CAAA,OAAA,GAA4BE,MAA5B,MAA4B,IAAA,IAAA,OAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,CAAA,sBAAA,GAAA,OAAA,CAAQC,gBAApC,MAA4B,IAAA,IAAA,sBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,sBAAA,CAAA,IAAA,CAAA,OAAA,EAA2BH,UAA3B,CAA5B;MAAQI,KAAR,yBAAQA,KAAR;MAAeC,QAAf,yBAAeA,QAAf,CAAA;;EAIM,IAAAC,EAAA,eAAKJ,MAAL,MAAA,IAAA,IAAA,QAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,CAAA,kBAAA,GAAK,SAAQK,SAAb,MAAA,IAAA,IAAA,kBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAK,mBAAmBC,SAAxB,CAAA;AACA,EAAA,IAAAC,QAAA,GAAW,QAASC,CAAAA,IAAT,CAAcJ,EAAd,CAAqB,IAAA,CAAC,QAASI,CAAAA,IAAT,CAAcJ,EAAd,CAAjC,CAAA;AAEA,EAAA,IAAAK,WAAA,GAAc,kCAAmCD,CAAAA,IAAnC,CAAwCJ,EAAxC,CAA+C,IAAA,CAAC,QAASI,CAAAA,IAAT,CAAcJ,EAAd,CAA9D,CAAA;;EACN,IAAIG,YAAYE,WAAhB,EAA6B;AACdV,IAAAA,UAAA,GAAA;AACXW,MAAAA,eAAiB,EAAA,WADN;MAEXC,SAAW,EAAA,QAAA,CAAA,MAAA,CAASC,QAAS,CAAAT,QAAA,EAAU,EAAV,CAAT,GAAyB,EAAlC,EAAA,GAAA,CAAA;KAFA,CAAA;AAIf,GAAA;;AAEI,EAAA,IAAAD,KAAA,IAASW,YAAa,EAAA,GAAI,EAA1B,EAA8B;AAC1B,IAAA,IAAAC,OAAA,GAAUZ,KAAM,CAAAa,KAAN,CAAY,SAAZ,CAAV,CAAA;AACA,IAAA,IAAAC,QAAA,GAAWF,yBAAkBA,OAAA,CAAQ,CAAR,gBAAeA,OAAQ,CAAA,CAAA,GAAOA,IAAAA,CAAAA,CAAAA,MAAAA,CAAAA,QAAQ,cAAW,EAA9E,CAAA;IACNG,QAAA,CAASnB,UAAT,EAAA,aAAA,CAAA,aAAA,CAAA,EAAA,EACKC,UADL,CAAA,EAAA,EAAA,EAAA;MAEEmB,UAAA,EAAA,uCAAA,CAAA,MAAA,CAAoDF,QAApD,EAAA,SAAA,CAAA,CAAA,MAAA,CAAsEd,KAAtE,EAAA,UAAA,CAAA;KAFF,CAAA,CAAA,CAAA;AAIK,GAPH,MAOG;IACLe,QAAA,CAASnB,UAAT,EAAA,aAAA,CAAA,aAAA,CAAA,EAAA,EACKC,UADL,CAAA,EAAA,EAAA,EAAA;AAEEmB,MAAAA,UAAY,EAAA,EAAA;KAFd,CAAA,CAAA,CAAA;AAIF,GAAA;AACF;;;;"}