{"version":3,"file":"useInput.js","sources":["../../src/input/useInput.ts"],"sourcesContent":["import { ref, computed, watch, nextTick, toRefs, inject, onBeforeMount } from 'vue';\nimport { getCharacterLength } from '../utils/helper';\nimport { InputValue } from './type';\nimport { ExtendsTdInputProps } from './input';\nimport { FormItemInjectionKey } from '../form/const';\n\nimport useVModel from '../hooks/useVModel';\nimport { useFormDisabled } from '../form/hooks';\n\nexport default function useInput(props: ExtendsTdInputProps, expose: (exposed: Record<string, any>) => void) {\n  const { value, modelValue } = toRefs(props);\n  const inputValue = ref<InputValue>();\n  const clearIconRef = ref(null);\n  const innerClickElement = ref();\n  const disabled = useFormDisabled();\n  const [innerValue, setInnerValue] = useVModel(value, modelValue, props.defaultValue, props.onChange);\n\n  const isHover = ref(false);\n  const focused = ref(false);\n  const renderType = ref(props.type);\n  const inputRef = ref<HTMLInputElement>(null);\n  const inputPreRef = ref(null);\n  // 字数限制统计\n  const limitNumber = ref('');\n\n  const innerStatus = computed(() => {\n    if (limitNumber.value) {\n      const [current, total] = limitNumber.value.split('/');\n      return Number(current) > Number(total) ? 'error' : '';\n    }\n    return '';\n  });\n\n  const tStatus = computed(() => {\n    if (props.status) return props.status;\n    return innerStatus.value;\n  });\n\n  const showClear = computed(() => {\n    return (\n      ((innerValue.value && !disabled.value && props.clearable && !props.readonly) || props.showClearIconOnEmpty) &&\n      isHover.value\n    );\n  });\n\n  const focus = () => inputRef.value?.focus();\n  const blur = () => inputRef.value?.blur();\n\n  const emitFocus = (e: FocusEvent) => {\n    inputValue.value = innerValue.value;\n    if (props.disabled || props.readonly) return;\n    focused.value = true;\n    props.onFocus?.(innerValue.value, { e });\n  };\n\n  const emitClear = ({ e }: { e: MouseEvent }) => {\n    props.onClear?.({ e });\n    setInnerValue('', { e });\n  };\n\n  const onClearIconMousedown = (e: MouseEvent) => {\n    innerClickElement.value = e.target;\n  };\n\n  const emitPassword = () => {\n    const toggleType = renderType.value === 'password' ? 'text' : 'password';\n    renderType.value = toggleType;\n  };\n\n  const setInputElValue = (v: InputValue = '') => {\n    const inputEl = inputRef.value as HTMLInputElement;\n    if (!inputEl) return;\n    const sV = String(v);\n    if (!inputEl.value) {\n      return;\n    }\n    if (inputEl.value !== sV) {\n      inputEl.value = sV;\n    }\n  };\n  const inputValueChangeHandle = (e: InputEvent | CompositionEvent) => {\n    const { target } = e;\n    let val = (target as HTMLInputElement).value;\n    if (props.maxcharacter && props.maxcharacter > 0) {\n      const stringInfo = getCharacterLength(val, props.maxcharacter);\n      if (typeof stringInfo === 'object') {\n        if (!props.allowInputOverMax) {\n          val = stringInfo.characters;\n        }\n        limitNumber.value = `${stringInfo.length}/${props.maxcharacter}`;\n      }\n    }\n    if (props.maxlength && props.maxlength > 0) {\n      if (!props.allowInputOverMax) {\n        val = val.substring(0, props.maxlength);\n      }\n      limitNumber.value = `${val.length}/${props.maxlength}`;\n    }\n    setInnerValue(val, { e } as { e: InputEvent });\n    // 受控\n    nextTick(() => setInputElValue(innerValue.value));\n  };\n\n  const handleInput = (e: InputEvent) => {\n    const checkInputType = e.inputType && e.inputType === 'insertCompositionText';\n    if (e.isComposing || checkInputType) return;\n    inputValueChangeHandle(e);\n  };\n\n  const isClearIcon = () => {\n    let tmp = innerClickElement.value;\n    if (!tmp || !tmp.tagName || !clearIconRef.value?.$el || !['path', 'svg'].includes(tmp.tagName)) return false;\n    while (tmp) {\n      if (clearIconRef.value?.$el === tmp) {\n        return true;\n      }\n      tmp = tmp.parentNode;\n    }\n    return false;\n  };\n\n  const formItem = inject(FormItemInjectionKey, undefined);\n  const formatAndEmitBlur = (e: FocusEvent) => {\n    if (props.format) {\n      inputValue.value = props.format(innerValue.value);\n    }\n    focused.value = false;\n    // 点击清空按钮的时候，不应该触发 onBlur 事件。这个规则在表格单元格编辑中有很重要的应用\n    if (!isClearIcon() && props.allowTriggerBlur) {\n      props.onBlur?.(innerValue.value, { e });\n      formItem?.handleBlur();\n    }\n  };\n\n  const onHandleCompositionend = (e: CompositionEvent) => {\n    inputValueChangeHandle(e);\n    props.onCompositionend?.(innerValue.value, { e });\n  };\n  const onHandleCompositionstart = (e: CompositionEvent) => {\n    props.onCompositionstart?.(innerValue.value, { e });\n  };\n\n  const onRootClick = (e: MouseEvent) => {\n    inputRef.value?.focus();\n  };\n\n  watch(\n    () => props.autofocus,\n    (value) => {\n      if (value === true) {\n        nextTick(() => {\n          inputRef.value?.focus();\n        });\n      }\n    },\n    { immediate: true },\n  );\n\n  watch(\n    innerValue,\n    (v) => {\n      inputValue.value = v;\n    },\n    { immediate: true },\n  );\n\n  watch(\n    () => props.type,\n    (v) => {\n      renderType.value = v;\n    },\n    { immediate: true },\n  );\n\n  watch(innerStatus, () => {\n    props.onValidate?.({ error: innerStatus.value ? 'exceed-maximum' : undefined });\n  });\n\n  const updateLimitNumber = () => {\n    if (props.maxcharacter && props.maxcharacter > 0) {\n      const len = getCharacterLength(String(innerValue.value));\n      limitNumber.value = `${len}/${props.maxcharacter}`;\n    }\n    if (props.maxlength && props.maxlength > 0) {\n      limitNumber.value = `${String(innerValue.value).length}/${props.maxlength}`;\n    }\n  };\n\n  onBeforeMount(() => {\n    updateLimitNumber();\n  });\n\n  expose({\n    inputRef,\n    focus,\n    blur,\n  });\n\n  return {\n    isHover,\n    focused,\n    renderType,\n    showClear,\n    inputRef,\n    clearIconRef,\n    inputValue,\n    limitNumber,\n    tStatus,\n    emitFocus,\n    formatAndEmitBlur,\n    onHandleCompositionend,\n    onHandleCompositionstart,\n    onRootClick,\n    emitPassword,\n    handleInput,\n    emitClear,\n    onClearIconMousedown,\n    innerValue,\n    inputPreRef,\n  };\n}\n"],"names":["useInput","props","expose","toRefs","value","modelValue","inputValue","ref","clearIconRef","innerClickElement","disabled","useFormDisabled","useVModel","defaultValue","onChange","_slicedToArray","innerValue","setInnerValue","isHover","focused","renderType","type","inputRef","inputPreRef","limitNumber","innerStatus","computed","split","current","total","Number","tStatus","status","showClear","clearable","readonly","showClearIconOnEmpty","focus","blur","emitFocus","e","onFocus","emitClear","onClear","onClearIconMousedown","target","emitPassword","toggleType","setInputElValue","v","inputEl","sV","String","inputValueChangeHandle","val","maxcharacter","stringInfo","getCharacterLength","_typeof","allowInputOverMax","characters","length","maxlength","substring","nextTick","handleInput","checkInputType","inputType","isComposing","isClearIcon","tmp","tagName","$el","includes","parentNode","formItem","inject","FormItemInjectionKey","formatAndEmitBlur","format","allowTriggerBlur","onBlur","handleBlur","onHandleCompositionend","onCompositionend","onHandleCompositionstart","onCompositionstart","onRootClick","watch","autofocus","immediate","onValidate","error","updateLimitNumber","len","onBeforeMount"],"mappings":"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"}