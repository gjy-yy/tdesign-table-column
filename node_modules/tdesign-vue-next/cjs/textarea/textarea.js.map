{"version":3,"file":"textarea.js","sources":["../../src/textarea/textarea.tsx"],"sourcesContent":["import { defineComponent, computed, watch, ref, nextTick, onMounted, toRefs, inject, StyleValue } from 'vue';\nimport props from './props';\nimport { TextareaValue, TdTextareaProps } from './type';\nimport { getCharacterLength, omit } from '../utils/helper';\nimport calcTextareaHeight from './calcTextareaHeight';\nimport { FormItemInjectionKey } from '../form/const';\n\n// hooks\nimport useVModel from '../hooks/useVModel';\nimport { useFormDisabled } from '../form/hooks';\nimport { useTNodeJSX } from '../hooks/tnode';\nimport { usePrefixClass, useCommonClassName } from '../hooks/useConfig';\n\nfunction getValidAttrs(obj: object): object {\n  const newObj = {};\n  Object.keys(obj).forEach((key) => {\n    if (typeof obj[key] !== 'undefined') {\n      newObj[key] = obj[key];\n    }\n  });\n  return newObj;\n}\n\nexport default defineComponent({\n  name: 'TTextarea',\n  inheritAttrs: false,\n  props: { ...props },\n\n  setup(props: TdTextareaProps, { attrs, expose }) {\n    const prefix = usePrefixClass();\n    const name = usePrefixClass('textarea');\n    const TEXTAREA_TIPS_CLASS = computed(() => `${name.value}__tips`);\n    const TEXTAREA_LIMIT = computed(() => `${name.value}__limit`);\n\n    const { value, modelValue } = toRefs(props);\n    const [innerValue, setInnerValue] = useVModel(value, modelValue, props.defaultValue, props.onChange);\n    const disabled = useFormDisabled();\n    const textareaStyle = ref({});\n    const computedStyle = computed(() => {\n      const { style } = attrs as { style: StyleValue };\n      return [style, textareaStyle.value];\n    });\n\n    const refTextareaElem = ref<HTMLTextAreaElement>();\n    const focused = ref(false);\n\n    const focus = () => refTextareaElem.value?.focus();\n    const blur = () => refTextareaElem.value?.blur();\n\n    // methods\n    const adjustTextareaHeight = () => {\n      if (props.autosize === true) {\n        nextTick(() => {\n          textareaStyle.value = calcTextareaHeight(refTextareaElem.value);\n        });\n      } else if (typeof props.autosize === 'object') {\n        const { minRows, maxRows } = props.autosize;\n        textareaStyle.value = calcTextareaHeight(refTextareaElem.value, minRows, maxRows);\n      } else if (attrs.rows) {\n        textareaStyle.value = { height: 'auto', minHeight: 'auto' };\n      } else if (attrs.style && refTextareaElem.value?.style?.height) {\n        textareaStyle.value = { height: refTextareaElem.value.style.height };\n      }\n    };\n\n    const setInputValue = (v: TextareaValue = '') => {\n      const textareaElem = refTextareaElem.value;\n      const sV = String(v);\n      if (!textareaElem) {\n        return;\n      }\n      if (textareaElem.value !== sV) {\n        textareaElem.value = sV;\n        innerValue.value = sV;\n      }\n    };\n    const inputValueChangeHandle = (e: InputEvent) => {\n      const { target } = e;\n      let val = (target as HTMLInputElement).value;\n      if (props.maxcharacter && props.maxcharacter >= 0) {\n        const stringInfo = getCharacterLength(val, props.maxcharacter);\n        val = typeof stringInfo === 'object' && stringInfo.characters;\n      }\n      setInnerValue(val, { e });\n      nextTick(() => setInputValue(val));\n      adjustTextareaHeight();\n    };\n\n    const handleInput = (e: any) => {\n      if (e.isComposing || e.inputType === 'insertCompositionText') return;\n      inputValueChangeHandle(e);\n    };\n    const onCompositionend = (e: InputEvent | CompositionEvent) => {\n      inputValueChangeHandle(e as InputEvent);\n    };\n\n    const eventDeal = (name: 'keydown' | 'keyup' | 'keypress' | 'change', e: KeyboardEvent | FocusEvent) => {\n      if (disabled.value) return;\n      const _name = `on${name[0].toUpperCase()}${name.slice(1)}`;\n      props[_name]?.(innerValue.value, { e });\n    };\n\n    const emitKeyDown = (e: KeyboardEvent) => {\n      eventDeal('keydown', e);\n    };\n    const emitKeyUp = (e: KeyboardEvent) => {\n      eventDeal('keyup', e);\n    };\n    const emitKeypress = (e: KeyboardEvent) => {\n      eventDeal('keypress', e);\n    };\n\n    const emitFocus = (e: FocusEvent) => {\n      adjustTextareaHeight();\n      if (disabled.value) return;\n      focused.value = true;\n      props.onFocus?.(innerValue.value, { e });\n    };\n\n    const formItem = inject(FormItemInjectionKey, undefined);\n    const emitBlur = (e: FocusEvent) => {\n      adjustTextareaHeight();\n      focused.value = false;\n      props.onBlur?.(innerValue.value, { e });\n      formItem?.handleBlur();\n    };\n\n    // computed\n    const textareaClasses = computed(() => {\n      return [\n        name.value,\n        {\n          [`${prefix.value}-is-disabled`]: disabled.value,\n          [`${prefix.value}-is-readonly`]: props.readonly,\n        },\n      ];\n    });\n    const inputAttrs = computed<Record<string, any>>(() => {\n      return getValidAttrs({\n        autofocus: props.autofocus,\n        disabled: disabled.value,\n        readonly: props.readonly,\n        placeholder: props.placeholder,\n        maxlength: props.maxlength || undefined,\n        name: props.name || undefined,\n      });\n    });\n    const characterNumber = computed(() => {\n      const characterInfo = getCharacterLength(String(innerValue.value || ''));\n      if (typeof characterInfo === 'object') {\n        return characterInfo.length;\n      }\n      return characterInfo;\n    });\n\n    // watch\n    watch(\n      () => innerValue.value,\n      () => adjustTextareaHeight(),\n    );\n\n    watch(refTextareaElem, (el) => {\n      if (!el) return;\n      adjustTextareaHeight();\n    });\n\n    watch(\n      () => props.autofocus,\n      (val) => {\n        if (val) {\n          refTextareaElem.value.focus();\n        }\n      },\n    );\n\n    expose({\n      focus,\n      blur,\n    });\n\n    onMounted(() => {\n      adjustTextareaHeight();\n    });\n\n    const renderTNodeJSX = useTNodeJSX();\n    return () => {\n      const inputEvents = getValidAttrs({\n        onFocus: emitFocus,\n        onBlur: emitBlur,\n        onKeydown: emitKeyDown,\n        onKeyup: emitKeyUp,\n        onKeypress: emitKeypress,\n      });\n      const { STATUS } = useCommonClassName();\n      const classes = computed(() => [\n        `${name.value}__inner`,\n        {\n          [`${prefix.value}-is-${props.status}`]: props.status,\n          [STATUS.value.disabled]: disabled.value,\n          [STATUS.value.focused]: focused.value,\n          [`${prefix.value}-resize-none`]: props.maxlength,\n        },\n        'narrow-scrollbar',\n      ]);\n\n      const tips = renderTNodeJSX('tips');\n\n      return (\n        <div class={textareaClasses.value} {...omit(attrs, ['style'])}>\n          <textarea\n            onInput={handleInput}\n            onCompositionend={onCompositionend}\n            ref={refTextareaElem}\n            value={innerValue.value}\n            style={computedStyle.value}\n            class={classes.value}\n            {...inputEvents}\n            {...inputAttrs.value}\n          ></textarea>\n          {props.maxcharacter && (\n            <span class={TEXTAREA_LIMIT.value}>{`${characterNumber.value}/${props.maxcharacter}`}</span>\n          )}\n          {!props.maxcharacter && props.maxlength ? (\n            <span class={TEXTAREA_LIMIT.value}>{`${innerValue.value ? String(innerValue.value)?.length : 0}/${\n              props.maxlength\n            }`}</span>\n          ) : null}\n          {tips && (\n            <div class={`${TEXTAREA_TIPS_CLASS.value} ${name.value}__tips--${props.status || 'normal'}`}>{tips}</div>\n          )}\n        </div>\n      );\n    };\n  },\n});\n"],"names":["getValidAttrs","obj","newObj","Object","keys","forEach","key","defineComponent","name","inheritAttrs","props","setup","attrs","expose","prefix","usePrefixClass","TEXTAREA_TIPS_CLASS","computed","value","TEXTAREA_LIMIT","toRefs","modelValue","useVModel","defaultValue","onChange","_slicedToArray","innerValue","setInnerValue","disabled","useFormDisabled","textareaStyle","ref","computedStyle","style","refTextareaElem","focused","focus","blur","adjustTextareaHeight","autosize","nextTick","calcTextareaHeight","_typeof","minRows","maxRows","rows","height","minHeight","setInputValue","v","textareaElem","sV","String","inputValueChangeHandle","e","target","val","maxcharacter","stringInfo","getCharacterLength","characters","handleInput","isComposing","inputType","onCompositionend","eventDeal","_name","toUpperCase","slice","emitKeyDown","emitKeyUp","emitKeypress","emitFocus","onFocus","formItem","inject","FormItemInjectionKey","emitBlur","onBlur","handleBlur","textareaClasses","_defineProperty","readonly","inputAttrs","autofocus","placeholder","maxlength","characterNumber","characterInfo","length","watch","el","onMounted","renderTNodeJSX","useTNodeJSX","inputEvents","onKeydown","onKeyup","onKeypress","useCommonClassName","STATUS","classes","status","tips","_createVNode","_mergeProps","omit"],"mappings":"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"}