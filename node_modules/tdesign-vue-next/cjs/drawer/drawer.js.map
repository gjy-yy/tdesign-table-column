{"version":3,"file":"drawer.js","sources":["../../src/drawer/drawer.tsx"],"sourcesContent":["import { computed, defineComponent, nextTick, onUpdated, ref, watch } from 'vue';\nimport { CloseIcon as TdCloseIcon } from 'tdesign-icons-vue-next';\n\nimport { useConfig, usePrefixClass } from '../hooks/useConfig';\nimport { useGlobalIcon } from '../hooks/useGlobalIcon';\nimport { isServer, addClass, removeClass } from '../utils/dom';\nimport props from './props';\nimport { DrawerCloseContext } from './type';\nimport TransferDom from '../utils/transfer-dom';\nimport { useAction } from '../dialog/hooks';\nimport { useTNodeJSX, useContent } from '../hooks/tnode';\nimport { useDrag } from './hooks';\n\nexport default defineComponent({\n  name: 'TDrawer',\n  directives: {\n    TransferDom,\n  },\n  props,\n  emits: ['update:visible'],\n  setup(props, context) {\n    const destroyOnCloseVisible = ref(false);\n    const isVisible = ref(false);\n    const { globalConfig } = useConfig('drawer');\n    const { CloseIcon } = useGlobalIcon({ CloseIcon: TdCloseIcon });\n    const renderTNodeJSX = useTNodeJSX();\n    const renderContent = useContent();\n    const COMPONENT_NAME = usePrefixClass('drawer');\n    const LOCK_CLASS = usePrefixClass('drawer--lock');\n    const { draggedSizeValue, enableDrag, draggableLineStyles } = useDrag(props);\n\n    const confirmBtnAction = (e: MouseEvent) => {\n      props.onConfirm?.({ e });\n    };\n    const cancelBtnAction = (e: MouseEvent) => {\n      props.onCancel?.({ e });\n      closeDrawer({ trigger: 'cancel', e });\n    };\n    const { getConfirmBtn, getCancelBtn } = useAction({ confirmBtnAction, cancelBtnAction });\n    const drawerEle = ref<HTMLElement | null>(null);\n    const drawerClasses = computed(() => {\n      return [\n        COMPONENT_NAME.value,\n        `${COMPONENT_NAME.value}--${props.placement}`,\n        {\n          [`${COMPONENT_NAME.value}--open`]: isVisible.value,\n          [`${COMPONENT_NAME.value}--attach`]: props.showInAttachedElement,\n          [`${COMPONENT_NAME.value}--without-mask`]: !props.showOverlay,\n        },\n      ];\n    });\n\n    const sizeValue = computed(() => {\n      if (draggedSizeValue.value) return draggedSizeValue.value;\n\n      const size = props.size ?? globalConfig.value.size;\n      const defaultSize = isNaN(Number(size)) ? size : `${size}px`;\n      return (\n        {\n          small: '300px',\n          medium: '500px',\n          large: '760px',\n        }[size] || defaultSize\n      );\n    });\n    const wrapperStyles = computed(() => {\n      return {\n        // 用于抵消动画效果：transform: translateX(100%); 等\n        transform: isVisible.value ? 'translateX(0)' : undefined,\n        width: ['left', 'right'].includes(props.placement) ? sizeValue.value : '',\n        height: ['top', 'bottom'].includes(props.placement) ? sizeValue.value : '',\n      };\n    });\n\n    const wrapperClasses = computed(() => {\n      return [\n        `${COMPONENT_NAME.value}__content-wrapper`,\n        `${COMPONENT_NAME.value}__content-wrapper--${props.placement}`,\n      ];\n    });\n\n    const parentNode = computed<HTMLElement>(() => {\n      return drawerEle.value && (drawerEle.value.parentNode as HTMLElement);\n    });\n\n    const modeAndPlacement = computed<string>(() => {\n      return [props.mode, props.placement].join();\n    });\n\n    const footerStyle = computed(() => {\n      return {\n        display: 'flex',\n        justifyContent: props.placement === 'right' ? 'flex-start' : 'flex-end',\n      };\n    });\n    const handlePushMode = () => {\n      if (props.mode !== 'push') return;\n      nextTick(() => {\n        if (!parentNode.value) return;\n        parentNode.value.style.cssText = 'transition: margin 300ms cubic-bezier(0.7, 0.3, 0.1, 1) 0s;';\n      });\n    };\n    // push 动画效果处理\n    const updatePushMode = () => {\n      if (!parentNode.value) return;\n      if (props.mode !== 'push' || !parentNode.value) return;\n      const marginStr = {\n        left: `margin: 0 0 0 ${sizeValue.value}`,\n        right: `margin: 0 0 0 -${sizeValue.value}`,\n        top: `margin: ${sizeValue.value} 0 0 0`,\n        bottom: `margin: -${sizeValue.value} 0 0 0`,\n      }[props.placement];\n      if (isVisible.value) {\n        parentNode.value.style.cssText += marginStr;\n      } else {\n        parentNode.value.style.cssText = parentNode.value.style.cssText.replace(/margin:.+;/, '');\n      }\n    };\n\n    // locale 全局配置，插槽，props，默认值，决定了按钮最终呈现\n    const getDefaultFooter = () => {\n      // this.getConfirmBtn is a function of useAction\n      const confirmBtn = getConfirmBtn({\n        confirmBtn: props.confirmBtn,\n        globalConfirm: globalConfig.value.confirm,\n        className: `${COMPONENT_NAME.value}__confirm`,\n      });\n      // this.getCancelBtn is a function of useAction\n      const cancelBtn = getCancelBtn({\n        cancelBtn: props.cancelBtn,\n        globalCancel: globalConfig.value.cancel,\n        className: `${COMPONENT_NAME.value}__cancel`,\n      });\n      return (\n        <div style={footerStyle.value}>\n          {props.placement === 'right' ? confirmBtn : null}\n          {cancelBtn}\n          {props.placement !== 'right' ? confirmBtn : null}\n        </div>\n      );\n    };\n    watch(\n      modeAndPlacement,\n      () => {\n        handlePushMode();\n      },\n      { immediate: true },\n    );\n    watch(\n      () => props.visible,\n      (value) => {\n        if (isServer) return;\n        if (value && !props.showInAttachedElement) {\n          props.preventScrollThrough && addClass(document.body, LOCK_CLASS.value);\n        } else {\n          props.preventScrollThrough && removeClass(document.body, LOCK_CLASS.value);\n        }\n\n        // 处理显示逻辑\n        if (props.destroyOnClose) {\n          if (value) {\n            destroyOnCloseVisible.value = false;\n            setTimeout(() => {\n              isVisible.value = true;\n            });\n          } else {\n            isVisible.value = false;\n            setTimeout(() => {\n              destroyOnCloseVisible.value = true;\n            }, 200);\n          }\n        } else if (destroyOnCloseVisible.value === true && value) {\n          destroyOnCloseVisible.value = false;\n          setTimeout(() => {\n            isVisible.value = true;\n          });\n        } else {\n          isVisible.value = value;\n        }\n      },\n      { immediate: true },\n    );\n    const handleCloseBtnClick = (e: MouseEvent) => {\n      props.onCloseBtnClick?.({ e });\n      closeDrawer({ trigger: 'close-btn', e });\n    };\n    const handleWrapperClick = (e: MouseEvent) => {\n      props.onOverlayClick?.({ e });\n      if (props.closeOnOverlayClick ?? globalConfig.value.closeOnOverlayClick) {\n        closeDrawer({ trigger: 'overlay', e });\n      }\n    };\n    const onKeyDown = (e: KeyboardEvent) => {\n      // 根据closeOnEscKeydown判断按下ESC时是否触发close事件\n      if ((props.closeOnEscKeydown ?? globalConfig.value.closeOnEscKeydown) && e.key === 'Escape') {\n        props.onEscKeydown?.({ e });\n        closeDrawer({ trigger: 'esc', e });\n      }\n    };\n    const closeDrawer = (params: DrawerCloseContext) => {\n      props.onClose?.(params);\n      context.emit('update:visible', false);\n    };\n\n    onUpdated(() => {\n      updatePushMode();\n    });\n\n    return () => {\n      if (destroyOnCloseVisible.value) return;\n      const body = renderContent('body', 'default');\n      const headerContent = renderTNodeJSX('header');\n      const defaultFooter = getDefaultFooter();\n      return (\n        <div\n          ref={drawerEle}\n          class={drawerClasses.value}\n          style={{ zIndex: props.zIndex }}\n          onKeydown={onKeyDown}\n          v-transfer-dom={props.attach}\n          tabindex={0}\n        >\n          {props.showOverlay && <div class={`${COMPONENT_NAME.value}__mask`} onClick={handleWrapperClick} />}\n          <div class={wrapperClasses.value} style={wrapperStyles.value}>\n            {headerContent && <div class={`${COMPONENT_NAME.value}__header`}>{headerContent}</div>}\n            {props.closeBtn && (\n              <div class={`${COMPONENT_NAME.value}__close-btn`} onClick={handleCloseBtnClick}>\n                {renderTNodeJSX('closeBtn', <CloseIcon />)}\n              </div>\n            )}\n            <div class={[`${COMPONENT_NAME.value}__body`, 'narrow-scrollbar']}>{body}</div>\n            {props.footer && (\n              <div class={`${COMPONENT_NAME.value}__footer`}>{renderTNodeJSX('footer', defaultFooter)}</div>\n            )}\n            {props.sizeDraggable && <div style={draggableLineStyles.value} onMousedown={enableDrag}></div>}\n          </div>\n        </div>\n      );\n    };\n  },\n});\n"],"names":["defineComponent","name","directives","TransferDom","props","emits","setup","context","destroyOnCloseVisible","ref","isVisible","useConfig","globalConfig","useGlobalIcon","CloseIcon","TdCloseIcon","renderTNodeJSX","useTNodeJSX","renderContent","useContent","COMPONENT_NAME","usePrefixClass","LOCK_CLASS","useDrag","draggedSizeValue","enableDrag","draggableLineStyles","confirmBtnAction","e","onConfirm","cancelBtnAction","onCancel","closeDrawer","trigger","useAction","getConfirmBtn","getCancelBtn","drawerEle","drawerClasses","computed","value","placement","_defineProperty","showInAttachedElement","showOverlay","sizeValue","size","defaultSize","isNaN","Number","small","medium","large","wrapperStyles","transform","width","includes","height","wrapperClasses","parentNode","modeAndPlacement","mode","join","footerStyle","display","justifyContent","handlePushMode","nextTick","style","cssText","updatePushMode","marginStr","left","right","top","bottom","replace","getDefaultFooter","confirmBtn","globalConfirm","confirm","className","cancelBtn","globalCancel","cancel","_createVNode","watch","immediate","visible","isServer","preventScrollThrough","addClass","document","body","removeClass","destroyOnClose","setTimeout","handleCloseBtnClick","onCloseBtnClick","handleWrapperClick","onOverlayClick","closeOnOverlayClick","onKeyDown","closeOnEscKeydown","key","onEscKeydown","params","onClose","emit","onUpdated","headerContent","defaultFooter","_withDirectives","zIndex","closeBtn","footer","sizeDraggable","_resolveDirective","attach"],"mappings":"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"}