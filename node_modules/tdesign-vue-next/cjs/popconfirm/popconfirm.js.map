{"version":3,"file":"popconfirm.js","sources":["../../src/popconfirm/popconfirm.tsx"],"sourcesContent":["import { defineComponent, computed, toRefs } from 'vue';\nimport {\n  InfoCircleFilledIcon as TdInfoCircleFilledIcon,\n  ErrorCircleFilledIcon as TdErrorCircleFilledIcon,\n} from 'tdesign-icons-vue-next';\n\nimport { useConfig, usePrefixClass } from '../hooks/useConfig';\nimport { useGlobalIcon } from '../hooks/useGlobalIcon';\nimport Popup, { PopupProps, PopupVisibleChangeContext } from '../popup/index';\nimport props from './props';\nimport { PopconfirmVisibleChangeContext } from './type';\nimport { useAction } from '../dialog/hooks';\nimport { useContent, useTNodeJSX, useTNodeDefault } from '../hooks/tnode';\nimport useVModel from '../hooks/useVModel';\n\nexport default defineComponent({\n  name: 'TPopconfirm',\n  props,\n\n  setup(props) {\n    const { globalConfig } = useConfig('popconfirm');\n    const COMPONENT_NAME = usePrefixClass('popconfirm');\n    const { InfoCircleFilledIcon, ErrorCircleFilledIcon } = useGlobalIcon({\n      InfoCircleFilledIcon: TdInfoCircleFilledIcon,\n      ErrorCircleFilledIcon: TdErrorCircleFilledIcon,\n    });\n\n    const { visible, modelValue } = toRefs(props);\n    const [innerVisible, setInnerVisible] = useVModel(\n      visible,\n      modelValue,\n      props.defaultVisible,\n      props.onVisibleChange,\n      'visible',\n    );\n\n    const confirmBtnAction = (e: MouseEvent) => {\n      props.onConfirm?.({ e });\n      setInnerVisible(false, { e });\n    };\n\n    const cancelBtnAction = (e: MouseEvent) => {\n      props.onCancel?.({ e });\n      setInnerVisible(false, { e });\n    };\n\n    const { getConfirmBtn, getCancelBtn } = useAction({ confirmBtnAction, cancelBtnAction });\n\n    const renderTNodeJSX = useTNodeJSX();\n    const innerPopupProps = computed(() => {\n      return {\n        showArrow: props.showArrow,\n        overlayClassName: COMPONENT_NAME.value,\n        trigger: 'click' as PopupProps['trigger'],\n        destroyOnClose: props.destroyOnClose,\n        placement: props.placement,\n        ...(props.popupProps as PopupProps),\n      };\n    });\n\n    const renderTNodeDefault = useTNodeDefault();\n    const renderContent = () => {\n      const cancelBtn = getCancelBtn({\n        cancelBtn: props.cancelBtn,\n        globalCancel: globalConfig.value.cancel,\n        className: `${COMPONENT_NAME.value}__cancel`,\n        size: 'small',\n      });\n\n      const confirmBtn = getConfirmBtn({\n        theme: props.theme,\n        confirmBtn: props.confirmBtn,\n        globalConfirm: globalConfig.value.confirm,\n        globalConfirmBtnTheme: globalConfig.value.confirmBtnTheme,\n        className: `${COMPONENT_NAME.value}__confirm`,\n        size: 'small',\n      });\n\n      const renderIcon = () => {\n        const Icon = {\n          default: InfoCircleFilledIcon,\n          warning: ErrorCircleFilledIcon,\n          danger: ErrorCircleFilledIcon,\n        }[props.theme];\n        const theme = props.theme || 'default';\n        return renderTNodeDefault('icon', <Icon class={`${COMPONENT_NAME.value}__icon--${theme}`} />);\n      };\n\n      return (\n        <div class={`${COMPONENT_NAME.value}__content`}>\n          <div class={`${COMPONENT_NAME.value}__body`}>\n            {renderIcon()}\n            <div class={`${COMPONENT_NAME.value}__inner`}>{renderTNodeJSX('content')}</div>\n          </div>\n          {Boolean(cancelBtn || confirmBtn) && (\n            <div class={`${COMPONENT_NAME.value}__buttons`}>\n              {cancelBtn}\n              {confirmBtn}\n            </div>\n          )}\n        </div>\n      );\n    };\n\n    const onPopupVisibleChange = (val: boolean, context: PopupVisibleChangeContext) => {\n      setInnerVisible(val, context as PopconfirmVisibleChangeContext);\n    };\n\n    const renderTNodeContent = useContent();\n\n    return () => (\n      <Popup\n        visible={innerVisible.value}\n        {...innerPopupProps.value}\n        onVisibleChange={onPopupVisibleChange}\n        v-slots={{\n          content: renderContent,\n        }}\n      >\n        {renderTNodeContent('default', 'triggerElement')}\n      </Popup>\n    );\n  },\n});\n"],"names":["defineComponent","name","props","setup","useConfig","globalConfig","COMPONENT_NAME","usePrefixClass","useGlobalIcon","InfoCircleFilledIcon","TdInfoCircleFilledIcon","ErrorCircleFilledIcon","TdErrorCircleFilledIcon","toRefs","visible","modelValue","useVModel","defaultVisible","onVisibleChange","_slicedToArray","innerVisible","setInnerVisible","confirmBtnAction","e","onConfirm","cancelBtnAction","onCancel","useAction","getConfirmBtn","getCancelBtn","renderTNodeJSX","useTNodeJSX","innerPopupProps","computed","showArrow","overlayClassName","value","trigger","destroyOnClose","placement","popupProps","renderTNodeDefault","useTNodeDefault","renderContent","cancelBtn","globalCancel","cancel","className","size","confirmBtn","theme","globalConfirm","confirm","globalConfirmBtnTheme","confirmBtnTheme","renderIcon","Icon","warning","danger","_createVNode","Boolean","onPopupVisibleChange","val","context","renderTNodeContent","useContent","Popup","_mergeProps","content"],"mappings":"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"}