{"version":3,"file":"pagination.js","sources":["../../src/pagination/pagination.tsx"],"sourcesContent":["import { defineComponent, computed, ref, watch, toRefs } from 'vue';\nimport isNaN from 'lodash/isNaN';\nimport {\n  PageFirstIcon as TdPageFirstIcon,\n  PageLastIcon as TdPageLastIcon,\n  ChevronLeftIcon as TdChevronLeftIcon,\n  ChevronRightIcon as TdChevronRightIcon,\n  ChevronLeftDoubleIcon as TdChevronLeftDoubleIcon,\n  ChevronRightDoubleIcon as TdChevronRightDoubleIcon,\n  EllipsisIcon as TdEllipsisIcon,\n} from 'tdesign-icons-vue-next';\n\nimport { TdPaginationProps } from '../pagination/type';\nimport { useConfig, usePrefixClass } from '../hooks/useConfig';\nimport { useGlobalIcon } from '../hooks/useGlobalIcon';\nimport TInputNumber from '../input-number';\nimport { Option, Select } from '../select';\nimport TInputAdornment from '../input-adornment';\nimport props from './props';\nimport usePaginationClasses from './usePaginationClasses';\nimport useMoreAction from './useMoreAction';\nimport useVModel from '../hooks/useVModel';\nimport useDefaultValue from '../hooks/useDefaultValue';\nimport { useTNodeJSX } from '../hooks/tnode';\n\nconst min = 1;\n\nexport default defineComponent({\n  name: 'TPagination',\n  props,\n\n  setup(props) {\n    const { modelValue, pageSize, current } = toRefs(props);\n    const renderTNodeJSX = useTNodeJSX();\n    const [innerCurrent, setInnerCurrent] = useVModel(\n      current,\n      modelValue,\n      props.defaultCurrent,\n      props.onCurrentChange,\n      'current',\n    );\n\n    const [innerPageSize, setInnerPageSize] = useDefaultValue(\n      pageSize,\n      props.defaultPageSize,\n      props.onPageSizeChange,\n      'pageSize',\n    );\n\n    const { t, globalConfig } = useConfig('pagination');\n    const COMPONENT_NAME = usePrefixClass('pagination');\n    const {\n      PageFirstIcon,\n      PageLastIcon,\n      ChevronLeftIcon,\n      ChevronRightIcon,\n      ChevronLeftDoubleIcon,\n      ChevronRightDoubleIcon,\n      EllipsisIcon,\n    } = useGlobalIcon({\n      PageFirstIcon: TdPageFirstIcon,\n      PageLastIcon: TdPageLastIcon,\n      ChevronLeftIcon: TdChevronLeftIcon,\n      ChevronRightIcon: TdChevronRightIcon,\n      ChevronLeftDoubleIcon: TdChevronLeftDoubleIcon,\n      ChevronRightDoubleIcon: TdChevronRightDoubleIcon,\n      EllipsisIcon: TdEllipsisIcon,\n    });\n\n    const { pageCount, ...CLASS_MAP } = usePaginationClasses(props, innerCurrent, innerPageSize, COMPONENT_NAME);\n\n    const { prevMore, isPrevMoreShow, curPageLeftCount, nextMore, isNextMoreShow, curPageRightCount } = useMoreAction(\n      props,\n      pageCount,\n      innerCurrent,\n    );\n\n    const jumpIndex = ref(innerCurrent.value);\n\n    const isFolded = computed(() => pageCount.value > props.maxPageBtn);\n\n    const pageCountOption = computed<Array<{ label: string; value: number }>>(() => {\n      const ans = [];\n      for (let i = 1; i <= pageCount.value; i++) {\n        ans.push({ value: i, label: `${i}/${pageCount.value}` });\n      }\n      return ans;\n    });\n\n    const sizeOptions = computed<Array<{ label: string; value: number }>>(() => {\n      const pageSizeOptions = props.pageSizeOptions as TdPaginationProps['pageSizeOptions'];\n      const options = pageSizeOptions.map((option) =>\n        typeof option === 'object'\n          ? option\n          : {\n              label: t(globalConfig.value.itemsPerPage, { size: option }),\n              value: Number(option),\n            },\n      );\n      return options.sort((a, b) => a.value - b.value);\n    });\n\n    const isMidEllipsis = computed(() => {\n      return props.pageEllipsisMode === 'mid';\n    });\n\n    const pages = computed(() => {\n      const array = [];\n      let start;\n      let end;\n\n      if (isFolded.value) {\n        if (isPrevMoreShow.value && isNextMoreShow.value) {\n          start = innerCurrent.value - curPageLeftCount.value;\n          end = innerCurrent.value + curPageRightCount.value;\n        } else {\n          const foldedStart = isMidEllipsis.value ? 2 : 1;\n          const foldedEnd = isMidEllipsis.value ? pageCount.value - 1 : pageCount.value;\n          start = isPrevMoreShow.value ? pageCount.value - props.foldedMaxPageBtn + 1 : foldedStart;\n          end = isPrevMoreShow.value ? foldedEnd : props.foldedMaxPageBtn;\n        }\n      } else {\n        start = 1;\n        end = pageCount.value;\n      }\n\n      for (let i = start; i <= end; i++) {\n        array.push(i);\n      }\n      return array;\n    });\n\n    // 如果页面总数发生变化并当前页数大于总页数则重置为1\n    watch(\n      () => pageCount.value,\n      () => {\n        if (innerCurrent.value > pageCount.value) innerCurrent.value = 1;\n      },\n    );\n    watch(\n      () => innerCurrent.value,\n      (val) => (jumpIndex.value = val),\n    );\n\n    const toPage: (pageIndex: number, isTriggerChange?: boolean) => void = (pageIndex, isTriggerChange) => {\n      if (props.disabled) {\n        return;\n      }\n      let current = pageIndex;\n      if (pageIndex < min) {\n        current = min;\n      } else if (pageIndex > pageCount.value) {\n        current = pageCount.value;\n      }\n      if (innerCurrent.value !== current) {\n        const prev = innerCurrent.value;\n        const pageInfo = {\n          current,\n          previous: prev,\n          pageSize: innerPageSize.value,\n        };\n        if (isTriggerChange !== false) {\n          props.onChange?.(pageInfo);\n        }\n        setInnerCurrent(current, pageInfo);\n      }\n    };\n\n    const handlePageChange = (type: string) => {\n      const pageChangeMap = {\n        prevPage: () => toPage(innerCurrent.value - 1),\n        nextPage: () => toPage(innerCurrent.value + 1),\n        prevMorePage: () => toPage(innerCurrent.value - props.foldedMaxPageBtn),\n        nextMorePage: () => toPage(innerCurrent.value + props.foldedMaxPageBtn),\n      };\n\n      pageChangeMap[type]();\n    };\n\n    const onSelectorChange: (e: string) => void = (e) => {\n      if (props.disabled) {\n        return;\n      }\n      const pageSize: number = parseInt(e, 10);\n      let pageCount = 1;\n      if (pageSize > 0) {\n        pageCount = Math.ceil(props.total / pageSize);\n      }\n\n      let isIndexChange = false;\n\n      if (innerCurrent.value > pageCount) {\n        isIndexChange = true;\n      }\n\n      /**\n       * 分页大小变化事件\n       * @param {Number} pageSize 分页大小\n       * @param {Number} index 当前页\n       */\n      const pageInfo = {\n        current: isIndexChange ? pageCount : innerCurrent.value,\n        previous: innerCurrent.value,\n        pageSize,\n      };\n      props.onChange?.(pageInfo);\n      setInnerPageSize(pageSize, pageInfo);\n      if (isIndexChange) {\n        toPage(pageCount, false);\n      }\n    };\n\n    const onJumperChange = (val: number) => {\n      const currentIndex = Math.trunc(+val);\n      if (isNaN(currentIndex)) return;\n      jumpIndex.value = currentIndex;\n      toPage(currentIndex);\n    };\n\n    return () => {\n      const { total, pageSizeOptions, size, disabled, showPageSize } = props;\n      if (pageCount.value < 1) return null;\n\n      const Jumper = (\n        <div class={CLASS_MAP.jumperClass.value}>\n          {t(globalConfig.value.jumpTo)}\n          <TInputAdornment append={`/ ${pageCount.value} ${t(globalConfig.value.page)}`}>\n            <TInputNumber\n              class={CLASS_MAP.jumperInputClass.value}\n              v-model={jumpIndex.value}\n              onBlur={onJumperChange}\n              onEnter={onJumperChange}\n              max={pageCount.value}\n              min={min}\n              size={size}\n              disabled={disabled}\n              theme=\"normal\"\n              placeholder=\"\"\n            />\n          </TInputAdornment>\n        </div>\n      );\n\n      return (\n        <div class={CLASS_MAP.paginationClass.value}>\n          {/* 数据统计区 */}\n          {renderTNodeJSX(\n            'totalContent',\n            <div class={CLASS_MAP.totalClass.value}>{t(globalConfig.value.total, { total })}</div>,\n          )}\n\n          {/* 分页器 */}\n          {showPageSize && pageSizeOptions.length > 0 && (\n            <Select\n              size={size}\n              value={innerPageSize}\n              disabled={disabled}\n              class={CLASS_MAP.sizerClass.value}\n              autoWidth={true}\n              onChange={onSelectorChange}\n            >\n              {sizeOptions.value.map((item, index) => (\n                <Option value={item.value} label={item.label} key={index} />\n              ))}\n            </Select>\n          )}\n          {/* 首页按钮 */}\n          {props.showFirstAndLastPageBtn ? (\n            <div\n              class={CLASS_MAP.preBtnClass.value}\n              onClick={() => toPage(1)}\n              disabled={props.disabled || props.current === min}\n            >\n              <PageFirstIcon />\n            </div>\n          ) : null}\n          {/* 向前按钮 */}\n          {props.showPreviousAndNextBtn ? (\n            <div\n              class={CLASS_MAP.preBtnClass.value}\n              onClick={() => handlePageChange('prevPage')}\n              disabled={disabled || innerCurrent.value === min}\n            >\n              <ChevronLeftIcon />\n            </div>\n          ) : null}\n          {/* 常规版 */}\n          {props.showPageNumber && props.theme === 'default' ? (\n            <ul class={CLASS_MAP.btnWrapClass.value}>\n              {isFolded.value && isMidEllipsis.value && (\n                <li class={CLASS_MAP.getButtonClass(1)} onClick={() => toPage(min)}>\n                  {min}\n                </li>\n              )}\n              {isFolded.value && isPrevMoreShow.value && isMidEllipsis.value ? (\n                <li\n                  class={CLASS_MAP.btnMoreClass.value}\n                  onClick={() => handlePageChange('prevMorePage')}\n                  onMouseOver={() => (prevMore.value = true)}\n                  onMouseOut={() => (prevMore.value = false)}\n                >\n                  {prevMore.value ? <ChevronLeftDoubleIcon /> : <EllipsisIcon />}\n                </li>\n              ) : null}\n              {pages.value.map((i) => (\n                <li class={CLASS_MAP.getButtonClass(i)} key={i} onClick={() => toPage(i)}>\n                  {i}\n                </li>\n              ))}\n              {isFolded.value && isNextMoreShow.value && isMidEllipsis.value ? (\n                <li\n                  class={CLASS_MAP.btnMoreClass.value}\n                  onClick={() => handlePageChange('nextMorePage')}\n                  onMouseOver={() => (nextMore.value = true)}\n                  onMouseOut={() => (nextMore.value = false)}\n                >\n                  {nextMore.value ? <ChevronRightDoubleIcon /> : <EllipsisIcon />}\n                </li>\n              ) : null}\n              {isFolded.value && isMidEllipsis.value ? (\n                <li class={CLASS_MAP.getButtonClass(pageCount.value)} onClick={() => toPage(pageCount.value)}>\n                  {pageCount.value}\n                </li>\n              ) : null}\n            </ul>\n          ) : null}\n          {/* 极简版 */}\n          {props.theme === 'simple' && Jumper}\n          {/* 向后按钮 */}\n          {props.showPreviousAndNextBtn ? (\n            <div\n              class={CLASS_MAP.nextBtnClass.value}\n              onClick={() => handlePageChange('nextPage')}\n              disabled={disabled || innerCurrent.value === pageCount.value}\n            >\n              <ChevronRightIcon />\n            </div>\n          ) : null}\n          {/* 尾页按钮 */}\n          {props.showFirstAndLastPageBtn ? (\n            <div\n              class={CLASS_MAP.nextBtnClass.value}\n              onClick={() => toPage(pageCount.value)}\n              disabled={disabled || innerCurrent.value === pageCount.value}\n            >\n              <PageLastIcon />\n            </div>\n          ) : null}\n          {/* 快速跳转 */}\n          {props.theme === 'default' && props.showJumper && Jumper}\n        </div>\n      );\n    };\n  },\n});\n"],"names":["min","defineComponent","name","props","setup","toRefs","modelValue","pageSize","current","renderTNodeJSX","useTNodeJSX","useVModel","defaultCurrent","onCurrentChange","_slicedToArray","innerCurrent","setInnerCurrent","useDefaultValue","defaultPageSize","onPageSizeChange","innerPageSize","setInnerPageSize","useConfig","t","globalConfig","COMPONENT_NAME","usePrefixClass","useGlobalIcon","PageFirstIcon","TdPageFirstIcon","PageLastIcon","TdPageLastIcon","ChevronLeftIcon","TdChevronLeftIcon","ChevronRightIcon","TdChevronRightIcon","ChevronLeftDoubleIcon","TdChevronLeftDoubleIcon","ChevronRightDoubleIcon","TdChevronRightDoubleIcon","EllipsisIcon","TdEllipsisIcon","usePaginationClasses","pageCount","CLASS_MAP","_objectWithoutProperties","useMoreAction","prevMore","isPrevMoreShow","curPageLeftCount","nextMore","isNextMoreShow","curPageRightCount","jumpIndex","ref","value","isFolded","computed","maxPageBtn","ans","i","push","label","sizeOptions","pageSizeOptions","options","map","option","_typeof","itemsPerPage","size","Number","sort","a","b","isMidEllipsis","pageEllipsisMode","pages","array","start","end","foldedStart","foldedEnd","foldedMaxPageBtn","watch","val","toPage","pageIndex","isTriggerChange","disabled","prev","pageInfo","previous","onChange","handlePageChange","type","pageChangeMap","prevPage","nextPage","prevMorePage","nextMorePage","onSelectorChange","e","parseInt","Math","ceil","total","isIndexChange","onJumperChange","currentIndex","trunc","isNaN","showPageSize","Jumper","_createVNode","jumperClass","jumpTo","TInputAdornment","page","TInputNumber","jumperInputClass","paginationClass","totalClass","length","Select","sizerClass","item","index","Option","showFirstAndLastPageBtn","preBtnClass","showPreviousAndNextBtn","showPageNumber","theme","btnWrapClass","getButtonClass","btnMoreClass","nextBtnClass","showJumper"],"mappings":"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"}