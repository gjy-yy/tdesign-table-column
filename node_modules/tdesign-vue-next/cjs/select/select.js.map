{"version":3,"file":"select.js","sources":["../../src/select/select.tsx"],"sourcesContent":["import { defineComponent, provide, computed, toRefs, watch, ref, nextTick } from 'vue';\nimport picker from 'lodash/pick';\nimport isArray from 'lodash/isArray';\nimport isFunction from 'lodash/isFunction';\nimport debounce from 'lodash/debounce';\nimport cloneDeep from 'lodash/cloneDeep';\nimport get from 'lodash/get';\n\nimport { intersection } from 'lodash';\nimport FakeArrow from '../common-components/fake-arrow';\nimport SelectInput from '../select-input';\nimport SelectPanel from './select-panel';\n\nimport props from './props';\nimport { TdSelectProps, SelectValue } from './type';\nimport { PopupVisibleChangeContext } from '../popup';\n\n// hooks\nimport { useFormDisabled } from '../form/hooks';\nimport useDefaultValue from '../hooks/useDefaultValue';\nimport useVModel from '../hooks/useVModel';\nimport { useTNodeJSX } from '../hooks/tnode';\nimport { useConfig, usePrefixClass } from '../hooks/useConfig';\nimport { selectInjectKey, getSingleContent, getMultipleContent, getNewMultipleValue } from './helper';\nimport { useSelectOptions } from './hooks/useSelectOptions';\n\nexport default defineComponent({\n  name: 'TSelect',\n  props: { ...props },\n  setup(props: TdSelectProps, { slots, expose, ...res }) {\n    const classPrefix = usePrefixClass();\n    const disabled = useFormDisabled();\n    const renderTNodeJSX = useTNodeJSX();\n    const COMPONENT_NAME = usePrefixClass('select');\n    const { globalConfig, t } = useConfig('select');\n    const { popupVisible, inputValue, modelValue, value } = toRefs(props);\n    const [orgValue, setOrgValue] = useVModel(value, modelValue, props.defaultValue, props.onChange);\n    const selectPanelRef = ref(null);\n    const selectInputRef = ref(null);\n    const keys = computed(() => ({\n      label: props.keys?.label || 'label',\n      value: props.keys?.value || 'value',\n    }));\n    const { options, optionsMap, optionsList } = useSelectOptions(props, keys);\n\n    // 内部数据,格式化过的\n    const innerValue = computed(() => {\n      if (props.valueType === 'object') {\n        return !props.multiple\n          ? orgValue.value[keys.value.value]\n          : (orgValue.value as SelectValue[]).map((option) => option[keys.value.value]);\n      }\n      return orgValue.value;\n    });\n    const setInnerValue: TdSelectProps['onChange'] = (newVal: SelectValue | SelectValue[], e) => {\n      if (props.valueType === 'object') {\n        const { value, label } = keys.value;\n        const getOption = (val: SelectValue) => {\n          const option = optionsMap.value.get(val);\n          return {\n            [value]: get(option, value),\n            [label]: get(option, label),\n          };\n        };\n        newVal = props.multiple ? (newVal as SelectValue[]).map((val) => getOption(val)) : getOption(newVal);\n      }\n      if (newVal === orgValue.value) return;\n      setOrgValue(newVal, { selectedOptions: getSelectedOptions(newVal), trigger: e.trigger, e: e.e });\n    };\n\n    const [innerInputValue, setInputValue] = useDefaultValue(\n      inputValue,\n      props.defaultInputValue,\n      props.onInputChange,\n      'inputValue',\n    );\n    const [innerPopupVisible, setInnerPopupVisible] = useDefaultValue(\n      popupVisible,\n      false,\n      (visible: boolean, context: PopupVisibleChangeContext) => {\n        props.onPopupVisibleChange?.(visible, context);\n        props.onVisibleChange?.(visible);\n      },\n      'popupVisible',\n    );\n\n    const placeholderText = computed(\n      () =>\n        ((!props.multiple && innerPopupVisible.value && getSingleContent(innerValue.value, optionsList.value)) ||\n          props.placeholder) ??\n        t(globalConfig.value.placeholder),\n    );\n\n    // selectInput 展示值\n    const displayText = computed(() =>\n      props.multiple\n        ? getMultipleContent(innerValue.value as SelectValue[], optionsList.value)\n        : getSingleContent(innerValue.value, optionsList.value),\n    );\n\n    // valueDisplayParams参数\n    const valueDisplayParams = computed(() => {\n      return props.multiple && isArray(innerValue.value)\n        ? (innerValue.value as SelectValue[]).map((value) => ({\n            value,\n            label: optionsMap.value.get(value)?.label,\n          }))\n        : innerValue.value;\n    });\n\n    const isFilterable = computed(() => {\n      return Boolean(props.filterable || globalConfig.value.filterable || isFunction(props.filter));\n    });\n\n    // 移除tag\n    const removeTag = (index: number, e?: MouseEvent) => {\n      e && e.stopPropagation();\n      const selectValue = cloneDeep(innerValue.value) as SelectValue[];\n      const value = selectValue[index];\n      selectValue.splice(index, 1);\n      setInnerValue(selectValue, { selectedOptions: getSelectedOptions(selectValue), trigger: 'tag-remove', e });\n      props.onRemove?.({\n        value: value as string | number,\n        data: optionsMap.value.get(value),\n        e,\n      });\n    };\n\n    const handleCreate = () => {\n      if (!innerInputValue.value) return;\n      props.onCreate?.(innerInputValue.value);\n      setInputValue('');\n    };\n\n    // 键盘操作逻辑\n    const hoverIndex = ref(-1);\n    const handleKeyDown = (e: KeyboardEvent) => {\n      const optionsListLength = optionsList.value.length;\n      let newIndex = hoverIndex.value;\n      switch (e.code) {\n        case 'ArrowUp':\n          e.preventDefault();\n          if (hoverIndex.value === -1) {\n            newIndex = 0;\n          } else if (hoverIndex.value === 0) {\n            newIndex = optionsListLength - 1;\n          } else {\n            newIndex--;\n          }\n          if (optionsList.value[newIndex]?.disabled) {\n            newIndex--;\n          }\n          hoverIndex.value = newIndex;\n          break;\n        case 'ArrowDown':\n          e.preventDefault();\n          if (hoverIndex.value === -1 || hoverIndex.value === optionsListLength - 1) {\n            newIndex = 0;\n          } else {\n            newIndex++;\n          }\n          if (optionsList.value[newIndex]?.disabled) {\n            newIndex++;\n          }\n          hoverIndex.value = newIndex;\n          break;\n        case 'Enter':\n          if (hoverIndex.value === -1) break;\n          if (!innerPopupVisible.value) {\n            setInnerPopupVisible(true, { e });\n            break;\n          }\n          if (!props.multiple) {\n            setInnerValue(optionsList.value[hoverIndex.value].value, {\n              selectedOptions: getSelectedOptions(optionsList.value[hoverIndex.value].value),\n              trigger: 'check',\n              e,\n            });\n            setInnerPopupVisible(false, { e });\n          } else {\n            if (hoverIndex.value === -1) return;\n            const optionValue = optionsList.value[hoverIndex.value]?.value;\n            if (!optionValue) return;\n            const newValue = getNewMultipleValue(innerValue.value, optionValue);\n            setInnerValue(newValue.value, {\n              selectedOptions: getSelectedOptions(newValue.value),\n              trigger: newValue.isCheck ? 'check' : 'uncheck',\n              e,\n            });\n          }\n          break;\n        case 'Escape':\n          setInnerPopupVisible(false, { e });\n          break;\n      }\n    };\n\n    const popupContentRef = computed(() => selectInputRef.value?.selectInputRef.getOverlay() as HTMLElement);\n\n    /**\n     * 可选选项的列表\n     * 排除已禁用和全选的选项\n     */\n    const optionalList = computed(() =>\n      optionsList.value.filter((item) => {\n        return !item.disabled && !item['check-all'] && !item.checkAll;\n      }),\n    );\n\n    const getSelectedOptions = (selectValue: SelectValue[] | SelectValue = innerValue.value) => {\n      return optionsList.value.filter((option) => {\n        if (option.checkAll) return;\n        if (Array.isArray(selectValue)) return selectValue.includes(option.value);\n        return selectValue === option.value;\n      });\n    };\n\n    const onCheckAllChange = (checked: boolean) => {\n      if (!props.multiple) return;\n      const value = checked ? optionalList.value.map((option) => option.value) : [];\n      setInnerValue(value, { selectedOptions: getSelectedOptions(value), trigger: checked ? 'check' : 'clear' });\n    };\n\n    // 已选的长度\n    const intersectionLen = computed<number>(() => {\n      const values = optionalList.value.map((item) => item.value);\n      const n = intersection(innerValue.value, values);\n      return n.length;\n    });\n\n    // 全选\n    const isCheckAll = computed<boolean>(() => {\n      return intersectionLen.value === optionalList.value.length;\n    });\n\n    // 半选\n    const indeterminate = computed<boolean>(() => !isCheckAll.value && intersectionLen.value !== 0);\n\n    const SelectProvide = computed(() => ({\n      max: props.max,\n      multiple: props.multiple,\n      hoverIndex: hoverIndex.value,\n      selectValue: innerValue.value,\n      reserveKeyword: props.reserveKeyword,\n      handleValueChange: setInnerValue,\n      handlerInputChange: setInputValue,\n      handlePopupVisibleChange: setInnerPopupVisible,\n      handleCreate,\n      size: props.size,\n      popupContentRef,\n      indeterminate: indeterminate.value,\n      isCheckAll: isCheckAll.value,\n      onCheckAllChange,\n      getSelectedOptions,\n    }));\n\n    provide(selectInjectKey, SelectProvide);\n\n    const checkValueInvalid = () => {\n      // 参数类型检测与修复\n      if (!props.multiple && isArray(orgValue.value)) {\n        setOrgValue('');\n      }\n      if (props.multiple && !isArray(orgValue.value)) {\n        setOrgValue([]);\n      }\n    };\n    const handleSearch = debounce((value: string) => {\n      props.onSearch?.(`${value}`);\n    }, 300);\n\n    watch(\n      orgValue,\n      () => {\n        checkValueInvalid();\n      },\n      {\n        immediate: true,\n      },\n    );\n    watch(\n      () => props.multiple,\n      () => {\n        checkValueInvalid();\n      },\n    );\n    watch(innerPopupVisible, (value) => {\n      if (value) {\n        hoverIndex.value = -1;\n      }\n    });\n\n    // 列表展开时定位置选中项\n    const updateScrollTop = (content: HTMLDivElement) => {\n      if (!selectPanelRef.value) {\n        return;\n      }\n      const firstSelectedNode: HTMLDivElement = (selectPanelRef.value?.innerRef as HTMLDivElement)?.querySelector(\n        `.${classPrefix.value}-is-selected`,\n      );\n      // 此处需要等待渲染后进行计算\n      nextTick(() => {\n        if (firstSelectedNode && content) {\n          const { paddingBottom } = getComputedStyle(firstSelectedNode);\n          const { marginBottom } = getComputedStyle(content);\n          const elementBottomHeight = parseInt(paddingBottom, 10) + parseInt(marginBottom, 10);\n          // 小于0时不需要特殊处理，会被设为0\n          const updateValue =\n            firstSelectedNode.offsetTop -\n            content.offsetTop -\n            (content.clientHeight - firstSelectedNode.clientHeight) +\n            elementBottomHeight;\n          // eslint-disable-next-line no-param-reassign\n          content.scrollTop = updateValue;\n        }\n      });\n    };\n    provide('updateScrollTop', updateScrollTop);\n\n    return () => {\n      const { overlayClassName, ...restPopupProps } = (props.popupProps || {}) as TdSelectProps['popupProps'];\n      return (\n        <div class={`${COMPONENT_NAME.value}__wrap`}>\n          <SelectInput\n            {...{\n              autoWidth: props.autoWidth,\n              readonly: props.readonly,\n              borderless: props.borderless || !props.bordered,\n              multiple: props.multiple,\n              clearable: props.clearable,\n              loading: props.loading,\n              status: props.status,\n              tips: props.tips,\n              minCollapsedNum: props.minCollapsedNum,\n            }}\n            ref={selectInputRef}\n            class={COMPONENT_NAME.value}\n            value={displayText.value}\n            disabled={disabled.value}\n            popupVisible={innerPopupVisible.value}\n            inputValue={innerPopupVisible.value ? innerInputValue.value : ''}\n            placeholder={`${placeholderText.value}`}\n            allowInput={isFilterable.value}\n            collapsed-items={props.collapsedItems}\n            inputProps={{\n              size: props.size,\n              ...(props.inputProps as TdSelectProps['inputProps']),\n              onkeydown: handleKeyDown,\n            }}\n            tagInputProps={{\n              size: props.size,\n              ...(props.tagInputProps as TdSelectProps['tagInputProps']),\n            }}\n            onTagChange={(val, ctx) => {\n              removeTag(ctx.index);\n            }}\n            tagProps={{ ...(props.tagProps as TdSelectProps['tagProps']) }}\n            popupProps={{\n              overlayClassName: [`${COMPONENT_NAME.value}__dropdown`, overlayClassName],\n              ...restPopupProps,\n            }}\n            label={() => renderTNodeJSX('prefixIcon')}\n            suffixIcon={() =>\n              props.showArrow && (\n                <FakeArrow\n                  overlayClassName={`${COMPONENT_NAME.value}__right-icon`}\n                  isActive={innerPopupVisible.value}\n                />\n              )\n            }\n            valueDisplay={() =>\n              renderTNodeJSX('valueDisplay', {\n                params: { value: valueDisplayParams.value, onClose: (index: number) => removeTag(index) },\n              })\n            }\n            onPopupVisibleChange={(val: boolean, context) => {\n              setInnerPopupVisible(val, context);\n            }}\n            onInputChange={(value) => {\n              if (!innerPopupVisible.value) return;\n              setInputValue(value);\n              handleSearch(`${value}`);\n            }}\n            onClear={({ e }) => {\n              setInnerValue(props.multiple ? [] : '', {\n                selectedOptions: getSelectedOptions(props.multiple ? [] : ''),\n                trigger: 'clear',\n                e,\n              });\n              props.onClear?.({ e });\n            }}\n            onEnter={(inputValue, { e }) => {\n              props.onEnter?.({ inputValue: `${innerInputValue.value}`, e, value: innerValue.value });\n              handleCreate();\n            }}\n            onBlur={(inputValue, { e }) => {\n              props.onBlur?.({ e, value: innerValue.value });\n            }}\n            onFocus={(inputValue, { e }) => {\n              props.onFocus?.({ e, value: innerValue.value });\n            }}\n            {...(props.selectInputProps as TdSelectProps['selectInputProps'])}\n            v-slots={{\n              panel: () => (\n                <SelectPanel\n                  ref={selectPanelRef}\n                  {...picker(props, [\n                    'size',\n                    'multiple',\n                    'empty',\n                    'loading',\n                    'loadingText',\n                    'filterable',\n                    'creatable',\n                    'panelTopContent',\n                    'panelBottomContent',\n                    'filter',\n                    'scroll',\n                  ])}\n                  options={options.value}\n                  inputValue={innerInputValue.value}\n                  v-slots={slots}\n                />\n              ),\n              collapsedItems: slots.collapsedItems,\n            }}\n          />\n        </div>\n      );\n    };\n  },\n});\n"],"names":["defineComponent","name","props","setup","slots","expose","_objectWithoutProperties","classPrefix","usePrefixClass","disabled","useFormDisabled","renderTNodeJSX","useTNodeJSX","COMPONENT_NAME","useConfig","globalConfig","t","toRefs","popupVisible","inputValue","modelValue","value","useVModel","defaultValue","onChange","_slicedToArray","orgValue","setOrgValue","selectPanelRef","ref","selectInputRef","keys","computed","label","useSelectOptions","options","optionsMap","optionsList","innerValue","valueType","multiple","map","option","setInnerValue","newVal","e","getOption","val","get","_defineProperty","selectedOptions","getSelectedOptions","trigger","useDefaultValue","defaultInputValue","onInputChange","innerInputValue","setInputValue","visible","context","onPopupVisibleChange","onVisibleChange","innerPopupVisible","setInnerPopupVisible","placeholderText","getSingleContent","placeholder","displayText","getMultipleContent","valueDisplayParams","isArray","isFilterable","Boolean","filterable","isFunction","filter","removeTag","index","stopPropagation","selectValue","cloneDeep","splice","onRemove","data","handleCreate","onCreate","hoverIndex","handleKeyDown","optionsListLength","length","newIndex","code","preventDefault","optionValue","newValue","getNewMultipleValue","isCheck","popupContentRef","getOverlay","optionalList","item","checkAll","Array","includes","onCheckAllChange","checked","intersectionLen","values","n","intersection","isCheckAll","indeterminate","SelectProvide","max","reserveKeyword","handleValueChange","handlerInputChange","handlePopupVisibleChange","size","provide","selectInjectKey","checkValueInvalid","handleSearch","debounce","onSearch","watch","immediate","updateScrollTop","content","firstSelectedNode","innerRef","querySelector","nextTick","getComputedStyle","paddingBottom","marginBottom","elementBottomHeight","parseInt","updateValue","offsetTop","clientHeight","scrollTop","popupProps","overlayClassName","restPopupProps","_createVNode","SelectInput","_mergeProps","autoWidth","readonly","borderless","bordered","clearable","loading","status","tips","minCollapsedNum","collapsedItems","inputProps","onkeydown","tagInputProps","ctx","tagProps","showArrow","params","onClose","onClear","onEnter","onBlur","onFocus","selectInputProps","panel","SelectPanel","picker"],"mappings":"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"}