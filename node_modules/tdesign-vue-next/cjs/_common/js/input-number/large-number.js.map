{"version":3,"file":"large-number.js","sources":["../../../../src/_common/js/input-number/large-number.ts"],"sourcesContent":["import log from '../log/log';\n\nexport function fillZero(length: number) {\n  return new Array(length).fill(0).join('');\n}\n\n/**\n * 大数，是否是一个数字，数字字符包括 - . e [0-9]\n */\nexport function isInputNumber(num: number | string): boolean {\n  if (!num) return true;\n  if (typeof num === 'number') return Number.isNaN(num);\n  const r = /^[0-9|e|E|-]+\\.*[0-9|e|E|-]*$/.test(num);\n  if (!r) return false;\n  // only allow one [.e] and two [-]\n  let eCount = 0;\n  let negativeCount = 0;\n  let dotCount = 0;\n  for (let i = 0, len = num.length; i < len; i++) {\n    if (num[i] === '.') {\n      dotCount += 1;\n      if (dotCount > 1) return false;\n    }\n    if (/(e|E)+/.test(num[i])) {\n      eCount += 1;\n      if (eCount > 1) return false;\n    }\n    if (num[i] === '-') {\n      negativeCount += 1;\n      if (negativeCount > 2) return false;\n    }\n  }\n  return true;\n}\n\n// 整数，去除前面的无效 0（本身是 0 除外）；小数去除末尾的无效 0\nexport function removeInvalidZero(num: string, decimal = false) {\n  if (num.indexOf('.') !== -1) {\n    log.error('InputNumber', 'num is not a integer number.');\n    return num;\n  }\n  if (!num || (num === '0' && decimal)) return '';\n  if (num === '0') return num;\n  return (decimal ? num.replace(/0+$/, '') : num.replace(/^0+/, '')) || '0';\n}\n\n/**\n * 大数加法，仅支持正整数（没有精度问题）\n * @param num1 被加数\n * @param num2 加数\n */\nexport function largeIntNumberAdd(num1: string, num2: string, decimal = false): string {\n  const number1 = removeInvalidZero(num1, decimal);\n  const number2 = removeInvalidZero(num2, decimal);\n  const isFirstLarger = number1.length > number2.length;\n  const maxNumber = isFirstLarger ? number1 : number2;\n  const minNumber = isFirstLarger ? number2 : number1;\n  const newNumber: string[] = [];\n  const step = [];\n  const diff = decimal ? 0 : maxNumber.length - minNumber.length;\n  const len = decimal ? minNumber.length : maxNumber.length;\n  for (let i = len - 1; i >= 0; i--) {\n    const minIndex = i - diff;\n    // 第一个数，加第二个数，加进位\n    const count = Number(maxNumber[i]) + (Number(minNumber[minIndex]) || 0) + (step[i] || 0);\n    if (count >= 10) {\n      step[i - 1] = 1;\n    }\n    newNumber.unshift(String(count % 10));\n  }\n  // 999 + 1 = 1000，之类的进位\n  if (step[-1]) {\n    newNumber.unshift('1');\n  }\n  if (decimal) {\n    return newNumber.concat(maxNumber.slice(len, maxNumber.length)).join('');\n  }\n  return newNumber.join('');\n}\n\n/**\n * 大数加法，支持小数和整数（没有精度问题）\n * @param num1 被加数\n * @param num2 加数\n */\nexport function largePositiveNumberAdd(num1: string, num2: string): string {\n  const [intNumber1 = '0', decimalNumber1 = '0'] = num1.split('.');\n  const [intNumber2 = '0', decimalNumber2 = '0'] = num2.split('.');\n  const integerSum = largeIntNumberAdd(intNumber1, intNumber2);\n  // 如果不存在小数，则直接返回整数相加结果\n  if (decimalNumber1 === '0' && decimalNumber2 === '0') return integerSum;\n  const newDecimalNumber1 = removeInvalidZero(decimalNumber1, true);\n  const newDecimalNumber2 = removeInvalidZero(decimalNumber2, true);\n  // 小数点相加\n  const decimalNumberSum = largeIntNumberAdd(newDecimalNumber1, newDecimalNumber2, true);\n  // 组合整数部分和小数部分\n  const decimalLength = decimalNumberSum.length;\n  // 如果小数相加进位\n  if (decimalLength > newDecimalNumber1.length && decimalLength > newDecimalNumber2.length) {\n    return [\n      removeInvalidZero(largeIntNumberAdd(integerSum, '1')),\n      removeInvalidZero(decimalNumberSum.slice(1), true),\n    ].filter((v: string) => v).join('.');\n  }\n  return [\n    removeInvalidZero(integerSum),\n    removeInvalidZero(decimalNumberSum, true)\n  ].filter((v: string) => v).join('.');\n}\n\n/**\n * 比较两个大数的大小，仅正整数有效\n */\nfunction compareLargeIntegerNumber(num1: string, num2: string): 1 | -1 | 0 {\n  const number1 = removeInvalidZero(num1);\n  const number2 = removeInvalidZero(num2);\n  if (number1.length === number2.length) {\n    for (let i = 0, len = number1.length; i < len; i++) {\n      if (number1[i] > number2[i]) return 1;\n      if (number1[i] < number2[i]) return -1;\n    }\n    return 0;\n  }\n  return number1.length > number2.length ? 1 : -1;\n}\n\nfunction compareLargeDecimalNumber(num1: string, num2: string) {\n  const number1 = num1 && num1 !== '0' ? num1.replace(/0+$/, '') : '0';\n  const number2 = num2 && num2 !== '0' ? num2.replace(/0+$/, '') : '0';\n  const maxLength = Math.max(number1.length, number2.length);\n  for (let i = 0, len = maxLength; i < len; i++) {\n    if ((number1[i] || 0) > (number2[i] || 0)) return 1;\n    if ((number1[i] || 0) < (number2[i] || 0)) return -1;\n  }\n  return 0;\n}\n\n/**\n * 比较两个大数的大小\n */\nexport function compareLargeNumber(\n  num1: string,\n  num2: string,\n): 1 | -1 | 0 {\n  const [integer1, decimal1] = num1.split('.');\n  const [integer2, decimal2] = num2.split('.');\n  const result = compareLargeIntegerNumber(integer1.replace('-', ''), integer2.replace('-', ''));\n  const integer1IsNegative = integer1.includes('-');\n  const integer2IsNegative = integer2.includes('-');\n  if (integer1IsNegative && !integer2IsNegative) return -1;\n  if (!integer1IsNegative && integer2IsNegative) return 1;\n  if (integer1IsNegative && integer2IsNegative) {\n    if (result === 0) return 0;\n    return result > 0 ? -1 : 1;\n  }\n  if (result === 0) {\n    return compareLargeDecimalNumber(decimal1, decimal2);\n  }\n  return result;\n}\n\n// 确认是否为无限大/小\nexport function isInfinity(num: number| string) {\n  return [-Infinity, Infinity].includes(Number(num));\n}\n\n// 确认是否是大数\nexport function isSafeNumber(num: string | number) {\n  return Number(num) < Number.MAX_SAFE_INTEGER && Number(num) > Number.MIN_SAFE_INTEGER;\n}\n\n/**\n * 比较两个数的大小\n */\nexport function compareNumber(\n  num1: string | number,\n  num2: string | number,\n  largeNumber?: boolean,\n) {\n  const isSafeNumberCompare = isSafeNumber(num1) && isSafeNumber(num2) && !largeNumber;\n  const isInfinityCompare = isInfinity(num1) || isInfinity(num2);\n  if (isSafeNumberCompare || isInfinityCompare) {\n    // 比较两个非大数或涉及无穷的大小\n    if (Number(num1) === Number(num2)) return 0;\n    return Number(num1) > Number(num2) ? 1 : -1;\n  }\n  // 比较两个大数的大小\n  return compareLargeNumber(String(num1), String(num2));\n}\n\n/**\n * 大数减法，仅支持整数\n * @param num1 被减数\n * @param num2 减数\n * @param decimal 是否为小数位相减\n */\nexport function largeIntegerNumberSubtract(\n  num1: string, num2: string, p?: { decimal?: boolean, stayZero?: boolean }\n): string {\n  if (num1 === num2) return '0';\n  const { decimal, stayZero } = p || {};\n  const number1 = removeInvalidZero(num1);\n  const number2 = removeInvalidZero(num2);\n  const isFirstLarger = compareLargeIntegerNumber(number1, number2) > 0;\n  const maxNumber = isFirstLarger ? number1 : number2;\n  const minNumber = isFirstLarger ? number2 : number1;\n  const newNumber: string[] = [];\n  // step 存储借位信息\n  const step = [];\n  const diff = decimal ? 0 : maxNumber.length - minNumber.length;\n  const len = decimal ? minNumber.length : maxNumber.length;\n  for (let i = len - 1; i >= 0; i--) {\n    const minIndex = i - diff;\n    // 第一个数，减第二个数，减借位\n    let count = Number(maxNumber[i]) - (Number(minNumber[minIndex]) || 0) - (step[i] || 0);\n    if (count < 0) {\n      step[i - 1] = 1;\n      count += 10;\n    }\n    newNumber.unshift(String(count));\n  }\n  if (decimal) {\n    return newNumber.concat(maxNumber.slice(len, maxNumber.length)).join('');\n  }\n  let finalNumber = newNumber.join('');\n  if (!stayZero) {\n    finalNumber = finalNumber.replace(/^0+/, '');\n  }\n  return removeInvalidZero(isFirstLarger ? finalNumber : `-${finalNumber}`);\n}\n\n/**\n * 大数减法，支持整数和小数（无精度问题）\n * @param num1 被减数\n * @param num2 减数\n * @param decimal 是否为小数位相减\n */\nexport function largePositiveNumberSubtract(num1: string, num2: string): string {\n  if (num1 === num2) return '0';\n  const isFirstLarger = compareNumber(num1, num2, true) > 0;\n  const maxNumber = isFirstLarger ? num1 : num2;\n  const minNumber = isFirstLarger ? num2 : num1;\n  // 整数部分和小数部分分开处理\n  const [intNumber1, decimalNumber1 = '0'] = maxNumber.split('.');\n  const [intNumber2, decimalNumber2 = '0'] = minNumber.split('.');\n  let integerNumber = largeIntegerNumberSubtract(intNumber1, intNumber2);\n  // 如果不存在小数，则直接返回整数相加结果\n  if (decimalNumber1 === '0' && decimalNumber2 === '0') {\n    return isFirstLarger ? integerNumber : `-${integerNumber}`;\n  }\n  // 小数点相减\n  let decimalNumber = '';\n  let addOneNumber = decimalNumber1;\n  // 第一个数字的小数位数比第二个少，需补足 0\n  if (decimalNumber1.length < decimalNumber2.length) {\n    addOneNumber = `${decimalNumber1}${fillZero(decimalNumber2.length - decimalNumber1.length)}`;\n  }\n  // 第一个小数位更小，是否需要借位\n  if (compareLargeDecimalNumber(addOneNumber, decimalNumber2) >= 0) {\n    decimalNumber = largeIntegerNumberSubtract(addOneNumber, decimalNumber2, { decimal: true });\n  } else {\n    if (decimalNumber1.length < decimalNumber2.length || decimalNumber1 === '0') {\n      decimalNumber = largeIntegerNumberSubtract(`1${addOneNumber}`, decimalNumber2, { stayZero: true });\n      decimalNumber = fillZero(decimalNumber2.length - decimalNumber.length) + decimalNumber;\n    } else {\n      decimalNumber = largeIntegerNumberSubtract(decimalNumber1, decimalNumber2, { decimal: true });\n    }\n    integerNumber = largeIntegerNumberSubtract(integerNumber, '1');\n  }\n  const finalNumber = decimalNumber ? [integerNumber, decimalNumber].join('.') : integerNumber;\n  return isFirstLarger ? finalNumber : `-${finalNumber}`;\n}\n\n/**\n * -0.6 - 0.8        =>  -(0.6 + 0.8)\n * -0.6 - (-0.8)     =>  0.8 - 0.6\n * 0.6 - (-0.8)      => 0.6 + 0.8\n * 0.6 - 0.8         => 0.6 - 0.8\n */\nexport function largeNumberSubtract(num1: string, num2: string): string {\n  const isFirstNegative = num1[0] === '-';\n  const isSecondNegative = num2[0] === '-';\n  if (isFirstNegative && !isSecondNegative) {\n    const r = largePositiveNumberAdd(num1.slice(1), num2);\n    return `-${r}`;\n  }\n  if (isFirstNegative && isSecondNegative) {\n    return largePositiveNumberSubtract(num2.slice(1), num1.slice(1));\n  }\n  if (!isFirstNegative && isSecondNegative) {\n    return largePositiveNumberAdd(num1, num2.slice(1));\n  }\n  return largePositiveNumberSubtract(num1, num2);\n}\n\n/**\n * -0.6 + 0.8        =>  0.8 - 0.6\n * -0.6 + (-0.8)     =>  -(0.6 + 0.8)\n * 0.6 + (-0.8)      => 0.6 - 0.8\n * 0.6 + 0.8         => 0.6 + 0.8\n */\nexport function largeNumberAdd(num1: string, num2: string): string {\n  const isFirstNegative = num1[0] === '-';\n  const isSecondNegative = num2[0] === '-';\n  if (isFirstNegative && !isSecondNegative) {\n    return largePositiveNumberSubtract(num2, num1.slice(1));\n  }\n  if (isFirstNegative && isSecondNegative) {\n    const r = largePositiveNumberAdd(num2.slice(1), num1.slice(1));\n    return `-${r}`;\n  }\n  if (!isFirstNegative && isSecondNegative) {\n    return largePositiveNumberSubtract(num1, num2.slice(1));\n  }\n  return largePositiveNumberAdd(num1, num2);\n}\n\n/**\n * 大数保留 N 位小数（没有精度问题）\n * @param {String} number 大数（只能使用字符串表示）\n * @param {Number} decimalPlaces 保留的小数位数\n * @param {Boolean} largeNumber 是否为大数\n */\nexport function largeNumberToFixed(\n  number: string | number, decimalPlaces: number = 0, largeNumber = true,\n): string {\n  if (!largeNumber) return Number(number).toFixed(decimalPlaces);\n  if (typeof number !== 'string') return String(number);\n  const [num1, num2] = number.split('.');\n  // 如果不存在小数点，则补足位数\n  if (!num2) {\n    return decimalPlaces ? [number, (fillZero(decimalPlaces))].join('.') : number;\n  }\n  // 存在小数点，保留 0 位小数，四舍五入\n  if (decimalPlaces === 0) {\n    return Number(num2[0]) >= 5 ? largePositiveNumberAdd(num1, '1') : num1;\n  }\n  // 存在小数点，保留 > 0 位小数，四舍五入（此时，整数位不会发生任何变化，只需关注小数位数）\n  let decimalNumber = num2.slice(0, decimalPlaces);\n  if (num2.length < decimalPlaces) {\n    decimalNumber += (fillZero(decimalPlaces - num2.length));\n  } else {\n    decimalNumber = Number(num2[decimalPlaces]) >= 5\n      ? largePositiveNumberAdd(decimalNumber, '1')\n      : decimalNumber;\n  }\n  return [num1, decimalNumber].join('.');\n}\n\n/**\n * 2e3 => 2000\n * 0.2e3 => 200\n */\nexport function formatENumber(num: string): string {\n  const [num1, num2] = num.split('e');\n  const [integer, initDecimal = ''] = num.split('.');\n  const zeroCount = Number(num2);\n  const [decimal] = initDecimal.split('e');\n  if (zeroCount > decimal.length) {\n    const multipleZero = fillZero(zeroCount - decimal.length);\n    return num1.replace(/(^0+|\\.)/g, '') + multipleZero;\n  }\n  const n1 = integer.replace(/^0+/, '') + decimal.slice(0, zeroCount);\n  const d2 = decimal.slice(zeroCount);\n  return d2 ? [n1, d2].join('.') : n1;\n}\n"],"names":["fillZero","length","Array","fill","join","isInputNumber","num","Number","isNaN","r","test","eCount","negativeCount","dotCount","i","len","removeInvalidZero","decimal","indexOf","log","error","replace","largeIntNumberAdd","num1","num2","number1","number2","isFirstLarger","maxNumber","minNumber","newNumber","step","diff","minIndex","count","unshift","String","concat","slice","largePositiveNumberAdd","split","_slicedToArray","intNumber1","decimalNumber1","intNumber2","decimalNumber2","integerSum","newDecimalNumber1","newDecimalNumber2","decimalNumberSum","decimalLength","filter","v","compareLargeIntegerNumber","compareLargeDecimalNumber","maxLength","Math","max","compareLargeNumber","integer1","decimal1","integer2","decimal2","result","integer1IsNegative","includes","integer2IsNegative","isInfinity","Infinity","isSafeNumber","MAX_SAFE_INTEGER","MIN_SAFE_INTEGER","compareNumber","largeNumber","isSafeNumberCompare","isInfinityCompare","largeIntegerNumberSubtract","p","stayZero","finalNumber","largePositiveNumberSubtract","integerNumber","decimalNumber","addOneNumber","largeNumberSubtract","isFirstNegative","isSecondNegative","largeNumberAdd","largeNumberToFixed","number","decimalPlaces","toFixed","formatENumber","integer","initDecimal","zeroCount","multipleZero","n1","d2"],"mappings":"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"}