{"version":3,"file":"list.js","sources":["../../src/list/list.tsx"],"sourcesContent":["import { defineComponent, VNodeChild, computed } from 'vue';\nimport { useTNodeJSX } from '../hooks/tnode';\nimport TLoading from '../loading';\nimport props from './props';\nimport { TdListProps } from './type';\nimport { LOAD_MORE, LOADING } from './const';\nimport { useConfig, usePrefixClass, useCommonClassName } from '../hooks/useConfig';\n\nexport default defineComponent({\n  name: 'TList',\n  props: {\n    ...props,\n  },\n  setup(props: TdListProps) {\n    const { globalConfig } = useConfig('list');\n    const COMPONENT_NAME = usePrefixClass('list');\n    const { SIZE } = useCommonClassName();\n    const renderTNodeJSX = useTNodeJSX();\n\n    /** 列表基础逻辑 start */\n    const listClass = computed(() => {\n      return [\n        `${COMPONENT_NAME.value}`,\n        SIZE.value[props.size],\n        {\n          [`${COMPONENT_NAME.value}--split`]: props.split,\n          [`${COMPONENT_NAME.value}--stripe`]: props.stripe,\n          [`${COMPONENT_NAME.value}--vertical-action`]: props.layout === 'vertical',\n        },\n      ];\n    });\n    const renderContent = (): VNodeChild => {\n      const propsHeaderContent = renderTNodeJSX('header');\n      const propsFooterContent = renderTNodeJSX('footer');\n      return [\n        propsHeaderContent && <div class={`${COMPONENT_NAME.value}__header`}>{propsHeaderContent}</div>,\n        <ul class={`${COMPONENT_NAME.value}__inner`}>{renderTNodeJSX('default')}</ul>,\n        propsFooterContent && <div class={`${COMPONENT_NAME.value}__footer`}>{propsFooterContent}</div>,\n      ];\n    };\n    /** 列表基础逻辑 end */\n\n    /** 滚动相关逻辑 start */\n\n    const handleScroll = (e: WheelEvent | Event) => {\n      const listElement = e.target as HTMLElement;\n      const { scrollTop, scrollHeight, clientHeight } = listElement;\n      props.onScroll?.({\n        e,\n        scrollTop,\n        scrollBottom: scrollHeight - clientHeight - scrollTop,\n      });\n    };\n    /** 滚动相关逻辑 end */\n\n    /** loading加载相关逻辑 start */\n    const loadingClass = computed(() => {\n      return typeof props.asyncLoading === 'string' && ['loading', 'load-more'].includes(props.asyncLoading)\n        ? `${COMPONENT_NAME.value}__load ${COMPONENT_NAME.value}__load--${props.asyncLoading}`\n        : `${COMPONENT_NAME.value}__load`;\n    });\n\n    const renderLoading = () => {\n      if (props.asyncLoading && typeof props.asyncLoading === 'string') {\n        if (props.asyncLoading === LOADING) {\n          return (\n            <div>\n              <TLoading />\n              <span>{globalConfig.value.loadingText}</span>\n            </div>\n          );\n        }\n        if (props.asyncLoading === LOAD_MORE) {\n          return <span>{globalConfig.value.loadingMoreText}</span>;\n        }\n      }\n      return renderTNodeJSX('asyncLoading');\n    };\n\n    const handleLoadMore = (e: MouseEvent) => {\n      if (typeof props.asyncLoading === 'string' && props.asyncLoading !== LOAD_MORE) return;\n      props.onLoadMore?.({ e });\n    };\n    /** loading加载相关逻辑 end */\n    return {\n      COMPONENT_NAME,\n      listClass,\n      loadingClass,\n      renderLoading,\n      renderContent,\n      handleScroll,\n      handleLoadMore,\n    };\n  },\n\n  render() {\n    let listContent = this.renderContent();\n    listContent = [\n      listContent,\n      <div class={this.loadingClass} onClick={this.handleLoadMore}>\n        {this.renderLoading()}\n      </div>,\n    ];\n    return (\n      <div class={this.listClass} onScroll={this.handleScroll}>\n        {listContent}\n      </div>\n    );\n  },\n});\n"],"names":["defineComponent","name","props","setup","useConfig","globalConfig","COMPONENT_NAME","usePrefixClass","useCommonClassName","SIZE","renderTNodeJSX","useTNodeJSX","listClass","computed","value","size","split","stripe","_defineProperty","layout","renderContent","propsHeaderContent","propsFooterContent","_createVNode","handleScroll","e","listElement","target","scrollTop","scrollHeight","clientHeight","onScroll","scrollBottom","loadingClass","asyncLoading","includes","renderLoading","LOADING","TLoading","loadingText","LOAD_MORE","loadingMoreText","handleLoadMore","onLoadMore","render","listContent"],"mappings":"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"}