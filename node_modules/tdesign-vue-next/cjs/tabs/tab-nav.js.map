{"version":3,"file":"tab-nav.js","sources":["../../src/tabs/tab-nav.tsx"],"sourcesContent":["import { h, defineComponent, Transition, ref, computed, watch, onMounted } from 'vue';\nimport debounce from 'lodash/debounce';\nimport {\n  ChevronLeftIcon as TdChevronLeftIcon,\n  ChevronRightIcon as TdChevronRightIcon,\n  AddIcon as TdAddIcon,\n} from 'tdesign-icons-vue-next';\nimport { TdTabsProps } from './type';\nimport tabProps from './props';\nimport tabBase from '../_common/js/tabs/base';\n\n// 子组件\nimport TTabPanel from './tab-panel';\nimport TTabNavItem from './tab-nav-item';\nimport TTabNavBar from './tab-nav-bar';\n\n// hooks\nimport { useResize } from '../hooks/useListener';\nimport { usePrefixClass, useCommonClassName } from '../hooks/useConfig';\nimport { useGlobalIcon } from '../hooks/useGlobalIcon';\nimport useDragSort from '../hooks/useDragSort';\n\nconst { calculateCanToLeft, calculateCanToRight, calcScrollLeft, scrollToLeft, scrollToRight, moveActiveTabIntoView } =\n  tabBase;\n\nexport default defineComponent({\n  name: 'TTabNav',\n  ...{ resizeObserver: null },\n  props: {\n    theme: tabProps.theme,\n    panels: {\n      type: Array as { new (): Array<InstanceType<typeof TTabPanel>> },\n      default: (): Array<InstanceType<typeof TTabPanel>> => [] as Array<InstanceType<typeof TTabPanel>>,\n    },\n    value: tabProps.value,\n    placement: tabProps.placement,\n    size: tabProps.size,\n    disabled: tabProps.disabled,\n    addable: tabProps.addable,\n    onChange: tabProps.onChange,\n    onAdd: tabProps.onAdd,\n    onRemove: tabProps.onRemove,\n    dragSort: tabProps.dragSort,\n    onDragSort: tabProps.onDragSort,\n  },\n  setup(props) {\n    const COMPONENT_NAME = usePrefixClass('tabs');\n    const { ChevronLeftIcon, ChevronRightIcon, AddIcon } = useGlobalIcon({\n      ChevronLeftIcon: TdChevronLeftIcon,\n      ChevronRightIcon: TdChevronRightIcon,\n      AddIcon: TdAddIcon,\n    });\n    const classPrefix = usePrefixClass();\n    const { SIZE } = useCommonClassName();\n\n    const scrollLeft = ref(0);\n    const canToLeft = ref(false);\n    const canToRight = ref(false);\n\n    // refs\n    // const panels = ref(props.panels);\n    const navsContainerRef = ref();\n    const navsWrapRef = ref();\n    const leftOperationsRef = ref();\n    const toLeftBtnRef = ref();\n    const rightOperationsRef = ref();\n    const toRightBtnRef = ref();\n    const activeTabRef = ref();\n    const getRefs = () => ({\n      navsContainer: navsContainerRef.value,\n      navsWrap: navsWrapRef.value,\n      leftOperations: leftOperationsRef.value,\n      toLeftBtn: toLeftBtnRef.value,\n      rightOperations: rightOperationsRef.value,\n      toRightBtn: toRightBtnRef.value,\n    });\n\n    // style\n    const wrapTransformStyle = computed(() => {\n      if (['left', 'right'].includes(props.placement.toLowerCase())) return {};\n      return {\n        transform: `translate3d(${-scrollLeft.value}px, 0, 0)`,\n      };\n    });\n    const navsContainerStyle = computed(() => {\n      return props.addable ? { 'min-height': '48px' } : null;\n    });\n\n    // class\n    const iconBaseClass = computed(() => {\n      return {\n        [`${COMPONENT_NAME.value}__btn`]: true,\n        [SIZE.value.medium]: props.size === 'medium',\n        [SIZE.value.large]: props.size === 'large',\n      };\n    });\n    const leftIconClass = computed(() => {\n      return {\n        [`${COMPONENT_NAME.value}__btn--left`]: true,\n        ...iconBaseClass.value,\n      };\n    });\n    const rightIconClass = computed(() => {\n      return {\n        [`${COMPONENT_NAME.value}__btn--right`]: true,\n        ...iconBaseClass.value,\n      };\n    });\n    const addIconClass = computed(() => {\n      return {\n        [`${COMPONENT_NAME.value}__add-btn`]: true,\n        ...iconBaseClass.value,\n      };\n    });\n    const navContainerClass = computed(() => {\n      return {\n        [`${COMPONENT_NAME.value}__nav-container`]: true,\n        [`${COMPONENT_NAME.value}__nav--card`]: props.theme === 'card',\n        [`${classPrefix.value}-is-${props.placement}`]: true,\n        [`${classPrefix.value}-is-addable`]: props.addable,\n      };\n    });\n    const navScrollContainerClass = computed(() => {\n      return {\n        [`${COMPONENT_NAME.value}__nav-scroll`]: true,\n        [`${classPrefix.value}-is-scrollable`]: canToLeft.value || canToRight.value,\n      };\n    });\n\n    const navsWrapClass = computed(() => {\n      return [\n        `${COMPONENT_NAME.value}__nav-wrap`,\n        `${classPrefix.value}-is-smooth`,\n        { [`${classPrefix.value}-is-vertical`]: props.placement === 'left' || props.placement === 'right' },\n      ];\n    });\n\n    const totalAdjust = () => {\n      adjustArrowDisplay();\n      adjustScrollLeft();\n    };\n    // watch\n    watch([scrollLeft, () => props.placement, () => props.panels], totalAdjust);\n\n    // life times\n    useResize(debounce(totalAdjust), navsContainerRef.value);\n    onMounted(totalAdjust);\n\n    // methods\n    const adjustScrollLeft = () => {\n      scrollLeft.value = calcScrollLeft(getRefs(), scrollLeft.value);\n    };\n    const adjustArrowDisplay = () => {\n      canToLeft.value = calculateCanToLeft(getRefs(), scrollLeft.value, props.placement);\n      canToRight.value = calculateCanToRight(getRefs(), scrollLeft.value, props.placement);\n    };\n    const handleScroll = (direction: 'left' | 'right') => {\n      if (direction === 'left') {\n        scrollLeft.value = scrollToLeft(getRefs(), scrollLeft.value);\n      } else {\n        scrollLeft.value = scrollToRight(getRefs(), scrollLeft.value);\n      }\n    };\n    const handleAddTab = (e: MouseEvent) => {\n      props.onAdd?.({ e });\n    };\n    const tabClick = (event: MouseEvent, nav: Partial<InstanceType<typeof TTabPanel>>) => {\n      const { value, disabled } = nav;\n      if (disabled || props.value === value) {\n        return false;\n      }\n      props.onChange(value);\n    };\n    const removeBtnClick = ({ e, value, index }: Parameters<TdTabsProps['onRemove']>[0]) => {\n      props.onRemove({ e, value, index });\n    };\n    const setActiveTab = (ref: any) => {\n      if (ref?.value === props.value && activeTabRef.value !== ref.$el) {\n        activeTabRef.value = ref.$el;\n        scrollLeft.value = moveActiveTabIntoView(\n          {\n            activeTab: activeTabRef.value,\n            ...getRefs(),\n          },\n          scrollLeft.value,\n        );\n      }\n    };\n\n    const { setNavsWrap } = useDragSort(props);\n    onMounted(() => {\n      setNavsWrap(navsWrapRef.value);\n    });\n    // renders\n    const navs = computed(() => {\n      return props.panels.map((panel, index) => {\n        let label;\n        if (panel?.children?.label) {\n          label = panel.children.label();\n        } else if (typeof panel.label === 'function') {\n          label = panel.label(h);\n        } else {\n          label = panel.label || `选项卡${index + 1}`;\n        }\n\n        return (\n          <TTabNavItem\n            ref={setActiveTab}\n            draggable={props.dragSort}\n            key={panel.value}\n            index={index}\n            theme={props.theme}\n            size={props.size}\n            placement={props.placement}\n            label={label}\n            active={panel.value === props.value}\n            disabled={props.disabled || panel.disabled}\n            removable={panel.removable}\n            value={panel.value}\n            onClick={(e: MouseEvent) => tabClick(e, panel)}\n            onRemove={removeBtnClick}\n          />\n        );\n      });\n    });\n    const renderArrows = () => {\n      return [\n        <div\n          ref={leftOperationsRef}\n          class={[`${COMPONENT_NAME.value}__operations`, `${COMPONENT_NAME.value}__operations--left`]}\n        >\n          <Transition name=\"fade\" mode=\"out-in\" appear>\n            {canToLeft.value ? (\n              <div ref={toLeftBtnRef} class={leftIconClass.value} onClick={() => handleScroll('left')}>\n                <ChevronLeftIcon />\n              </div>\n            ) : null}\n          </Transition>\n        </div>,\n        <div\n          ref={rightOperationsRef}\n          class={[`${COMPONENT_NAME.value}__operations`, `${COMPONENT_NAME.value}__operations--right`]}\n        >\n          <Transition name=\"fade\" mode=\"out-in\" appear>\n            {canToRight.value ? (\n              <div ref={toRightBtnRef} class={rightIconClass.value} onClick={() => handleScroll('right')}>\n                <ChevronRightIcon></ChevronRightIcon>\n              </div>\n            ) : null}\n          </Transition>\n          {props.addable ? (\n            <div class={addIconClass.value} onClick={handleAddTab}>\n              <AddIcon></AddIcon>\n            </div>\n          ) : null}\n        </div>,\n      ];\n    };\n    const renderNavs = () => {\n      return (\n        <div class={navContainerClass.value}>\n          <div class={navScrollContainerClass.value}>\n            <div ref={navsWrapRef} class={navsWrapClass.value} style={wrapTransformStyle.value}>\n              {props.theme !== 'card' && (\n                <TTabNavBar placement={props.placement} value={props.value} navs={navs.value} />\n              )}\n              {navs.value}\n            </div>\n          </div>\n        </div>\n      );\n    };\n\n    return () => {\n      return (\n        <div ref={navsContainerRef} class={[`${COMPONENT_NAME.value}__nav`]} style={navsContainerStyle.value}>\n          {renderArrows()}\n          {renderNavs()}\n        </div>\n      );\n    };\n  },\n});\n"],"names":["calculateCanToLeft","tabBase","calculateCanToRight","calcScrollLeft","scrollToLeft","scrollToRight","moveActiveTabIntoView","defineComponent","name","resizeObserver","props","theme","tabProps","panels","type","Array","value","placement","size","disabled","addable","onChange","onAdd","onRemove","dragSort","onDragSort","setup","COMPONENT_NAME","usePrefixClass","useGlobalIcon","ChevronLeftIcon","TdChevronLeftIcon","ChevronRightIcon","TdChevronRightIcon","AddIcon","TdAddIcon","classPrefix","useCommonClassName","SIZE","scrollLeft","ref","canToLeft","canToRight","navsContainerRef","navsWrapRef","leftOperationsRef","toLeftBtnRef","rightOperationsRef","toRightBtnRef","activeTabRef","getRefs","navsContainer","navsWrap","leftOperations","toLeftBtn","rightOperations","toRightBtn","wrapTransformStyle","computed","includes","toLowerCase","transform","navsContainerStyle","iconBaseClass","_defineProperty","medium","large","leftIconClass","rightIconClass","addIconClass","navContainerClass","navScrollContainerClass","navsWrapClass","totalAdjust","adjustArrowDisplay","adjustScrollLeft","watch","useResize","debounce","onMounted","handleScroll","direction","handleAddTab","e","tabClick","event","nav","removeBtnClick","index","setActiveTab","$el","activeTab","useDragSort","setNavsWrap","navs","map","panel","label","children","h","_createVNode","TTabNavItem","removable","renderArrows","Transition","renderNavs","TTabNavBar"],"mappings":"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"}