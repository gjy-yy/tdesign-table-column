{"version":3,"file":"select-input.js","sources":["../../src/select-input/select-input.tsx"],"sourcesContent":["import { computed, defineComponent, ref, SetupContext, toRefs } from 'vue';\nimport Popup from '../popup';\nimport props from './props';\nimport { TdSelectInputProps } from './type';\n\nimport useSingle from './useSingle';\nimport useMultiple from './useMultiple';\nimport useOverlayInnerStyle from './useOverlayInnerStyle';\nimport { usePrefixClass } from '../hooks/useConfig';\n\nconst useComponentClassName = () => {\n  return {\n    NAME_CLASS: usePrefixClass('select-input'),\n    BASE_CLASS_BORDERLESS: usePrefixClass('select-input--borderless'),\n    BASE_CLASS_MULTIPLE: usePrefixClass('select-input--multiple'),\n    BASE_CLASS_POPUP_VISIBLE: usePrefixClass('select-input--popup-visible'),\n    BASE_CLASS_EMPTY: usePrefixClass('select-input--empty'),\n  };\n};\n\nexport default defineComponent({\n  name: 'TSelectInput',\n\n  props: { ...props },\n\n  setup(props: TdSelectInputProps, context: SetupContext) {\n    const { NAME_CLASS, BASE_CLASS_BORDERLESS, BASE_CLASS_MULTIPLE, BASE_CLASS_POPUP_VISIBLE, BASE_CLASS_EMPTY } =\n      useComponentClassName();\n    const classPrefix = usePrefixClass();\n\n    const selectInputRef = ref();\n    const selectInputWrapRef = ref();\n    const { multiple, value, popupVisible, borderless } = toRefs(props);\n    const { commonInputProps, onInnerClear, renderSelectSingle } = useSingle(props, context);\n    const { renderSelectMultiple } = useMultiple(props, context);\n    const { tOverlayInnerStyle, innerPopupVisible, onInnerPopupVisibleChange } = useOverlayInnerStyle(props);\n\n    const popupClasses = computed(() => [\n      NAME_CLASS.value,\n      {\n        [BASE_CLASS_BORDERLESS.value]: borderless.value,\n        [BASE_CLASS_MULTIPLE.value]: multiple.value,\n        [BASE_CLASS_POPUP_VISIBLE.value]: popupVisible.value ?? innerPopupVisible.value,\n        [BASE_CLASS_EMPTY.value]: value.value instanceof Array ? !value.value.length : !value.value,\n      },\n    ]);\n\n    return {\n      classPrefix,\n      NAME_CLASS,\n      selectInputWrapRef,\n      innerPopupVisible,\n      commonInputProps,\n      tOverlayInnerStyle,\n      selectInputRef,\n      popupClasses,\n      onInnerClear,\n      renderSelectSingle,\n      renderSelectMultiple,\n      onInnerPopupVisibleChange,\n    };\n  },\n\n  render() {\n    // 浮层显示的受控与非受控\n    const visibleProps = { visible: this.popupVisible ?? this.innerPopupVisible };\n\n    const mainContent = (\n      <Popup\n        ref=\"selectInputRef\"\n        class={this.popupClasses}\n        trigger={(this.popupProps as TdSelectInputProps['popupProps'])?.trigger || 'click'}\n        placement=\"bottom-left\"\n        {...visibleProps}\n        content={this.panel}\n        v-slots={{ ...this.$slots, content: this.$slots.panel }}\n        hideEmptyPopup={true}\n        {...{\n          onVisibleChange: this.onInnerPopupVisibleChange,\n          ...(this.popupProps as TdSelectInputProps['popupProps']),\n          overlayInnerStyle: this.tOverlayInnerStyle,\n        }}\n      >\n        {this.multiple\n          ? this.renderSelectMultiple({\n              commonInputProps: this.commonInputProps,\n              onInnerClear: this.onInnerClear,\n              popupVisible: visibleProps.visible,\n            })\n          : this.renderSelectSingle(visibleProps.visible)}\n      </Popup>\n    );\n\n    if (!this.tips) return mainContent;\n\n    return (\n      <div ref=\"selectInputWrapRef\" class={`${this.NAME_CLASS}__wrap`}>\n        {mainContent}\n        <div class={`${this.classPrefix}-input__tips ${this.classPrefix}-input__tips--${this.status || 'normal'}`}>\n          {this.tips}\n        </div>\n      </div>\n    );\n  },\n});\n"],"names":["useComponentClassName","NAME_CLASS","usePrefixClass","BASE_CLASS_BORDERLESS","BASE_CLASS_MULTIPLE","BASE_CLASS_POPUP_VISIBLE","BASE_CLASS_EMPTY","defineComponent","name","props","setup","context","classPrefix","selectInputRef","ref","selectInputWrapRef","toRefs","multiple","value","popupVisible","borderless","useSingle","commonInputProps","onInnerClear","renderSelectSingle","useMultiple","renderSelectMultiple","useOverlayInnerStyle","tOverlayInnerStyle","innerPopupVisible","onInnerPopupVisibleChange","popupClasses","computed","_defineProperty","Array","length","render","visibleProps","visible","mainContent","_createVNode","Popup","_mergeProps","popupProps","trigger","panel","onVisibleChange","overlayInnerStyle","$slots","content","tips","status"],"mappings":"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"}