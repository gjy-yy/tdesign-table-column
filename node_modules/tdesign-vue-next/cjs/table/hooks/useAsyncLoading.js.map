{"version":3,"file":"useAsyncLoading.js","sources":["../../../src/table/hooks/useAsyncLoading.tsx"],"sourcesContent":["import isString from 'lodash/isString';\nimport { computed, SetupContext } from 'vue';\nimport { useTNodeJSX } from '../../hooks/tnode';\nimport { TdPrimaryTableProps } from '../type';\nimport Loading from '../../loading';\nimport useClassName from './useClassName';\nimport { useConfig } from '../../hooks/useConfig';\n\nexport default function useAsyncLoading(props: TdPrimaryTableProps, context: SetupContext) {\n  const renderTNode = useTNodeJSX();\n  const { globalConfig } = useConfig('table');\n  const { isLoadingClass, isLoadMoreClass, asyncLoadingClass } = useClassName();\n\n  const classes = computed(() => [\n    asyncLoadingClass,\n    {\n      [isLoadingClass]: props.asyncLoading === 'loading',\n      [isLoadMoreClass]: props.asyncLoading === 'load-more',\n    },\n  ]);\n\n  function onLoadClick() {\n    if (typeof props.asyncLoading !== 'string') return;\n    props.onAsyncLoadingClick?.({ status: props.asyncLoading });\n  }\n\n  function renderAsyncLoading() {\n    const asyncLoadingNode = renderTNode('asyncLoading');\n    if (isString(asyncLoadingNode)) {\n      const { asyncLoading } = props;\n      const loadingText = {\n        'load-more': globalConfig.value.loadingMoreText,\n        loading: globalConfig.value.loadingText,\n      }[String(asyncLoading)];\n      return (\n        <div class={classes.value} onClick={onLoadClick}>\n          {<Loading loading={asyncLoading === 'loading'} size=\"small\" text={loadingText} />}\n        </div>\n      );\n    }\n    if (![null, false, undefined].includes(asyncLoadingNode)) {\n      return (\n        <div class={classes.value} onClick={onLoadClick}>\n          {asyncLoadingNode}\n        </div>\n      );\n    }\n    return null;\n  }\n  return {\n    renderAsyncLoading,\n  };\n}\n"],"names":["useAsyncLoading","props","context","renderTNode","useTNodeJSX","useConfig","globalConfig","useClassName","isLoadingClass","isLoadMoreClass","asyncLoadingClass","classes","computed","_defineProperty","asyncLoading","onLoadClick","onAsyncLoadingClick","status","renderAsyncLoading","asyncLoadingNode","isString","loadingText","value","loadingMoreText","loading","String","_createVNode","Loading","includes"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQwB,SAAAA,eAAA,CAAgBC,KAAhB,EAA4CC,OAA5C,EAAmE;EACzF,IAAMC,cAAcC,uBAAY,EAAhC,CAAA;;EACA,IAAyBC,UAAAA,GAAAA,kCAAA,CAAU,OAAV,CAAzB;MAAQC,YAAR,cAAQA,YAAR,CAAA;;AACA,EAAA,IAAA,aAAA,GAA+DC,mCAAa,EAA5E;MAAQC,cAAR,iBAAQA,cAAR;MAAwBC,eAAxB,iBAAwBA,eAAxB;MAAyCC,iBAAzC,iBAAyCA,iBAAzC,CAAA;;EAEM,IAAAC,OAAA,GAAUC,aAAS,YAAA;AAAA,IAAA,IAAA,IAAA,CAAA;;AAAA,IAAA,OAAM,CAC7BF,iBAD6B,GAAA,IAAA,GAAA,EAAA,EAAAG,mCAAA,CAAA,IAAA,EAG1BL,cAH0B,EAGTP,KAAA,CAAMa,YAAN,KAAuB,SAHd,CAAA,EAAAD,mCAAA,CAAA,IAAA,EAI1BJ,eAJ0B,EAIRR,KAAA,CAAMa,YAAN,KAAuB,WAJf,CAAN,EAAA,IAAA,EAAA,CAAA;AAAA,IAAnB,CAAA;;AAQN,EAAA,SAASC,WAAT,GAAuB;AAAA,IAAA,IAAA,qBAAA,CAAA;;AACjB,IAAA,IAAA,OAAOd,MAAMa,YAAb,KAA8B,QAA9B,EAAwC,OAAA;AAC5C,IAAA,CAAA,qBAAA,GAAAb,KAAA,CAAMe,mBAAN,MAAA,IAAA,IAAA,qBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,qBAAA,CAAA,IAAA,CAAAf,KAAA,EAA4B;MAAEgB,MAAQ,EAAAhB,KAAA,CAAMa,YAAAA;AAAhB,KAA5B,CAAA,CAAA;AACF,GAAA;;AAEA,EAAA,SAASI,kBAAT,GAA8B;AACtB,IAAA,IAAAC,gBAAA,GAAmBhB,YAAY,eAA/B,CAAA;;AACF,IAAA,IAAAiB,4BAAA,CAASD,gBAAT,CAAA,EAA4B;AACxB,MAAA,IAAEL,YAAF,GAAmBb,KAAnB,CAAEa,YAAF,CAAA;AACN,MAAA,IAAMO,WAAc,GAAA;AAClB,QAAA,WAAA,EAAaf,aAAagB,KAAb,CAAmBC,eADd;AAElBC,QAAAA,OAAA,EAASlB,aAAagB,KAAb,CAAmBD,WAAAA;AAFV,OAAA,CAGlBI,OAAOX,aAHW,CAApB,CAAA;AAIA,MAAA,OAAAY,eAAA,CAAA,KAAA,EAAA;QAAA,OACcf,EAAAA,OAAQ,CAAAW,KADtB;QAAA,SACsCP,EAAAA,WAAAA;AADtC,OAAA,EAAA,CAAAW,eAAA,CAAAC,qBAAA,EAAA;QAAA,SAEuBb,EAAAA,iBAAiB,SAFxC;AAAA,QAAA,MAAA,EAEwD,OAFxD;QAAA,MAEsEO,EAAAA,WAAAA;AAFtE,OAAA,EAAA,IAAA,CAAA,CAAA,CAAA,CAAA;AAKF,KAAA;;AACI,IAAA,IAAA,CAAC,CAAC,IAAD,EAAO,KAAP,EAAc,MAAd,CAAyBO,CAAAA,QAAzB,CAAkCT,gBAAlC,CAAD,EAAsD;AAEtD,MAAA,OAAAO,eAAA,CAAA,KAAA,EAAA;QAAA,OAAYf,EAAAA,OAAA,CAAQW,KAApB;QAAA,SAAoCP,EAAAA,WAAAA;AAApC,OAAA,EAAA,CACGI,gBADH,CAAA,CAAA,CAAA;AAIJ,KAAA;;AACO,IAAA,OAAA,IAAA,CAAA;AACT,GAAA;;EACO,OAAA;AACLD,IAAAA,kBAAA,EAAAA,kBAAAA;GADK,CAAA;AAGT;;;;"}