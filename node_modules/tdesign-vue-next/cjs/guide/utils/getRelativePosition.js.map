{"version":3,"file":"getRelativePosition.js","sources":["../../../src/guide/utils/getRelativePosition.ts"],"sourcesContent":["import { getElmCssPropValue, isFixed, getWindowScroll } from '../../utils/dom';\n\n/**\n * 获取元素相对于另一个元素的位置（或者说相对于 body）\n * 感谢 `meouw`: http://stackoverflow.com/a/442474/375966\n */\nexport default function getRelativePosition(elm: HTMLElement, relativeElm: HTMLElement = document.body) {\n  const { scrollTop, scrollLeft } = getWindowScroll();\n  const { top: elmTop, left: elmLeft } = elm.getBoundingClientRect();\n  const { top: relElmTop, left: relElmLeft } = relativeElm.getBoundingClientRect();\n  const relativeElmPosition = getElmCssPropValue(relativeElm, 'position');\n\n  if (\n    (relativeElm.tagName.toLowerCase() !== 'body' && relativeElmPosition === 'relative') ||\n    relativeElmPosition === 'sticky'\n  ) {\n    return {\n      top: elmTop - relElmTop,\n      left: elmLeft - relElmLeft,\n    };\n  }\n\n  if (isFixed(elm)) {\n    return {\n      top: elmTop,\n      left: elmLeft,\n    };\n  }\n\n  return {\n    top: elmTop + scrollTop,\n    left: elmLeft + scrollLeft,\n  };\n}\n"],"names":["getRelativePosition","elm","relativeElm","document","body","getWindowScroll","scrollTop","scrollLeft","getBoundingClientRect","elmTop","top","elmLeft","left","relElmTop","relElmLeft","relativeElmPosition","getElmCssPropValue","tagName","toLowerCase","isFixed"],"mappings":";;;;;;;;;;;;;;;AAMA,SAAwBA,mBAAxB,CAA4CC,GAA5C,EAAwG;AAAA,EAAA,IAA1CC,WAA0C,GAAA,SAAA,CAAA,MAAA,GAAA,CAAA,IAAA,SAAA,CAAA,CAAA,CAAA,KAAA,SAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GAAfC,QAAA,CAASC,IAAM,CAAA;;AACtG,EAAA,IAAA,gBAAA,GAAkCC,yBAAgB,EAAlD;MAAQC,SAAR,oBAAQA,SAAR;MAAmBC,UAAnB,oBAAmBA,UAAnB,CAAA;;EACA,IAAuCN,qBAAAA,GAAAA,IAAIO,qBAAJ,EAAvC;MAAaC,MAAb,yBAAQC,GAAR;MAA2BC,OAA3B,yBAAqBC,IAArB,CAAA;;EACA,IAA6CV,qBAAAA,GAAAA,YAAYM,qBAAZ,EAA7C;MAAaK,SAAb,yBAAQH,GAAR;MAA8BI,UAA9B,yBAAwBF,IAAxB,CAAA;;AACM,EAAA,IAAAG,mBAAA,GAAsBC,4BAAmB,CAAAd,WAAA,EAAa,UAAb,CAAzC,CAAA;;AAGH,EAAA,IAAAA,WAAA,CAAYe,OAAZ,CAAoBC,WAApB,EAAsC,KAAA,MAAtC,IAAgDH,mBAAwB,KAAA,UAAxE,IACDA,wBAAwB,QADvB,EAED;IACO,OAAA;MACLL,KAAKD,MAAS,GAAAI,SADT;MAELD,MAAMD,OAAU,GAAAG,UAAAA;KAFX,CAAA;AAIT,GAAA;;AAEI,EAAA,IAAAK,iBAAA,CAAQlB,GAAR,CAAA,EAAc;IACT,OAAA;AACLS,MAAAA,GAAK,EAAAD,MADA;AAELG,MAAAA,IAAM,EAAAD,OAAAA;KAFD,CAAA;AAIT,GAAA;;EAEO,OAAA;IACLD,KAAKD,MAAS,GAAAH,SADT;IAELM,MAAMD,OAAU,GAAAJ,UAAAA;GAFX,CAAA;AAIT;;;;"}