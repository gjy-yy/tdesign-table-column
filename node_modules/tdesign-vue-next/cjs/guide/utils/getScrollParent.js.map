{"version":3,"file":"getScrollParent.js","sources":["../../../src/guide/utils/getScrollParent.ts"],"sourcesContent":["import { elementInViewport } from '../../utils/dom';\n\nexport function getScrollParent(element: HTMLElement) {\n  let style = window.getComputedStyle(element);\n  const excludeStaticParent = style.position === 'absolute';\n  const overflowRegex = /(auto|scroll)/;\n\n  if (style.position === 'fixed') return document.body;\n\n  for (let parent = element; parent.parentElement; ) {\n    parent = parent.parentElement;\n    style = window.getComputedStyle(parent);\n    if (excludeStaticParent && style.position === 'static') {\n      continue;\n    }\n    if (overflowRegex.test(style.overflow + style.overflowY + style.overflowX)) return parent;\n  }\n\n  return document.body;\n}\n\nexport function scrollToParentVisibleArea(element: HTMLElement) {\n  const parent = getScrollParent(element);\n  if (parent === document.body) return;\n  // !todo 逻辑待验证\n  if (elementInViewport(element, parent)) return;\n  parent.scrollTop = element.offsetTop - parent.offsetTop;\n}\n"],"names":["getScrollParent","element","style","window","getComputedStyle","excludeStaticParent","position","overflowRegex","document","body","parent","parentElement","test","overflow","overflowY","overflowX","scrollToParentVisibleArea","elementInViewport","scrollTop","offsetTop"],"mappings":";;;;;;;;;;;;;;;AAEO,SAASA,eAAT,CAAyBC,OAAzB,EAA+C;AAChD,EAAA,IAAAC,KAAA,GAAQC,MAAO,CAAAC,gBAAP,CAAwBH,OAAxB,CAAR,CAAA;AACE,EAAA,IAAAI,mBAAA,GAAsBH,MAAMI,QAAN,KAAmB,UAAzC,CAAA;EACN,IAAMC,aAAgB,GAAA,eAAtB,CAAA;EAEA,IAAIL,MAAMI,QAAN,KAAmB,OAAvB,EAAgC,OAAOE,QAAS,CAAAC,IAAhB,CAAA;;EAEvB,KAAA,IAAAC,MAAA,GAAST,OAAT,EAAkBS,MAAA,CAAOC,aAAzB,GAA0C;IACjDD,MAAA,GAASA,MAAO,CAAAC,aAAhB,CAAA;AACQT,IAAAA,KAAA,GAAAC,MAAA,CAAOC,gBAAP,CAAwBM,MAAxB,CAAA,CAAA;;AACJ,IAAA,IAAAL,mBAAA,IAAuBH,KAAM,CAAAI,QAAN,KAAmB,QAA1C,EAAoD;AACtD,MAAA,SAAA;AACF,KAAA;;AACA,IAAA,IAAIC,cAAcK,IAAd,CAAmBV,KAAA,CAAMW,QAAN,GAAiBX,KAAM,CAAAY,SAAvB,GAAmCZ,MAAMa,SAA5D,CAAJ,EAAmF,OAAAL,MAAA,CAAA;AACrF,GAAA;;EAEA,OAAOF,QAAS,CAAAC,IAAhB,CAAA;AACF,CAAA;AAEO,SAASO,yBAAT,CAAmCf,OAAnC,EAAyD;AACxD,EAAA,IAAAS,MAAA,GAASV,gBAAgBC,QAAzB,CAAA;AACN,EAAA,IAAIS,WAAWF,QAAS,CAAAC,IAAxB,EAA8B,OAAA;AAE1B,EAAA,IAAAQ,2BAAA,CAAkBhB,OAAlB,EAA2BS,MAA3B,CAAA,EAAoC,OAAA;EACjCA,MAAA,CAAAQ,SAAA,GAAYjB,OAAQ,CAAAkB,SAAR,GAAoBT,MAAO,CAAAS,SAAvC,CAAA;AACT;;;;;"}