{"version":3,"file":"hooks.js","sources":["../../src/image-viewer/hooks.ts"],"sourcesContent":["import { ref } from 'vue';\nimport { ImageScale } from './type';\n\ninterface InitTransform {\n  translateX: number;\n  translateY: number;\n}\n\nexport function useDrag(initTransform: InitTransform) {\n  const transform = ref(initTransform);\n\n  const mouseDownHandler = (e: MouseEvent) => {\n    const { pageX: startX, pageY: startY } = e;\n    const { translateX, translateY } = transform.value;\n    const mouseMoveHandler = (e: MouseEvent) => {\n      const { pageX, pageY } = e;\n      transform.value = {\n        translateX: translateX + pageX - startX,\n        translateY: translateY + pageY - startY,\n      };\n    };\n    const mouseUpHandler = () => {\n      document.removeEventListener('mousemove', mouseMoveHandler);\n      document.removeEventListener('mouseup', mouseUpHandler);\n    };\n\n    document.addEventListener('mousemove', mouseMoveHandler);\n    document.addEventListener('mouseup', mouseUpHandler);\n  };\n\n  const resetTransform = () => {\n    transform.value = { ...initTransform };\n  };\n\n  return { transform, mouseDownHandler, resetTransform };\n}\n\nexport function useMirror() {\n  const mirror = ref(1);\n  const onMirror = () => {\n    mirror.value *= -1;\n  };\n  const resetMirror = () => {\n    mirror.value = 1;\n  };\n\n  return { mirror, onMirror, resetMirror };\n}\n\nexport function useScale(imageScale: ImageScale = { max: 2, min: 0.5, step: 0.5 }) {\n  const { max, min, step } = imageScale;\n  const scale = ref(1);\n  const onZoomIn = () => {\n    setScale(scale.value + step);\n  };\n  const onZoomOut = () => {\n    setScale(scale.value - step);\n  };\n  const resetScale = () => {\n    scale.value = 1;\n  };\n\n  const setScale = (newScale: number) => {\n    let value = newScale;\n    if (newScale < min) {\n      value = min;\n    }\n    if (newScale > max) {\n      value = max;\n    }\n    scale.value = value;\n  };\n\n  return { scale, onZoomIn, onZoomOut, resetScale };\n}\n\nexport function useRotate() {\n  const rotate = ref(0);\n  const ROTATE_DEG = 90;\n\n  const onRotate = () => {\n    rotate.value += ROTATE_DEG;\n  };\n  const resetRotate = () => {\n    rotate.value = 0;\n  };\n\n  return { rotate, onRotate, resetRotate };\n}\n"],"names":["useDrag","initTransform","transform","ref","mouseDownHandler","e","startX","pageX","startY","pageY","value","translateX","translateY","mouseMoveHandler","mouseUpHandler","document","removeEventListener","addEventListener","resetTransform","useMirror","mirror","onMirror","resetMirror","useScale","imageScale","max","min","step","scale","onZoomIn","setScale","onZoomOut","resetScale","newScale","useRotate","rotate","ROTATE_DEG","onRotate","resetRotate"],"mappings":"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"}