{"version":3,"file":"useSliderInput.js","sources":["../../../src/slider/hooks/useSliderInput.tsx"],"sourcesContent":["import { computed, Ref } from 'vue';\nimport { TdSliderProps } from '../type';\nimport InputNumber, { InputNumberProps } from '../../input-number';\n\nconst INPUT_NUMBER_PROPS_INITIAL_STATE: InputNumberProps = {\n  decimalPlaces: 0,\n  format: undefined as InputNumberProps['format'],\n  placeholder: '',\n  theme: 'column' as InputNumberProps['theme'],\n};\n\ninterface useSliderInputProps {\n  inputNumberProps: boolean | TdSliderProps['inputNumberProps'];\n  max: number;\n  min: number;\n  step: number;\n  prefixName: string;\n  vertical: boolean;\n  disabled: boolean;\n}\n\n/**\n * 聚合管理inputNumber渲染逻辑\n */\nexport const useSliderInput = (config: Ref<useSliderInputProps>) => {\n  const name = config.value.prefixName;\n\n  /** 根据传入属性缓存计算inputNumber props */\n  const sliderInputState = computed(() => {\n    let initialState = { ...INPUT_NUMBER_PROPS_INITIAL_STATE };\n    const inputProps = config.value;\n    if (typeof inputProps.inputNumberProps !== 'boolean') {\n      const inputTheme = inputProps.inputNumberProps?.theme;\n      initialState = { ...initialState, ...inputProps.inputNumberProps };\n      if (['column', 'row', 'normal'].includes(inputTheme)) {\n        initialState.theme = inputTheme;\n      }\n    }\n    return initialState;\n  });\n\n  const sliderNumberClass = computed(() => {\n    return [\n      `${name}__input`,\n      {\n        'is-vertical': config.value.vertical,\n      },\n    ];\n  });\n\n  const renderInputNumber = (val: number, changeFn: (val: number) => void) => {\n    // if exist min or max prop, onChange callback function will pass undefined value when decrease\n    const normalizeChangeFn = (num: number | undefined) => {\n      if (num !== undefined && !isNaN(num)) {\n        changeFn(num);\n      }\n    };\n    return (\n      <InputNumber\n        {...sliderInputState.value}\n        class={sliderNumberClass.value}\n        value={val}\n        step={config.value.step}\n        onChange={normalizeChangeFn}\n        disabled={config.value.disabled}\n        min={config.value.min}\n        max={config.value.max}\n      />\n    );\n  };\n\n  return renderInputNumber;\n};\n"],"names":["INPUT_NUMBER_PROPS_INITIAL_STATE","decimalPlaces","format","placeholder","theme","useSliderInput","config","name","value","prefixName","sliderInputState","computed","initialState","inputProps","inputNumberProps","inputTheme","includes","sliderNumberClass","vertical","renderInputNumber","val","changeFn","normalizeChangeFn","num","isNaN","step","disabled","min","max"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,IAAMA,gCAAqD,GAAA;AACzDC,EAAAA,aAAe,EAAA,CAD0C;EAEzDC,MAAQ,EAAA,KAAA,CAFiD;AAGzDC,EAAAA,WAAa,EAAA,EAH4C;AAIzDC,EAAAA,KAAO,EAAA,QAAA;AAJkD,CAA3D,CAAA;IAoBaC,cAAA,GAAiB,SAAjBA,cAAiB,CAACC,MAAD,EAAsC;AAC5D,EAAA,IAAAC,IAAA,GAAOD,OAAOE,KAAP,CAAaC,UAApB,CAAA;AAGA,EAAA,IAAAC,gBAAA,GAAmBC,aAAS,YAAM;IAClC,IAAAC,YAAA,GAAoBZ,aAAAA,CAAAA,EAAAA,EAAAA,gCAApB,CAAA,CAAA;;AACJ,IAAA,IAAMa,aAAaP,MAAO,CAAAE,KAA1B,CAAA;;AACI,IAAA,IAAA,OAAOK,UAAW,CAAAC,gBAAlB,KAAuC,SAAvC,EAAkD;AAAA,MAAA,IAAA,qBAAA,CAAA;;AAC9C,MAAA,IAAAC,UAAA,GAAaF,CAAAA,qBAAAA,GAAAA,WAAWC,gBAAxB,MAAA,IAAA,IAAA,qBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAa,sBAA6BV,KAA1C,CAAA;AACNQ,MAAAA,YAAA,mCAAoBA,YAApB,CAAA,EAAqCC,WAAWC,gBAAhD,CAAA,CAAA;;MACA,IAAI,CAAC,QAAD,EAAW,KAAX,EAAkB,QAAlB,CAAA,CAA4BE,QAA5B,CAAqCD,UAArC,CAAJ,EAAsD;QACpDH,YAAA,CAAaR,KAAb,GAAqBW,UAArB,CAAA;AACF,OAAA;AACF,KAAA;;AACO,IAAA,OAAAH,YAAA,CAAA;AACR,IAXK,CAAA;AAaA,EAAA,IAAAK,iBAAA,GAAoBN,aAAS,YAAM;IAChC,OAAA,CAAA,EAAA,CAAA,MAAA,CACFJ,IADE,EAEL,SAAA,CAAA,EAAA;MACE,aAAeD,EAAAA,OAAOE,KAAP,CAAaU,QAAAA;AAD9B,KAFK,CAAA,CAAA;AAMR,IAPK,CAAA;;EASA,IAAAC,iBAAA,GAAoB,SAApBA,iBAAoB,CAACC,GAAD,EAAcC,QAAd,EAAkD;AAEpE,IAAA,IAAAC,iBAAA,GAAoB,SAApBA,iBAAoB,CAACC,GAAD,EAA6B;MACrD,IAAIA,GAAQ,KAAA,KAAA,CAAR,IAAqB,CAACC,KAAA,CAAMD,GAAN,CAA1B,EAAsC;QACpCF,QAAA,CAASE,GAAT,CAAA,CAAA;AACF,OAAA;KAHI,CAAA;;IAMJ,OACMb,eAAAA,CAAAA,6BAAAA,EAAAA,cAAAA,CAAAA,gBAAA,CAAiBF,KADvB,EAAA;MAAA,OAESS,EAAAA,iBAAkB,CAAAT,KAF3B;AAAA,MAAA,OAAA,EAGSY,GAHT;AAAA,MAAA,MAAA,EAIQd,MAAA,CAAOE,KAAP,CAAaiB,IAJrB;AAAA,MAAA,UAAA,EAKYH,iBALZ;AAAA,MAAA,UAAA,EAMYhB,MAAO,CAAAE,KAAP,CAAakB,QANzB;AAAA,MAAA,KAAA,EAOOpB,MAAO,CAAAE,KAAP,CAAamB,GAPpB;MAAA,KAQOrB,EAAAA,MAAO,CAAAE,KAAP,CAAaoB,GAAAA;AARpB,KAAA,CAAA,EAAA,IAAA,CAAA,CAAA;GARE,CAAA;;AAqBC,EAAA,OAAAT,iBAAA,CAAA;AACT;;;;"}