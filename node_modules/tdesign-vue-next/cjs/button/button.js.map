{"version":3,"file":"button.js","sources":["../../src/button/button.tsx"],"sourcesContent":["import { computed, defineComponent, h, ref } from 'vue';\nimport TLoading from '../loading';\nimport props from './props';\nimport useRipple from '../hooks/useRipple';\nimport { useFormDisabled } from '../form/hooks';\nimport { usePrefixClass, useCommonClassName } from '../hooks/useConfig';\nimport { useTNodeJSX, useContent } from '../hooks/tnode';\n\nexport default defineComponent({\n  name: 'TButton',\n  props,\n  setup(props, { attrs }) {\n    const renderTNodeJSX = useTNodeJSX();\n    const renderContent = useContent();\n    const COMPONENT_NAME = usePrefixClass('button');\n    const { STATUS, SIZE } = useCommonClassName();\n    const disabled = useFormDisabled();\n    const btnRef = ref<HTMLElement>();\n\n    useRipple(btnRef);\n\n    const isDisabled = computed(() => props.disabled || props.loading || disabled.value);\n    const mergeTheme = computed(() => {\n      const { theme, variant } = props;\n      if (theme) return theme;\n      if (variant === 'base') return 'primary';\n      return 'default';\n    });\n    const buttonClass = computed(() => [\n      `${COMPONENT_NAME.value}`,\n      SIZE.value[props.size],\n      `${COMPONENT_NAME.value}--variant-${props.variant}`,\n      `${COMPONENT_NAME.value}--theme-${mergeTheme.value}`,\n      {\n        [STATUS.value.disabled]: props.disabled || disabled.value,\n        [STATUS.value.loading]: props.loading,\n        [`${COMPONENT_NAME.value}--shape-${props.shape}`]: props.shape !== 'rectangle',\n        [`${COMPONENT_NAME.value}--ghost`]: props.ghost,\n        [SIZE.value.block]: props.block,\n      },\n    ]);\n\n    return () => {\n      let buttonContent = renderContent('default', 'content');\n      const icon = props.loading ? <TLoading inheritColor={true} /> : renderTNodeJSX('icon');\n      const iconOnly = icon && !buttonContent;\n\n      buttonContent = buttonContent ? <span class={`${COMPONENT_NAME.value}__text`}>{buttonContent}</span> : '';\n      if (icon) {\n        buttonContent = [icon, buttonContent];\n      }\n\n      const renderTag = () => {\n        if (!props.tag && props.href) return 'a';\n        return props.tag || 'button';\n      };\n\n      const buttonAttrs = {\n        class: [...buttonClass.value, { [`${COMPONENT_NAME.value}--icon-only`]: iconOnly }],\n        type: props.type,\n        disabled: isDisabled.value,\n        href: props.href,\n      };\n\n      return h(\n        renderTag(),\n        {\n          ref: btnRef,\n          ...attrs,\n          ...buttonAttrs,\n          onClick: props.onClick,\n        },\n        [buttonContent],\n      );\n    };\n  },\n});\n"],"names":["defineComponent","name","props","setup","attrs","renderTNodeJSX","useTNodeJSX","renderContent","useContent","COMPONENT_NAME","usePrefixClass","useCommonClassName","STATUS","SIZE","disabled","useFormDisabled","btnRef","ref","useRipple","isDisabled","computed","loading","value","mergeTheme","theme","variant","buttonClass","size","_defineProperty","shape","ghost","block","buttonContent","icon","iconOnly","_createVNode","renderTag","tag","href","buttonAttrs","type","h","onClick"],"mappings":"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"}