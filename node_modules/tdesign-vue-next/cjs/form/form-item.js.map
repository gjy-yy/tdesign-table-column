{"version":3,"file":"form-item.js","sources":["../../src/form/form-item.tsx"],"sourcesContent":["import {\n  computed,\n  defineComponent,\n  inject,\n  nextTick,\n  onBeforeUnmount,\n  onMounted,\n  provide,\n  reactive,\n  ref,\n  toRefs,\n  VNode,\n  watch,\n} from 'vue';\nimport {\n  CheckCircleFilledIcon as TdCheckCircleFilledIcon,\n  CloseCircleFilledIcon as TdCloseCircleFilledIcon,\n  ErrorCircleFilledIcon as TdErrorCircleFilledIcon,\n} from 'tdesign-icons-vue-next';\n\nimport cloneDeep from 'lodash/cloneDeep';\nimport lodashGet from 'lodash/get';\nimport lodashSet from 'lodash/set';\nimport isNil from 'lodash/isNil';\nimport lodashTemplate from 'lodash/template';\nimport { validate } from './form-model';\nimport {\n  AllValidateResult,\n  Data,\n  FormErrorMessage,\n  FormItemValidateMessage,\n  FormRule,\n  ValidateTriggerType,\n  ValueType,\n} from './type';\nimport props from './form-item-props';\nimport {\n  AnalysisValidateResult,\n  ErrorListType,\n  FormInjectionKey,\n  FormItemContext,\n  FormItemInjectionKey,\n  SuccessListType,\n  useCLASSNAMES,\n  ValidateStatus,\n} from './const';\n\nimport { useConfig, usePrefixClass, useTNodeJSX } from '../hooks';\nimport { useGlobalIcon } from '../hooks/useGlobalIcon';\n\ntype IconConstructor = typeof TdErrorCircleFilledIcon;\n\nexport type FormItemValidateResult<T extends Data = Data> = { [key in keyof T]: boolean | AllValidateResult[] };\n\nexport default defineComponent({\n  name: 'TFormItem',\n\n  props: { ...props },\n  setup(props, { slots }) {\n    const renderContent = useTNodeJSX();\n    const CLASS_NAMES = useCLASSNAMES();\n    const { globalConfig } = useConfig('form');\n    const { CheckCircleFilledIcon, CloseCircleFilledIcon, ErrorCircleFilledIcon } = useGlobalIcon({\n      CheckCircleFilledIcon: TdCheckCircleFilledIcon,\n      CloseCircleFilledIcon: TdCloseCircleFilledIcon,\n      ErrorCircleFilledIcon: TdErrorCircleFilledIcon,\n    });\n    const form = inject(FormInjectionKey, undefined);\n\n    const FORM_ITEM_CLASS_PREFIX = usePrefixClass('form-item__');\n\n    const needRequiredMark = computed(() => {\n      const { requiredMark } = props;\n      if (typeof requiredMark === 'boolean') return requiredMark;\n      const parentRequiredMark =\n        form?.requiredMark === undefined ? globalConfig.value.requiredMark : form?.requiredMark;\n      const isRequired = innerRules.value.filter((rule) => rule.required).length > 0;\n      return Boolean(parentRequiredMark && isRequired);\n    });\n\n    const hasLabel = computed(() => slots.label || props.label);\n    const hasColon = computed(() => !!(form?.colon && hasLabel.value));\n    const FROM_LABEL = usePrefixClass('form__label');\n    const labelAlign = computed(() => (isNil(props.labelAlign) ? form?.labelAlign : props.labelAlign));\n    const labelWidth = computed(() => (isNil(props.labelWidth) ? form?.labelWidth : props.labelWidth));\n\n    const labelClasses = computed(() => [\n      CLASS_NAMES.value.label,\n      {\n        [`${FROM_LABEL.value}--required`]: needRequiredMark.value,\n        [`${FROM_LABEL.value}--colon`]: hasColon.value,\n        [`${FROM_LABEL.value}--top`]: hasLabel.value && (labelAlign.value === 'top' || !labelWidth.value),\n        [`${FROM_LABEL.value}--left`]: labelAlign.value === 'left' && labelWidth.value,\n        [`${FROM_LABEL.value}--right`]: labelAlign.value === 'right' && labelWidth.value,\n      },\n    ]);\n\n    const renderLabel = () => {\n      if (Number(labelWidth.value) === 0) return;\n\n      let labelStyle = {};\n      if (labelWidth.value && labelAlign.value !== 'top') {\n        if (typeof labelWidth.value === 'number') {\n          labelStyle = { width: `${labelWidth.value}px` };\n        } else {\n          labelStyle = { width: labelWidth.value };\n        }\n      }\n\n      return (\n        <div class={labelClasses.value} style={labelStyle}>\n          <label for={props.for}>{renderContent('label')}</label>\n        </div>\n      );\n    };\n\n    /** Suffix Icon */\n    const getDefaultIcon = (): VNode => {\n      const resultIcon = (Icon: IconConstructor) => (\n        <span class={CLASS_NAMES.value.status}>\n          <Icon />\n        </span>\n      );\n      const list = errorList.value;\n      if (verifyStatus.value === ValidateStatus.SUCCESS) {\n        return resultIcon(CheckCircleFilledIcon);\n      }\n      if (list?.[0]) {\n        const type = list[0].type || 'error';\n        const icon =\n          {\n            error: CloseCircleFilledIcon,\n            warning: ErrorCircleFilledIcon,\n          }[type] || CheckCircleFilledIcon;\n        return resultIcon(icon as IconConstructor);\n      }\n      return null;\n    };\n    const renderSuffixIcon = () => {\n      const { statusIcon } = props;\n      if (statusIcon === false) return;\n\n      let resultIcon = renderContent('statusIcon', { defaultNode: getDefaultIcon() });\n      if (resultIcon) return <span class={CLASS_NAMES.value.status}>{resultIcon}</span>;\n      if (resultIcon === false) return;\n\n      resultIcon = form?.renderContent('statusIcon', { defaultNode: getDefaultIcon() });\n      if (resultIcon) return resultIcon;\n    };\n    /** Suffix Icon END */\n\n    /** Content Style */\n    const errorClasses = computed(() => {\n      if (!showErrorMessage.value) return '';\n      if (verifyStatus.value === ValidateStatus.SUCCESS) {\n        return props.successBorder\n          ? [CLASS_NAMES.value.success, CLASS_NAMES.value.successBorder].join(' ')\n          : CLASS_NAMES.value.success;\n      }\n      if (!errorList.value.length) return;\n      const type = errorList.value[0].type || 'error';\n      return type === 'error' ? CLASS_NAMES.value.error : CLASS_NAMES.value.warning;\n    });\n    const contentClasses = computed(() => [CLASS_NAMES.value.controls, errorClasses.value]);\n    const contentStyle = computed(() => {\n      let contentStyle = {};\n      if (labelWidth.value && labelAlign.value !== 'top') {\n        if (typeof labelWidth.value === 'number') {\n          contentStyle = { marginLeft: `${labelWidth.value}px` };\n        } else {\n          contentStyle = { marginLeft: labelWidth.value };\n        }\n      }\n\n      return contentStyle;\n    });\n    /** Content Style END */\n\n    const errorList = ref<ErrorListType[]>([]);\n    const successList = ref<SuccessListType[]>([]);\n    const verifyStatus = ref(ValidateStatus.TO_BE_VALIDATED);\n    const resetValidating = ref(false);\n    const needResetField = ref(false);\n\n    const resetHandler = () => {\n      needResetField.value = false;\n      errorList.value = [];\n      successList.value = [];\n      verifyStatus.value = ValidateStatus.TO_BE_VALIDATED;\n    };\n    const getEmptyValue = (): ValueType => {\n      const type = Object.prototype.toString.call(lodashGet(form?.data, props.name));\n      let emptyValue: ValueType;\n      if (type === '[object String]') {\n        emptyValue = '';\n      }\n      if (type === '[object Array]') {\n        emptyValue = [];\n      }\n      if (type === '[object Object]') {\n        emptyValue = {};\n      }\n      return emptyValue;\n    };\n    const resetField = async (resetType: 'initial' | 'empty' | undefined = form?.resetType) => {\n      if (!props.name) return;\n\n      if (resetType === 'empty') lodashSet(form?.data, props.name, getEmptyValue());\n      else if (resetType === 'initial') lodashSet(form?.data, props.name, initialValue.value);\n\n      await nextTick();\n      if (resetValidating.value) {\n        needResetField.value = true;\n      } else {\n        resetHandler();\n      }\n    };\n\n    const errorMessages = computed<FormErrorMessage>(() => form?.errorMessage ?? globalConfig.value.errorMessage);\n    const innerRules = computed<FormRule[]>(() => {\n      if (props.rules?.length) return props.rules;\n      if (!props.name) return [];\n      const index = `${props.name}`.lastIndexOf('.') || -1;\n      const pRuleName = `${props.name}`.slice(index + 1);\n      return lodashGet(form?.rules, props.name) || lodashGet(form?.rules, pRuleName) || [];\n    });\n\n    const analysisValidateResult = async (trigger: ValidateTriggerType): Promise<AnalysisValidateResult> => {\n      const result: AnalysisValidateResult = {\n        successList: [],\n        errorList: [],\n        rules: [],\n        resultList: [],\n        allowSetValue: false,\n      };\n      result.rules =\n        trigger === 'all'\n          ? innerRules.value\n          : innerRules.value.filter((item) => (item.trigger || 'change') === trigger);\n      if (innerRules.value.length && !result.rules?.length) {\n        return result;\n      }\n      result.allowSetValue = true;\n      result.resultList = await validate(value.value, result.rules);\n      result.errorList = result.resultList\n        .filter((item) => item.result !== true)\n        .map((item: ErrorListType) => {\n          Object.keys(item).forEach((key) => {\n            if (!item.message && errorMessages.value[key]) {\n              const compiled = lodashTemplate(errorMessages.value[key]);\n              const name = typeof props.label === 'string' ? props.label : props.name;\n              item.message = compiled({\n                name,\n                validate: item[key],\n              });\n            }\n          });\n          return item;\n        });\n      // 仅有自定义校验方法才会存在 successList\n      result.successList = result.resultList.filter(\n        (item) => item.result === true && item.message && item.type === 'success',\n      ) as SuccessListType[];\n\n      return result;\n    };\n    const validateHandler = async <T extends Data = Data>(\n      trigger: ValidateTriggerType,\n      showErrorMessage?: boolean,\n    ): Promise<FormItemValidateResult<T>> => {\n      resetValidating.value = true;\n      // undefined | boolean\n      freeShowErrorMessage.value = showErrorMessage;\n      const {\n        successList: innerSuccessList,\n        errorList: innerErrorList,\n        rules,\n        resultList,\n        allowSetValue,\n      } = await analysisValidateResult(trigger);\n\n      if (allowSetValue) {\n        successList.value = innerSuccessList;\n        errorList.value = innerErrorList;\n      }\n      // 根据校验结果设置校验状态\n      if (rules.length) {\n        verifyStatus.value = innerErrorList.length ? ValidateStatus.FAIL : ValidateStatus.SUCCESS;\n      } else {\n        verifyStatus.value = ValidateStatus.TO_BE_VALIDATED;\n      }\n      // 重置处理\n      if (needResetField.value) {\n        resetHandler();\n      }\n      resetValidating.value = false;\n\n      return {\n        [props.name]: innerErrorList.length === 0 ? true : resultList,\n      } as FormItemValidateResult<T>;\n    };\n    const validateOnly = async <T extends Data>(trigger: ValidateTriggerType): Promise<FormItemValidateResult<T>> => {\n      const { errorList: innerErrorList, resultList } = await analysisValidateResult(trigger);\n\n      return {\n        [props.name]: innerErrorList.length === 0 ? true : resultList,\n      } as FormItemValidateResult<T>;\n    };\n\n    const setValidateMessage = (validateMessage: FormItemValidateMessage[]) => {\n      if (!validateMessage && !Array.isArray(validateMessage)) return;\n      if (validateMessage.length === 0) {\n        errorList.value = [];\n        verifyStatus.value = ValidateStatus.SUCCESS;\n      }\n      errorList.value = validateMessage.map((item) => ({ ...item, result: false }));\n      verifyStatus.value = ValidateStatus.FAIL;\n    };\n\n    const value = computed<ValueType>(() => form?.data && lodashGet(form?.data, props.name));\n    const initialValue = ref<ValueType>(undefined);\n    const { name } = toRefs(props);\n    const context: FormItemContext = reactive({\n      name,\n      resetHandler,\n      resetField,\n      validate: validateHandler,\n      validateOnly,\n      setValidateMessage,\n    });\n\n    onMounted(() => {\n      initialValue.value = cloneDeep(value.value);\n      form?.children.push(context);\n    });\n    onBeforeUnmount(() => {\n      if (form) form.children = form?.children.filter((ctx) => ctx !== context);\n    });\n    watch(\n      value,\n      async () => {\n        await validateHandler('change');\n      },\n      { deep: true },\n    );\n\n    const freeShowErrorMessage = ref<boolean>(undefined);\n    const showErrorMessage = computed(() => {\n      if (typeof freeShowErrorMessage.value === 'boolean') return freeShowErrorMessage.value;\n      if (typeof props.showErrorMessage === 'boolean') return props.showErrorMessage;\n      return form?.showErrorMessage;\n    });\n\n    const classes = computed(() => [\n      CLASS_NAMES.value.formItem,\n      FORM_ITEM_CLASS_PREFIX.value + (props.name || ''),\n      {\n        [CLASS_NAMES.value.formItemWithHelp]: helpNode.value,\n        [CLASS_NAMES.value.formItemWithExtra]: extraNode.value,\n      },\n    ]);\n    const helpNode = computed<VNode>(() => {\n      const help = renderContent('help');\n      if (help) return <div class={CLASS_NAMES.value.help}>{help}</div>;\n      return null;\n    });\n    const extraNode = computed<VNode>(() => {\n      const getExtraNode = (content: string) => <div class={CLASS_NAMES.value.extra}>{content}</div>;\n      const list = errorList.value;\n      if (showErrorMessage.value && list?.[0]?.message) {\n        return getExtraNode(list[0].message);\n      }\n      if (successList.value.length) {\n        return getExtraNode(successList.value[0].message);\n      }\n      return null;\n    });\n\n    const handleBlur = async () => {\n      await validateHandler('blur');\n    };\n    provide(FormItemInjectionKey, {\n      handleBlur,\n    });\n\n    return () => (\n      <div class={classes.value}>\n        {renderLabel()}\n        <div class={contentClasses.value} style={contentStyle.value}>\n          <div class={CLASS_NAMES.value.controlsContent}>\n            {renderContent('default')}\n            {renderSuffixIcon()}\n          </div>\n          {[helpNode.value, extraNode.value]}\n        </div>\n      </div>\n    );\n  },\n});\n"],"names":["defineComponent","name","props","setup","slots","renderContent","useTNodeJSX","CLASS_NAMES","useCLASSNAMES","useConfig","globalConfig","useGlobalIcon","CheckCircleFilledIcon","TdCheckCircleFilledIcon","CloseCircleFilledIcon","TdCloseCircleFilledIcon","ErrorCircleFilledIcon","TdErrorCircleFilledIcon","form","inject","FormInjectionKey","FORM_ITEM_CLASS_PREFIX","usePrefixClass","needRequiredMark","computed","requiredMark","parentRequiredMark","value","isRequired","innerRules","filter","rule","required","length","Boolean","hasLabel","label","hasColon","colon","FROM_LABEL","labelAlign","isNil","labelWidth","labelClasses","_defineProperty","renderLabel","Number","labelStyle","width","_createVNode","getDefaultIcon","resultIcon","Icon","status","list","errorList","verifyStatus","ValidateStatus","SUCCESS","type","icon","error","warning","renderSuffixIcon","statusIcon","defaultNode","errorClasses","showErrorMessage","successBorder","success","join","contentClasses","controls","contentStyle","marginLeft","ref","successList","TO_BE_VALIDATED","resetValidating","needResetField","resetHandler","getEmptyValue","Object","prototype","toString","call","lodashGet","data","emptyValue","resetField","_asyncToGenerator","_regeneratorRuntime","resetType","lodashSet","initialValue","nextTick","errorMessages","errorMessage","rules","index","lastIndexOf","pRuleName","slice","analysisValidateResult","trigger","result","resultList","allowSetValue","item","validate","map","keys","forEach","key","message","compiled","lodashTemplate","validateHandler","freeShowErrorMessage","innerSuccessList","innerErrorList","FAIL","validateOnly","setValidateMessage","validateMessage","Array","isArray","toRefs","context","reactive","onMounted","cloneDeep","children","push","onBeforeUnmount","ctx","watch","deep","classes","formItem","formItemWithHelp","helpNode","formItemWithExtra","extraNode","help","getExtraNode","content","extra","handleBlur","provide","FormItemInjectionKey","controlsContent"],"mappings":"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"}