{"version":3,"file":"group.js","sources":["../../src/avatar/group.tsx"],"sourcesContent":["import { defineComponent, provide, RendererNode } from 'vue';\nimport props from './avatar-group-props';\nimport Avatar from './avatar';\nimport { useContent, useTNodeJSX } from '../hooks/tnode';\nimport { usePrefixClass } from '../hooks/useConfig';\n\nexport default defineComponent({\n  name: 'TAvatarGroup',\n  props,\n\n  setup(props) {\n    provide('avatarGroup', props);\n    const renderContent = useContent();\n    const renderTNodeJSX = useTNodeJSX();\n\n    const AVATAR_NAME = usePrefixClass('avatar');\n    const COMPONENT_NAME = usePrefixClass('avatar-group');\n\n    const isIcon = () => {\n      const content = renderTNodeJSX('collapseAvatar');\n      return content;\n    };\n\n    const renderIcon = () => {\n      return isIcon() && typeof props.collapseAvatar !== 'string' ? props.collapseAvatar : null;\n    };\n\n    const renderEllipsisAvatar = (children: Array<RendererNode>): Array<RendererNode> => {\n      if (children?.length > props.max) {\n        const content = setEllipsisContent(children);\n        const outAvatar = children.slice(0, props.max);\n        outAvatar.push(\n          <Avatar size={props.size} icon={renderIcon()}>\n            {content}\n          </Avatar>,\n        );\n        return [outAvatar];\n      }\n      return [children];\n    };\n\n    const setEllipsisContent = (children: Array<RendererNode>) => {\n      let content = '';\n      if (props.collapseAvatar) {\n        if (!isIcon()) {\n          content = renderContent('collapseAvatar', 'content');\n        }\n      } else {\n        content = `+${children.length - props.max}`;\n      }\n      return content;\n    };\n\n    return () => {\n      const children = renderTNodeJSX('default');\n      const { cascading, max } = props;\n      const groupClass = [\n        `${COMPONENT_NAME.value}`,\n        {\n          [`${AVATAR_NAME.value}--offset-right`]: cascading === 'right-up',\n          [`${AVATAR_NAME.value}--offset-left`]: cascading === 'left-up',\n        },\n      ];\n      let content = [children];\n\n      if (max && max >= 0) {\n        content = [renderEllipsisAvatar(children)];\n      }\n      return <div class={groupClass}>{content}</div>;\n    };\n  },\n});\n"],"names":["defineComponent","name","props","setup","provide","renderContent","useContent","renderTNodeJSX","useTNodeJSX","AVATAR_NAME","usePrefixClass","COMPONENT_NAME","isIcon","content","renderIcon","collapseAvatar","renderEllipsisAvatar","children","length","max","setEllipsisContent","outAvatar","slice","push","_createVNode","Avatar","size","cascading","groupClass","value","_defineProperty"],"mappings":"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"}