{"version":3,"file":"tree-select.mjs","sources":["../../src/tree-select/tree-select.tsx"],"sourcesContent":["import { defineComponent, ref, reactive, computed, watch, onMounted, toRefs } from 'vue';\nimport isArray from 'lodash/isArray';\nimport isEmpty from 'lodash/isEmpty';\nimport isBoolean from 'lodash/isBoolean';\nimport isFunction from 'lodash/isFunction';\nimport isNil from 'lodash/isNil';\n\nimport Tree, { TreeProps, TreeNodeModel, TreeNodeValue } from '../tree';\nimport SelectInput from '../select-input';\nimport { TagInputChangeContext } from '../tag-input';\nimport { InputValue } from '../input';\nimport FakeArrow from '../common-components/fake-arrow';\n\nimport { INodeOptions } from './interface';\nimport { TreeSelectValue, TdTreeSelectProps, TreeSelectValueChangeTrigger } from './type';\nimport { TreeOptionData } from '../common';\nimport props from './props';\n\n// hooks\nimport { usePrefixClass, useConfig } from '../hooks/useConfig';\nimport { useFormDisabled } from '../form/hooks';\nimport { useTNodeJSX, useTNodeDefault } from '../hooks/tnode';\nimport useVModel from '../hooks/useVModel';\nimport useDefaultValue from '../hooks/useDefaultValue';\n\nexport default defineComponent({\n  name: 'TTreeSelect',\n  props,\n  setup(props: TdTreeSelectProps, { slots }) {\n    const renderTNodeJSX = useTNodeJSX();\n    const renderDefaultTNode = useTNodeDefault();\n    const classPrefix = usePrefixClass();\n    const { globalConfig } = useConfig('treeSelect');\n    const formDisabled = useFormDisabled();\n\n    // ref\n    const treeRef = ref(null);\n\n    // data\n    const filterByText = ref(null);\n    const actived = ref([]);\n    const expanded = ref([]);\n    const nodeInfo = ref(null);\n    const treeKey = ref(0);\n\n    // model\n    const { value, modelValue, popupVisible, inputValue } = toRefs(props);\n    const [treeSelectValue, setTreeSelectValue] = useVModel(value, modelValue, props.defaultValue, props.onChange);\n    const [innerVisible, setInnerVisible] = useDefaultValue(\n      popupVisible,\n      false,\n      props.onPopupVisibleChange,\n      'popupVisible',\n    );\n    const [innerInputValue, setInnerInputValue] = useDefaultValue(\n      inputValue,\n      props.defaultInputValue,\n      props.onInputChange,\n      'inputValue',\n    );\n\n    // watch\n    watch(treeSelectValue, async () => {\n      await changeNodeInfo();\n      if (!props.multiple) {\n        actived.value = nodeInfo.value ? [nodeInfo.value.value] : [];\n      }\n    });\n    watch(\n      () => props.data,\n      async () => {\n        await changeNodeInfo();\n        treeRerender();\n      },\n    );\n\n    // computed\n    const tDisabled = computed(() => {\n      return formDisabled.value || props.disabled;\n    });\n\n    const inputPlaceholder = computed(\n      () => (innerVisible.value && nodeInfo.value?.label) || props.placeholder || globalConfig.value.placeholder,\n    );\n\n    const popupClass = computed(() => {\n      return [\n        `${classPrefix.value}-select__dropdown-inner`,\n        `${classPrefix.value}-select__dropdown`,\n        'narrow-scrollbar',\n      ];\n    });\n\n    const isObjectValue = computed(() => props.valueType === 'object');\n\n    const checked = computed((): Array<TreeNodeValue> => {\n      if (props.multiple) {\n        if (isObjectValue.value) {\n          return isArray(treeSelectValue.value)\n            ? (treeSelectValue.value as Array<TreeSelectValue>).map((item) => (item as INodeOptions).value)\n            : [];\n        }\n        return isArray(treeSelectValue.value)\n          ? (treeSelectValue.value as Array<TreeSelectValue>).map((item) => item as TreeNodeValue)\n          : [];\n      }\n      return [];\n    });\n\n    const multiLimitDisabled = computed(() => {\n      return (\n        props.multiple &&\n        !!props.max &&\n        isArray(treeSelectValue.value) &&\n        props.max <= (treeSelectValue.value as Array<TreeSelectValue>).length\n      );\n    });\n\n    const realLabel = computed(() => {\n      if (!isEmpty(props.treeProps) && !isEmpty((props.treeProps as TreeProps).keys)) {\n        return (props.treeProps as TreeProps).keys.label || 'label';\n      }\n      return 'label';\n    });\n\n    const realValue = computed(() => {\n      if (!isEmpty(props.treeProps) && !isEmpty((props.treeProps as TreeProps).keys)) {\n        return (props.treeProps as TreeProps).keys.value || 'value';\n      }\n      return 'value';\n    });\n\n    const realChildren = computed(() => {\n      if (!isEmpty(props.treeProps) && !isEmpty((props.treeProps as TreeProps).keys)) {\n        return (props.treeProps as TreeProps).keys.children || 'children';\n      }\n      return 'children';\n    });\n\n    // timelifes\n    onMounted(async () => {\n      if (!treeSelectValue.value && props.defaultValue) {\n        await change(props.defaultValue, null, 'uncheck');\n      }\n      if (isObjectValue.value) {\n        actived.value = isArray(treeSelectValue.value)\n          ? (treeSelectValue.value as Array<TreeSelectValue>).map((item) => (item as INodeOptions).value)\n          : [(treeSelectValue.value as INodeOptions).value];\n      } else {\n        (actived.value as TreeSelectValue) = isArray(treeSelectValue.value)\n          ? treeSelectValue.value\n          : [treeSelectValue.value];\n      }\n      changeNodeInfo();\n    });\n\n    // methods\n\n    const change = (\n      valueParam: TreeSelectValue,\n      node: TreeNodeModel<TreeOptionData>,\n      trigger: TreeSelectValueChangeTrigger,\n    ) => {\n      setTreeSelectValue(valueParam, { node });\n      changeNodeInfo();\n      props.onChange?.(valueParam, { node, trigger });\n    };\n\n    const clear = (content: { e: MouseEvent }) => {\n      const defaultValue: TreeSelectValue = props.multiple ? [] : '';\n      actived.value = [];\n      change(defaultValue, null, 'clear');\n      props.onClear?.({ e: content.e });\n    };\n\n    const treeNodeChange = (\n      valueParam: Array<TreeNodeValue>,\n      context: { node: TreeNodeModel<TreeOptionData>; e: MouseEvent },\n    ) => {\n      let current: TreeSelectValue = valueParam;\n      if (isObjectValue.value) {\n        current = valueParam.map((nodeValue) => getTreeNode(props.data, nodeValue));\n      }\n      change(current, context.node, 'check');\n    };\n\n    const treeNodeActive = (\n      valueParam: Array<TreeNodeValue>,\n      context: { node: TreeNodeModel<TreeOptionData>; e: MouseEvent },\n    ) => {\n      setInnerVisible(false);\n      // 多选模式屏蔽 Active 事件\n      if (props.multiple) {\n        return;\n      }\n      // 单选模式重复选择不清空\n      if (treeSelectValue.value === context.node.data[realValue.value]) {\n        return;\n      }\n      let current: TreeSelectValue = valueParam;\n      if (isObjectValue.value) {\n        const nodeValue = isEmpty(valueParam) ? '' : valueParam[0];\n        current = getTreeNode(props.data, nodeValue);\n      } else {\n        current = isEmpty(valueParam) ? '' : valueParam[0];\n      }\n      change(current, context.node, 'check');\n      actived.value = valueParam;\n    };\n\n    const treeNodeExpand = (valueParam: Array<TreeNodeValue>) => {\n      expanded.value = valueParam;\n    };\n\n    const treeNodeLoad = () => {\n      changeNodeInfo();\n    };\n\n    const inputChange = (value: InputValue): boolean => {\n      // 未打开状态不处理输入框输入\n      if (!innerVisible.value) {\n        props.onSearch?.(String(value));\n        return;\n      }\n      setInnerInputValue(value);\n      if (!value) {\n        filterByText.value = null;\n        return null;\n      }\n      filterByText.value = (node: TreeNodeModel<TreeOptionData>) => {\n        if (isFunction(props.filter)) {\n          const filter: boolean | Promise<boolean> = props.filter(String(value), node);\n          if (isBoolean(filter)) {\n            return filter;\n          }\n        }\n        return node.data[realLabel.value].indexOf(value) >= 0;\n      };\n      props.onSearch?.(String(value));\n    };\n\n    const tagChange = (value: string | number, context: TagInputChangeContext) => {\n      const { trigger, index } = context;\n      if (['tag-remove', 'backspace'].includes(trigger)) {\n        isArray(treeSelectValue.value) && (treeSelectValue.value as Array<TreeSelectValue>).splice(index, 1);\n      }\n      props.onRemove?.({ value, data: null, e: context && (context.e as MouseEvent) });\n      change(treeSelectValue.value, null, trigger as 'tag-remove' | 'backspace');\n    };\n\n    const changeNodeInfo = async () => {\n      await treeSelectValue.value;\n\n      if (!props.multiple) {\n        if (treeSelectValue.value || treeSelectValue.value === 0) {\n          nodeInfo.value = getSingleNodeInfo();\n        } else {\n          nodeInfo.value = '';\n        }\n      } else if (props.multiple) {\n        if (isArray(treeSelectValue.value)) {\n          nodeInfo.value = getMultipleNodeInfo();\n        } else {\n          nodeInfo.value = [];\n        }\n      } else {\n        nodeInfo.value = null;\n      }\n    };\n\n    const getSingleNodeInfo = () => {\n      const nodeValue = isObjectValue.value ? (treeSelectValue.value as INodeOptions).value : treeSelectValue.value;\n      if (treeRef.value && (props.treeProps as TreeProps)?.load) {\n        if (!isEmpty(props.data)) {\n          const node = treeRef.value.getItem(nodeValue);\n          if (node) {\n            return { label: node.data[realLabel.value], value: node.data[realValue.value] };\n          }\n        }\n        return { label: nodeValue, value: nodeValue };\n      }\n      const node = getTreeNode(props.data, nodeValue);\n      if (!node) {\n        return { label: nodeValue, value: nodeValue };\n      }\n      return node;\n    };\n\n    const getMultipleNodeInfo = () => {\n      return (treeSelectValue.value as Array<TreeSelectValue>).map((value) => {\n        const nodeValue = isObjectValue.value ? (value as INodeOptions).value : value;\n        if (treeRef.value && (props.treeProps as TreeProps)?.load) {\n          if (!isEmpty(props.data)) {\n            const node = treeRef.value.getItem(nodeValue);\n            if (node) {\n              return { label: node.data[realLabel.value], value: node.data[realValue.value] };\n            }\n          }\n          return { label: nodeValue, value: nodeValue };\n        }\n        const node = getTreeNode(props.data, nodeValue);\n        if (!node) {\n          return { label: nodeValue, value: nodeValue };\n        }\n        return node;\n      });\n    };\n    const getTreeNode = (data: Array<TreeOptionData>, targetValue: TreeSelectValue): TreeSelectValue | null => {\n      for (let i = 0, len = data.length; i < len; i++) {\n        if (data[i][realValue.value] === targetValue) {\n          return { label: data[i][realLabel.value], value: data[i][realValue.value] };\n        }\n        if (data[i]?.[realChildren.value]) {\n          const result = getTreeNode(data[i]?.[realChildren.value], targetValue);\n          if (!isNil(result)) {\n            return result;\n          }\n        }\n      }\n      return null;\n    };\n\n    const treeRerender = () => {\n      treeKey.value += 1;\n    };\n\n    const renderTree = () => (\n      <Tree\n        ref={treeRef}\n        v-show={!props.loading}\n        key={treeKey.value}\n        value={[...checked.value]}\n        hover\n        data={props.data}\n        activable={!props.multiple}\n        checkable={props.multiple}\n        disabled={tDisabled.value || multiLimitDisabled.value}\n        size={props.size}\n        filter={filterByText.value}\n        icon={!filterByText.value}\n        actived={actived.value}\n        expanded={expanded.value}\n        activeMultiple={props.multiple}\n        onChange={treeNodeChange}\n        onActive={treeNodeActive}\n        onExpand={treeNodeExpand}\n        onLoad={treeNodeLoad}\n        expandOnClickNode\n        v-slots={{\n          empty: () =>\n            renderDefaultTNode('empty', {\n              defaultNode: <div class={`${classPrefix.value}-select__empty`}>{globalConfig.value.empty}</div>,\n            }),\n        }}\n        {...(props.treeProps as TdTreeSelectProps['treeProps'])}\n      />\n    );\n\n    const renderSuffixIcon = () => (\n      <FakeArrow\n        isActive={innerVisible.value}\n        disabled={props.disabled}\n        overlayClassName={{\n          [`${classPrefix.value}-fake-arrow--highlight`]: innerVisible.value,\n          [`${classPrefix.value}-fake-arrow--disable`]: props.disabled,\n        }}\n      />\n    );\n\n    return () => (\n      <SelectInput\n        class={`${classPrefix.value}-tree-select`}\n        value={nodeInfo.value}\n        inputValue={innerVisible.value ? innerInputValue.value : ''}\n        popupVisible={innerVisible.value}\n        disabled={tDisabled.value}\n        multiple={props.multiple}\n        loading={props.loading}\n        clearable={props.clearable}\n        autoWidth={props.autoWidth}\n        borderless={props.borderless}\n        readonly={props.readonly}\n        placeholder={inputPlaceholder.value}\n        allowInput={props.filterable || isFunction(props.filter)}\n        minCollapsedNum={props.minCollapsedNum}\n        collapsed-items={props.collapsedItems}\n        popupProps={{\n          overlayClassName: popupClass.value,\n          ...(props.popupProps as TdTreeSelectProps['popupProps']),\n        }}\n        inputProps={{\n          size: props.size,\n          ...(props.inputProps as TdTreeSelectProps['inputProps']),\n        }}\n        tagInputProps={{\n          size: props.size,\n        }}\n        tagProps={{\n          maxWidth: 300,\n          ...(props.tagProps as TdTreeSelectProps['tagProps']),\n        }}\n        label={() => renderTNodeJSX('prefixIcon')}\n        suffixIcon={() => renderSuffixIcon()}\n        onClear={clear}\n        onBlur={(value: InputValue, context: { e: FocusEvent }) => {\n          props.onBlur?.({ value, e: context.e });\n        }}\n        onFocus={(value: InputValue, context: { e: FocusEvent }) => {\n          props.onFocus?.({ value, e: context.e });\n        }}\n        valueDisplay={() =>\n          renderTNodeJSX('valueDisplay', {\n            params: props.multiple\n              ? {\n                  value: nodeInfo.value,\n                  onClose: (value: string | number, context: TagInputChangeContext) => {\n                    tagChange(value, context);\n                  },\n                }\n              : {\n                  value: nodeInfo.value || { [realLabel.value]: '', [realValue.value]: undefined },\n                },\n          })\n        }\n        v-slots={{\n          panel: () => (\n            <div>\n              <p\n                v-show={props.loading && !tDisabled.value}\n                class={`${classPrefix.value}-select-loading-tips ${classPrefix.value}-select__right-icon-polyfill`}\n              >\n                {renderDefaultTNode('loadingText', {\n                  defaultNode: <div class={`${classPrefix.value}-select__empty`}>{globalConfig.value.loadingText}</div>,\n                })}\n              </p>\n              {renderTree()}\n            </div>\n          ),\n          collapsedItems: slots.collapsedItems,\n        }}\n        onInputChange={inputChange}\n        onTagChange={tagChange}\n        onPopupVisibleChange={(state: boolean) => setInnerVisible(state)}\n        {...(props.selectInputProps as TdTreeSelectProps['selectInputProps'])}\n      />\n    );\n  },\n});\n"],"names":["defineComponent","name","props","setup","slots","renderTNodeJSX","useTNodeJSX","renderDefaultTNode","useTNodeDefault","classPrefix","usePrefixClass","useConfig","globalConfig","formDisabled","useFormDisabled","treeRef","ref","filterByText","actived","expanded","nodeInfo","treeKey","toRefs","value","modelValue","popupVisible","inputValue","useVModel","defaultValue","onChange","treeSelectValue","setTreeSelectValue","useDefaultValue","onPopupVisibleChange","innerVisible","setInnerVisible","defaultInputValue","onInputChange","innerInputValue","setInnerInputValue","watch","_regeneratorRuntime","changeNodeInfo","multiple","data","treeRerender","tDisabled","computed","disabled","inputPlaceholder","label","placeholder","popupClass","isObjectValue","valueType","checked","isArray","map","item","multiLimitDisabled","max","length","realLabel","isEmpty","treeProps","keys","realValue","realChildren","children","onMounted","change","valueParam","node","trigger","clear","content","onClear","e","treeNodeChange","context","current","nodeValue","getTreeNode","treeNodeActive","treeNodeExpand","treeNodeLoad","inputChange","onSearch","String","isFunction","filter","isBoolean","indexOf","tagChange","index","includes","splice","onRemove","getSingleNodeInfo","getMultipleNodeInfo","load","getItem","targetValue","i","len","result","isNil","renderTree","_withDirectives","_createVNode","_mergeProps","size","empty","defaultNode","_vShow","loading","renderSuffixIcon","clearable","autoWidth","borderless","readonly","filterable","minCollapsedNum","collapsedItems","overlayClassName","popupProps","inputProps","maxWidth","tagProps","onBlur","onFocus","params","onClose","state","selectInputProps","panel","loadingText"],"mappings":"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"}