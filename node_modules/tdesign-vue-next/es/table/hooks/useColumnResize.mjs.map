{"version":3,"file":"useColumnResize.mjs","sources":["../../../src/table/hooks/useColumnResize.ts"],"sourcesContent":["import { ref, Ref, reactive, CSSProperties } from 'vue';\nimport isNumber from 'lodash/isNumber';\nimport { BaseTableCol, TableRowData } from '../type';\nimport { RecalculateColumnWidthFunc } from '../interface';\nimport setThWidthListByColumnDrag from '../../_common/js/table/set-column-width-by-drag';\nimport recalculateColumnWidth from '../../_common/js/table/recalculate-column-width';\n\nconst DEFAULT_MIN_WIDTH = 80;\nconst DEFAULT_MAX_WIDTH = 600;\n\nexport default function useColumnResize(\n  tableContentRef: Ref<HTMLDivElement>,\n  refreshTable: () => void,\n  getThWidthList: () => { [colKeys: string]: number },\n  updateThWidthList: (data: { [colKeys: string]: number }) => void,\n) {\n  const resizeLineRef = ref<HTMLDivElement>();\n  const notCalculateWidthCols = ref<string[]>([]);\n  const effectColMap = ref<{ [colKey: string]: any }>({});\n\n  // 递归查找列宽度变化后，受影响的相关列\n  const setEffectColMap = (nodes: BaseTableCol<TableRowData>[], parent: BaseTableCol<TableRowData> | null) => {\n    if (!nodes) return;\n    nodes.forEach((n, index) => {\n      const parentPrevCol = parent ? effectColMap.value[parent.colKey].prev : nodes[index + 1];\n      const parentNextCol = parent ? effectColMap.value[parent.colKey].next : nodes[index - 1];\n      const prev = index === 0 ? parentPrevCol : nodes[index - 1];\n      const next = index === nodes.length - 1 ? parentNextCol : nodes[index + 1];\n      effectColMap.value[n.colKey] = {\n        prev,\n        next,\n      };\n      setEffectColMap(n.children, n);\n    });\n  };\n\n  const resizeLineParams = {\n    isDragging: false,\n    draggingCol: null as HTMLElement,\n    draggingStart: 0,\n    effectCol: null as 'next' | 'prev' | null,\n  };\n\n  const resizeLineStyle = reactive({\n    display: 'none',\n    left: '10px',\n    height: '10px',\n    bottom: '0',\n  });\n\n  const setNotCalculateWidthCols = (colKeys: string[]) => {\n    notCalculateWidthCols.value = colKeys;\n  };\n\n  // 表格列宽拖拽事件\n  // 只在表头显示拖拽图标\n  const onColumnMouseover = (e: MouseEvent) => {\n    if (!resizeLineRef.value) return;\n\n    const target = (e.target as HTMLElement).closest('th');\n    const targetBoundRect = target.getBoundingClientRect();\n    if (!resizeLineParams.isDragging) {\n      // 当离右边框的距离不超过 8 时，显示拖拽图标\n      const distance = 8;\n      if (targetBoundRect.right - e.pageX <= distance) {\n        target.style.cursor = 'col-resize';\n        resizeLineParams.draggingCol = target;\n        resizeLineParams.effectCol = 'next';\n      } else if (e.pageX - targetBoundRect.left <= distance) {\n        const prevEl = target.previousElementSibling;\n        if (prevEl) {\n          target.style.cursor = 'col-resize';\n          resizeLineParams.draggingCol = prevEl as HTMLElement;\n          resizeLineParams.effectCol = 'prev';\n        } else {\n          target.style.cursor = '';\n          resizeLineParams.draggingCol = null;\n          resizeLineParams.effectCol = null;\n        }\n      } else {\n        target.style.cursor = '';\n        resizeLineParams.draggingCol = null;\n        resizeLineParams.effectCol = null;\n      }\n    }\n  };\n\n  // 调整表格列宽\n  const onColumnMousedown = (e: MouseEvent, col: BaseTableCol<TableRowData>) => {\n    // 非 resize 的点击，不做处理\n    if (!resizeLineParams.draggingCol) return;\n\n    const getMinMaxColWidth = (col: BaseTableCol<TableRowData>, effectPrevCol: BaseTableCol<TableRowData>) => {\n      let targetCol = null;\n      if (resizeLineParams.effectCol === 'next') {\n        targetCol = col;\n      } else {\n        targetCol = effectPrevCol;\n      }\n      const propMinWidth = isNumber(targetCol.minWidth) ? targetCol.minWidth : parseFloat(targetCol.minWidth);\n      return {\n        minColWidth: Math.max(targetCol.resize?.minWidth || DEFAULT_MIN_WIDTH, propMinWidth || DEFAULT_MIN_WIDTH),\n        maxColWidth: targetCol.resize?.maxWidth || DEFAULT_MAX_WIDTH,\n      };\n    };\n\n    const target = resizeLineParams.draggingCol;\n    const targetBoundRect = target.getBoundingClientRect();\n    const tableBoundRect = tableContentRef.value?.getBoundingClientRect();\n    const resizeLinePos = targetBoundRect.right - tableBoundRect.left;\n    const colLeft = targetBoundRect.left - tableBoundRect.left;\n    const effectNextCol = effectColMap.value[col.colKey].next;\n    const effectPrevCol = effectColMap.value[col.colKey].prev;\n    const { minColWidth, maxColWidth } = getMinMaxColWidth(col, effectPrevCol);\n    const minResizeLineLeft = colLeft + minColWidth;\n    const maxResizeLineLeft = colLeft + maxColWidth;\n\n    // 开始拖拽，记录下鼠标起始位置\n    resizeLineParams.isDragging = true;\n    resizeLineParams.draggingStart = e.x;\n\n    // 初始化 resizeLine 标记线\n    if (resizeLineRef?.value) {\n      resizeLineStyle.display = 'block';\n      resizeLineStyle.left = `${resizeLinePos}px`;\n      resizeLineStyle.height = `${tableBoundRect.bottom - targetBoundRect.top}px`;\n      const parent = tableContentRef.value.parentElement.getBoundingClientRect();\n      resizeLineStyle.bottom = `${parent.bottom - tableBoundRect.bottom}px`;\n    }\n\n    // 拖拽时鼠标可能会超出 table 范围，需要给 document 绑定拖拽相关事件\n    const onDragEnd = () => {\n      if (resizeLineParams.isDragging) {\n        // 结束拖拽，更新列宽\n        let width = Math.ceil(parseInt(resizeLineStyle.left, 10) - colLeft) || 0;\n        // 为了避免精度问题，导致 width 宽度超出 [minColWidth, maxColWidth] 的范围，需要对比目标宽度和最小/最大宽度\n        if (width <= minColWidth) {\n          width = minColWidth;\n        } else if (width >= maxColWidth) {\n          width = maxColWidth;\n        }\n        // 更新列宽\n        if (resizeLineParams.effectCol === 'next') {\n          setThWidthListByColumnDrag<BaseTableCol<TableRowData>>(\n            col,\n            width,\n            effectNextCol,\n            { getThWidthList, DEFAULT_MIN_WIDTH },\n            (updateMap, notCalculateCols) => {\n              updateThWidthList(updateMap);\n              setNotCalculateWidthCols(notCalculateCols);\n            },\n          );\n        } else if (resizeLineParams.effectCol === 'prev') {\n          setThWidthListByColumnDrag<BaseTableCol<TableRowData>>(\n            effectPrevCol,\n            width,\n            col,\n            { getThWidthList, DEFAULT_MIN_WIDTH },\n            (updateMap, notCalculateCols) => {\n              updateThWidthList(updateMap);\n              setNotCalculateWidthCols(notCalculateCols);\n            },\n          );\n        }\n\n        // 恢复设置\n        resizeLineParams.isDragging = false;\n        resizeLineParams.draggingCol = null;\n        resizeLineParams.effectCol = null;\n        target.style.cursor = '';\n        resizeLineStyle.display = 'none';\n        resizeLineStyle.left = '0';\n        document.removeEventListener('mousemove', onDragOver);\n        document.removeEventListener('mouseup', onDragEnd);\n        document.onselectstart = null;\n        document.ondragstart = null;\n      }\n\n      refreshTable();\n    };\n\n    const onDragOver = (e: MouseEvent) => {\n      // 计算新的列宽，新列宽不得小于最小列宽\n      if (resizeLineParams.isDragging) {\n        const left = resizeLinePos + e.x - resizeLineParams.draggingStart;\n        resizeLineStyle.left = `${Math.min(Math.max(left, minResizeLineLeft), maxResizeLineLeft)}px`;\n      }\n    };\n\n    document.addEventListener('mouseup', onDragEnd);\n    document.addEventListener('mousemove', onDragOver);\n\n    // 禁用鼠标的选中文字和拖放\n    document.onselectstart = () => false;\n    document.ondragstart = () => false;\n  };\n\n  const recalculateColWidth: RecalculateColumnWidthFunc = (\n    columns: BaseTableCol<TableRowData>[],\n    thWidthList: { [colKey: string]: number },\n    tableLayout: string,\n    tableElmWidth: number,\n  ): void => {\n    recalculateColumnWidth<BaseTableCol<TableRowData>>(\n      columns,\n      thWidthList,\n      tableLayout,\n      tableElmWidth,\n      notCalculateWidthCols.value,\n      (widthMap) => {\n        updateThWidthList(widthMap);\n        if (notCalculateWidthCols.value.length) {\n          notCalculateWidthCols.value = [];\n        }\n      },\n    );\n  };\n\n  return {\n    resizeLineRef,\n    resizeLineStyle,\n    onColumnMouseover,\n    onColumnMousedown,\n    recalculateColWidth,\n    setEffectColMap,\n  };\n}\n"],"names":["DEFAULT_MIN_WIDTH","DEFAULT_MAX_WIDTH","useColumnResize","tableContentRef","refreshTable","getThWidthList","updateThWidthList","resizeLineRef","ref","notCalculateWidthCols","effectColMap","setEffectColMap","nodes","parent","forEach","n","index","parentPrevCol","value","colKey","prev","parentNextCol","next","length","children","resizeLineParams","isDragging","draggingCol","draggingStart","effectCol","resizeLineStyle","reactive","display","left","height","bottom","setNotCalculateWidthCols","colKeys","onColumnMouseover","e","target","closest","targetBoundRect","getBoundingClientRect","distance","right","pageX","style","cursor","prevEl","previousElementSibling","onColumnMousedown","col","getMinMaxColWidth","effectPrevCol","targetCol","propMinWidth","isNumber","minWidth","parseFloat","minColWidth","Math","max","resize","maxColWidth","maxWidth","tableBoundRect","resizeLinePos","colLeft","effectNextCol","minResizeLineLeft","maxResizeLineLeft","x","top","parentElement","onDragEnd","width","ceil","parseInt","setThWidthListByColumnDrag","updateMap","notCalculateCols","document","removeEventListener","onDragOver","onselectstart","ondragstart","min","addEventListener","recalculateColWidth","columns","thWidthList","tableLayout","tableElmWidth","recalculateColumnWidth","widthMap"],"mappings":";;;;;;;;;;;;;;;;;;;AAOA,IAAMA,iBAAoB,GAAA,EAA1B,CAAA;AACA,IAAMC,iBAAoB,GAAA,GAA1B,CAAA;AAEA,SAAwBC,eAAxB,CACEC,eADF,EAEEC,YAFF,EAGEC,cAHF,EAIEC,iBAJF,EAKE;EACA,IAAMC,gBAAgBC,GAAoB,EAA1C,CAAA;AACM,EAAA,IAAAC,qBAAA,GAAwBD,GAAc,CAAA,EAAA,CAAtC,CAAA;AACA,EAAA,IAAAE,YAAA,GAAeF,GAA+B,CAAA,EAAA,CAA9C,CAAA;;EAGA,IAAAG,eAAA,GAAkB,SAAlBA,eAAkB,CAACC,KAAD,EAAsCC,MAAtC,EAAoF;IAC1G,IAAI,CAACD,KAAL,EAAY,OAAA;AACNA,IAAAA,KAAA,CAAAE,OAAA,CAAQ,UAACC,CAAD,EAAIC,KAAJ,EAAc;AACpB,MAAA,IAAAC,aAAA,GAAgBJ,SAASH,YAAa,CAAAQ,KAAb,CAAmBL,OAAOM,MAA1B,CAAA,CAAkCC,OAAOR,MAAMI,KAAQ,GAAA,EAAhF,CAAA;AACA,MAAA,IAAAK,aAAA,GAAgBR,SAASH,YAAa,CAAAQ,KAAb,CAAmBL,OAAOM,MAA1B,CAAA,CAAkCG,OAAOV,MAAMI,KAAQ,GAAA,EAAhF,CAAA;AACN,MAAA,IAAMI,IAAO,GAAAJ,KAAA,KAAU,CAAV,GAAcC,aAAd,GAA8BL,MAAMI,KAAQ,GAAA,EAAzD,CAAA;AACA,MAAA,IAAMM,OAAON,KAAU,KAAAJ,KAAA,CAAMW,MAAN,GAAe,CAAzB,GAA6BF,aAA7B,GAA6CT,MAAMI,KAAQ,GAAA,EAAxE,CAAA;AACaN,MAAAA,YAAA,CAAAQ,KAAA,CAAMH,EAAEI,MAAR,CAAkB,GAAA;AAC7BC,QAAAA,IAAA,EAAAA,IAD6B;AAE7BE,QAAAA,IAAA,EAAAA,IAAAA;OAFW,CAAA;AAIGX,MAAAA,eAAA,CAAAI,CAAA,CAAES,QAAF,EAAYT,CAAZ,CAAA,CAAA;KATZ,CAAA,CAAA;GAFF,CAAA;;AAeN,EAAA,IAAMU,gBAAmB,GAAA;AACvBC,IAAAA,UAAY,EAAA,KADW;AAEvBC,IAAAA,WAAa,EAAA,IAFU;AAGvBC,IAAAA,aAAe,EAAA,CAHQ;AAIvBC,IAAAA,SAAW,EAAA,IAAA;GAJb,CAAA;EAOA,IAAMC,kBAAkBC,QAAS,CAAA;AAC/BC,IAAAA,OAAS,EAAA,MADsB;AAE/BC,IAAAA,IAAM,EAAA,MAFyB;AAG/BC,IAAAA,MAAQ,EAAA,MAHuB;AAI/BC,IAAAA,MAAQ,EAAA,GAAA;AAJuB,GAAA,CAAjC,CAAA;;AAOM,EAAA,IAAAC,wBAAA,GAA2B,SAA3BA,wBAA2B,CAACC,OAAD,EAAuB;IACtD5B,qBAAA,CAAsBS,KAAtB,GAA8BmB,OAA9B,CAAA;GADI,CAAA;;AAMA,EAAA,IAAAC,iBAAA,GAAoB,SAApBA,iBAAoB,CAACC,CAAD,EAAmB;AAC3C,IAAA,IAAI,CAAChC,aAAc,CAAAW,KAAnB,EAA0B,OAAA;IAE1B,IAAMsB,MAAU,GAAAD,CAAA,CAAEC,MAAF,CAAyBC,OAAzB,CAAiC,IAAjC,CAAhB,CAAA;AACM,IAAA,IAAAC,eAAA,GAAkBF,OAAOG,qBAAP,EAAlB,CAAA;;AACF,IAAA,IAAA,CAAClB,iBAAiBC,UAAlB,EAA8B;MAEhC,IAAMkB,QAAW,GAAA,CAAjB,CAAA;;MACA,IAAIF,eAAgB,CAAAG,KAAhB,GAAwBN,CAAE,CAAAO,KAA1B,IAAmCF,QAAvC,EAAiD;AAC/CJ,QAAAA,MAAA,CAAOO,KAAP,CAAaC,MAAb,GAAsB,YAAtB,CAAA;QACAvB,gBAAA,CAAiBE,WAAjB,GAA+Ba,MAA/B,CAAA;QACAf,gBAAA,CAAiBI,SAAjB,GAA6B,MAA7B,CAAA;OAHF,MAIW,IAAAU,CAAA,CAAEO,KAAF,GAAUJ,eAAA,CAAgBT,IAA1B,IAAkCW,QAAlC,EAA4C;AACrD,QAAA,IAAMK,SAAST,MAAO,CAAAU,sBAAtB,CAAA;;AACA,QAAA,IAAID,MAAJ,EAAY;AACVT,UAAAA,MAAA,CAAOO,KAAP,CAAaC,MAAb,GAAsB,YAAtB,CAAA;UACAvB,gBAAA,CAAiBE,WAAjB,GAA+BsB,MAA/B,CAAA;UACAxB,gBAAA,CAAiBI,SAAjB,GAA6B,MAA7B,CAAA;AACK,SAJP,MAIO;AACLW,UAAAA,MAAA,CAAOO,KAAP,CAAaC,MAAb,GAAsB,EAAtB,CAAA;UACAvB,gBAAA,CAAiBE,WAAjB,GAA+B,IAA/B,CAAA;UACAF,gBAAA,CAAiBI,SAAjB,GAA6B,IAA7B,CAAA;AACF,SAAA;AACK,OAXI,MAWJ;AACLW,QAAAA,MAAA,CAAOO,KAAP,CAAaC,MAAb,GAAsB,EAAtB,CAAA;QACAvB,gBAAA,CAAiBE,WAAjB,GAA+B,IAA/B,CAAA;QACAF,gBAAA,CAAiBI,SAAjB,GAA6B,IAA7B,CAAA;AACF,OAAA;AACF,KAAA;GA5BI,CAAA;;EAgCA,IAAAsB,iBAAA,GAAoB,SAApBA,iBAAoB,CAACZ,CAAD,EAAgBa,GAAhB,EAAoD;AAAA,IAAA,IAAA,qBAAA,CAAA;;AAE5E,IAAA,IAAI,CAAC3B,gBAAiB,CAAAE,WAAtB,EAAmC,OAAA;;IAE7B,IAAA0B,iBAAA,GAAoB,SAApBA,iBAAoB,CAACD,IAAD,EAAkCE,cAAlC,EAAgF;AAAA,MAAA,IAAA,iBAAA,EAAA,kBAAA,CAAA;;MACxG,IAAIC,SAAY,GAAA,IAAhB,CAAA;;AACI,MAAA,IAAA9B,gBAAA,CAAiBI,SAAjB,KAA+B,MAA/B,EAAuC;AAC7BuB,QAAAA,SAAAA,GAAAA,IAAAA,CAAAA;AACP,OAFH,MAEG;AACOE,QAAAA,SAAAA,GAAAA,cAAAA,CAAAA;AACd,OAAA;;AACM,MAAA,IAAAE,YAAA,GAAeC,WAASF,SAAU,CAAAG,SAAnB,GAA+BH,SAAU,CAAAG,QAAzC,GAAoDC,UAAW,CAAAJ,SAAA,CAAUG,QAAV,CAA9E,CAAA;MACC,OAAA;AACLE,QAAAA,WAAA,EAAaC,KAAKC,GAAL,CAAS,sBAAAP,SAAA,CAAUQ,MAAV,MAAA,IAAA,IAAA,iBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,iBAAA,CAAkBL,QAAlB,KAA8B1D,iBAAvC,EAA0DwD,gBAAgBxD,iBAA1E,CADR;AAELgE,QAAAA,WAAA,EAAa,CAAAT,CAAAA,kBAAAA,GAAAA,SAAU,CAAAQ,MAAV,MAAA,IAAA,IAAA,kBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,kBAAA,CAAkBE,QAAlB,KAA8BhE,iBAAAA;OAFtC,CAAA;KARH,CAAA;;AAcN,IAAA,IAAMuC,SAASf,gBAAiB,CAAAE,WAAhC,CAAA;AACM,IAAA,IAAAe,eAAA,GAAkBF,OAAOG,qBAAP,EAAlB,CAAA;IACA,IAAAuB,cAAA,4BAAiB/D,eAAgB,CAAAe,KAAjC,MAAiB,IAAA,IAAA,qBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,qBAAA,CAAuByB,qBAAvB,EAAjB,CAAA;IACA,IAAAwB,aAAA,GAAgBzB,eAAgB,CAAAG,KAAhB,GAAwBqB,cAAe,CAAAjC,IAAvD,CAAA;IACA,IAAAmC,OAAA,GAAU1B,eAAgB,CAAAT,IAAhB,GAAuBiC,cAAe,CAAAjC,IAAhD,CAAA;IACN,IAAMoC,aAAgB,GAAA3D,YAAA,CAAaQ,KAAb,CAAmBkC,GAAA,CAAIjC,MAAvB,CAAA,CAA+BG,IAArD,CAAA;IACA,IAAMgC,aAAgB,GAAA5C,YAAA,CAAaQ,KAAb,CAAmBkC,GAAA,CAAIjC,MAAvB,CAAA,CAA+BC,IAArD,CAAA;;AACA,IAAA,IAAA,kBAAA,GAAqCiC,iBAAA,CAAkBD,GAAlB,EAAuBE,aAAvB,CAArC;QAAQM,WAAR,sBAAQA,WAAR;QAAqBI,WAArB,sBAAqBA,WAArB,CAAA;;AACA,IAAA,IAAMM,oBAAoBF,OAAU,GAAAR,WAApC,CAAA;AACA,IAAA,IAAMW,oBAAoBH,OAAU,GAAAJ,WAApC,CAAA;IAGAvC,gBAAA,CAAiBC,UAAjB,GAA8B,IAA9B,CAAA;AACAD,IAAAA,gBAAA,CAAiBG,aAAjB,GAAiCW,CAAE,CAAAiC,CAAnC,CAAA;;AAGA,IAAA,IAAIjE,aAAJ,KAAIA,IAAAA,IAAAA,aAAJ,eAAIA,cAAeW,KAAnB,EAA0B;MACxBY,eAAA,CAAgBE,OAAhB,GAA0B,OAA1B,CAAA;MACAF,eAAA,CAAgBG,IAAhB,GAAA,EAAA,CAAA,MAAA,CAA0BkC,aAA1B,EAAA,IAAA,CAAA,CAAA;MACArC,eAAA,CAAgBI,MAAhB,GAA4BgC,EAAAA,CAAAA,MAAAA,CAAAA,cAAe,CAAA/B,MAAf,GAAwBO,eAAgB,CAAA+B,GAApE,EAAA,IAAA,CAAA,CAAA;MACA,IAAM5D,MAAS,GAAAV,eAAA,CAAgBe,KAAhB,CAAsBwD,aAAtB,CAAoC/B,qBAApC,EAAf,CAAA;MACAb,eAAA,CAAgBK,MAAhB,GAA4BtB,EAAAA,CAAAA,MAAAA,CAAAA,MAAO,CAAAsB,MAAP,GAAgB+B,cAAe,CAAA/B,MAA3D,EAAA,IAAA,CAAA,CAAA;AACF,KAAA;;AAGA,IAAA,IAAMwC,YAAY,SAAZA,SAAY,GAAM;MACtB,IAAIlD,iBAAiBC,UAArB,EAAiC;AAE3B,QAAA,IAAAkD,KAAA,GAAQf,KAAKgB,IAAL,CAAUC,QAAA,CAAShD,gBAAgBG,IAAzB,EAA+B,EAA/B,CAAA,GAAqCmC,OAA/C,KAA2D,CAAnE,CAAA;;QAEJ,IAAIQ,SAAShB,WAAb,EAA0B;AAChBgB,UAAAA,KAAA,GAAAhB,WAAA,CAAA;AACV,SAFA,MAEA,IAAWgB,SAASZ,WAApB,EAAiC;AACvBY,UAAAA,KAAA,GAAAZ,WAAA,CAAA;AACV,SAAA;;AAEI,QAAA,IAAAvC,gBAAA,CAAiBI,SAAjB,KAA+B,MAA/B,EAAuC;AACzCkD,UAAAA,0BAAA,CACE3B,GADF,EAEEwB,KAFF,EAGEP,aAHF,EAIE;AAAEhE,YAAAA,gBAAAA,cAAF;AAAkBL,YAAAA,iBAAkB,EAAlBA,iBAAAA;AAAlB,WAJF,EAKE,UAACgF,SAAD,EAAYC,gBAAZ,EAAiC;YAC/B3E,iBAAA,CAAkB0E,SAAlB,CAAA,CAAA;YACA5C,wBAAA,CAAyB6C,gBAAzB,CAAA,CAAA;AACF,WARF,CAAA,CAAA;AAUF,SAXI,MAWJ,IAAWxD,gBAAiB,CAAAI,SAAjB,KAA+B,MAA1C,EAAkD;AAChDkD,UAAAA,0BAAA,CACEzB,aADF,EAEEsB,KAFF,EAGExB,GAHF,EAIE;AAAE/C,YAAAA,gBAAAA,cAAF;AAAkBL,YAAAA,iBAAkB,EAAlBA,iBAAAA;AAAlB,WAJF,EAKE,UAACgF,SAAD,EAAYC,gBAAZ,EAAiC;YAC/B3E,iBAAA,CAAkB0E,SAAlB,CAAA,CAAA;YACA5C,wBAAA,CAAyB6C,gBAAzB,CAAA,CAAA;AACF,WARF,CAAA,CAAA;AAUF,SAAA;;QAGAxD,gBAAA,CAAiBC,UAAjB,GAA8B,KAA9B,CAAA;QACAD,gBAAA,CAAiBE,WAAjB,GAA+B,IAA/B,CAAA;QACAF,gBAAA,CAAiBI,SAAjB,GAA6B,IAA7B,CAAA;AACAW,QAAAA,MAAA,CAAOO,KAAP,CAAaC,MAAb,GAAsB,EAAtB,CAAA;QACAlB,eAAA,CAAgBE,OAAhB,GAA0B,MAA1B,CAAA;QACAF,eAAA,CAAgBG,IAAhB,GAAuB,GAAvB,CAAA;AACSiD,QAAAA,QAAA,CAAAC,mBAAA,CAAoB,WAApB,EAAiCC,UAAjC,CAAA,CAAA;AACAF,QAAAA,QAAA,CAAAC,mBAAA,CAAoB,SAApB,EAA+BR,SAA/B,CAAA,CAAA;QACTO,QAAA,CAASG,aAAT,GAAyB,IAAzB,CAAA;QACAH,QAAA,CAASI,WAAT,GAAuB,IAAvB,CAAA;AACF,OAAA;;MAEalF,YAAA,EAAA,CAAA;KAhDf,CAAA;;AAmDM,IAAA,IAAAgF,UAAA,GAAa,SAAbA,UAAa,CAAC7C,EAAD,EAAmB;MAEpC,IAAId,iBAAiBC,UAArB,EAAiC;QAC/B,IAAMO,IAAO,GAAAkC,aAAA,GAAgB5B,EAAE,CAAAiC,CAAlB,GAAsB/C,gBAAiB,CAAAG,aAApD,CAAA;AACgBE,QAAAA,eAAA,CAAAG,IAAA,GAAA,EAAA,CAAA,MAAA,CAAU4B,IAAK,CAAA0B,GAAL,CAAS1B,KAAKC,GAAL,CAAS7B,IAAT,EAAeqC,iBAAf,CAAT,EAA4CC,iBAA5C,CAAV,EAAA,IAAA,CAAA,CAAA;AAClB,OAAA;KALI,CAAA;;AAQGW,IAAAA,QAAA,CAAAM,gBAAA,CAAiB,SAAjB,EAA4Bb,SAA5B,CAAA,CAAA;AACAO,IAAAA,QAAA,CAAAM,gBAAA,CAAiB,WAAjB,EAA8BJ,UAA9B,CAAA,CAAA;;IAGTF,QAAA,CAASG,aAAT,GAAyB,YAAA;AAAA,MAAA,OAAM,KAAN,CAAA;KAAzB,CAAA;;IACAH,QAAA,CAASI,WAAT,GAAuB,YAAA;AAAA,MAAA,OAAM,KAAN,CAAA;KAAvB,CAAA;GA3GI,CAAA;;AA8GN,EAAA,IAAMG,mBAAkD,GAAA,SAAlDA,mBAAkD,CACtDC,OADsD,EAEtDC,WAFsD,EAGtDC,WAHsD,EAItDC,aAJsD,EAK7C;AACTC,IAAAA,sBAAA,CACEJ,OADF,EAEEC,WAFF,EAGEC,WAHF,EAIEC,aAJF,EAKEpF,qBAAsB,CAAAS,KALxB,EAME,UAAC6E,QAAD,EAAc;MACZzF,iBAAA,CAAkByF,QAAlB,CAAA,CAAA;;AACI,MAAA,IAAAtF,qBAAA,CAAsBS,KAAtB,CAA4BK,MAA5B,EAAoC;QACtCd,qBAAA,CAAsBS,KAAtB,GAA8B,EAA9B,CAAA;AACF,OAAA;AACF,KAXF,CAAA,CAAA;GANF,CAAA;;EAqBO,OAAA;AACLX,IAAAA,aAAA,EAAAA,aADK;AAELuB,IAAAA,eAAA,EAAAA,eAFK;AAGLQ,IAAAA,iBAAA,EAAAA,iBAHK;AAILa,IAAAA,iBAAA,EAAAA,iBAJK;AAKLsC,IAAAA,mBAAA,EAAAA,mBALK;AAML9E,IAAAA,eAAA,EAAAA,eAAAA;GANK,CAAA;AAQT;;;;"}