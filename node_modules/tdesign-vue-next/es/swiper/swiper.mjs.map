{"version":3,"file":"swiper.mjs","sources":["../../src/swiper/swiper.tsx"],"sourcesContent":["import { defineComponent, ref, computed, watch, isVNode, onMounted, cloneVNode } from 'vue';\nimport { ChevronLeftIcon as TdChevronLeftIcon, ChevronRightIcon as TdChevronRightIcon } from 'tdesign-icons-vue-next';\n\nimport { usePrefixClass } from '../hooks/useConfig';\nimport { useGlobalIcon } from '../hooks/useGlobalIcon';\nimport { useChildComponentSlots } from '../hooks';\nimport props from './props';\nimport { SwiperNavigation, SwiperChangeSource } from './type';\nimport TSwiperItem from './swiper-item';\n\nconst defaultNavigation: SwiperNavigation = {\n  placement: 'inside',\n  showSlideBtn: 'always',\n  size: 'medium',\n  type: 'bars',\n};\n\nexport default defineComponent({\n  name: 'TSwiper',\n  props: { ...props },\n  setup(props) {\n    const prefix = usePrefixClass();\n    const { ChevronLeftIcon, ChevronRightIcon } = useGlobalIcon({\n      ChevronLeftIcon: TdChevronLeftIcon,\n      ChevronRightIcon: TdChevronRightIcon,\n    });\n    let swiperTimer = 0;\n    let swiperSwitchingTimer = 0;\n    let isBeginToEnd = false;\n    let isEndToBegin = false;\n    const currentIndex = ref(props.current || props.defaultCurrent);\n    const isHovering = ref(false);\n    const isSwitching = ref(false);\n    const showArrow = ref(false);\n    const swiperWrap = ref<HTMLElement>();\n    const getChildComponentByName = useChildComponentSlots();\n\n    const swiperItemLength = ref(0);\n    const navigationConfig = computed(() => {\n      return {\n        ...defaultNavigation,\n        ...(isVNode(props.navigation) ? {} : (props.navigation as object)),\n      };\n    });\n    const isEnd = computed(() => {\n      if (props.type === 'card') {\n        return !props.loop && currentIndex.value + 1 >= swiperItemLength.value;\n      }\n      return !props.loop && currentIndex.value + 2 >= swiperItemLength.value;\n    });\n    const propsToUpdateSetTimer = computed(() => {\n      return [props.autoplay, currentIndex.value, props.duration, props.interval];\n    });\n    const swiperWrapClass = computed(() => {\n      return {\n        [`${prefix.value}-swiper__wrap`]: true,\n        [`${prefix.value}-swiper--inside`]: navigationConfig.value.placement === 'inside',\n        [`${prefix.value}-swiper--outside`]: navigationConfig.value.placement === 'outside',\n        [`${prefix.value}-swiper--vertical`]: props.direction === 'vertical',\n        [`${prefix.value}-swiper--large`]: navigationConfig.value.size === 'large',\n        [`${prefix.value}-swiper--small`]: navigationConfig.value.size === 'small',\n      };\n    });\n    const containerStyle = computed(() => {\n      const offsetHeight = props.height ? `${props.height}px` : `${getWrapAttribute('offsetHeight')}px`;\n      if (props.type === 'card' || props.animation === 'fade') {\n        return {\n          height: offsetHeight,\n        };\n      }\n      if (props.animation === 'slide') {\n        const style: Record<string, number | string> = {\n          transition: isSwitching.value ? `transform ${props.duration / 1000}s ease` : '',\n        };\n        let active = currentIndex.value;\n        if (swiperItemLength.value > 1) {\n          active += 1;\n          if (isBeginToEnd || isEndToBegin) {\n            style.transition = '';\n          }\n        }\n        if (props.direction === 'vertical') {\n          style.height = offsetHeight;\n          style.transform = `translate3d(0, -${active * 100}%, 0px)`;\n        } else {\n          style.transform = `translate3d(-${active * 100}%, 0px, 0px)`;\n        }\n        ['msTransform', 'WebkitTransform'].forEach((key) => {\n          style[key] = style.transform;\n        });\n        return style;\n      }\n      return {};\n    });\n    const swiperItems = () => {\n      const swiperItemList = getChildComponentByName('SwiperItem');\n      swiperItemLength.value = swiperItemList.length;\n      const items = swiperItemList.map((swiperItem: any, index) => {\n        const p = { ...props, ...swiperItem.props };\n        return (\n          <TSwiperItem\n            index={index}\n            currentIndex={currentIndex.value}\n            isSwitching={isSwitching.value}\n            getWrapAttribute={getWrapAttribute}\n            swiperItemLength={swiperItemLength.value}\n            {...p}\n          >\n            {swiperItem.children.default()}\n          </TSwiperItem>\n        );\n      });\n      if (props.animation === 'slide' && items.length > 1) {\n        const first = cloneVNode(items[0], {\n          key: `swiper-item-append-${0}`,\n        });\n        const last = cloneVNode(items[items.length - 1], {\n          key: `swiper-item-prepend-${items.length - 1}`,\n        });\n        items.unshift(last);\n        items.push(first);\n      }\n      return items;\n    };\n\n    const swiperTo = (index: number, context: { source: SwiperChangeSource }) => {\n      let targetIndex = index % swiperItemLength.value;\n      props.onChange?.(targetIndex, context);\n      isSwitching.value = true;\n      if (props.animation === 'slide' && swiperItemLength.value > 1) {\n        targetIndex = index;\n        isBeginToEnd = false;\n        isEndToBegin = false;\n        if (index >= swiperItemLength.value) {\n          clearTimer();\n          setTimeout(() => {\n            isEndToBegin = true;\n            currentIndex.value = 0;\n          }, props.duration);\n        }\n        if (currentIndex.value === 0) {\n          if ((swiperItemLength.value > 2 && index !== 1) || (swiperItemLength.value === 2 && index === 0)) {\n            targetIndex = -1;\n            clearTimer();\n            setTimeout(() => {\n              isBeginToEnd = true;\n              currentIndex.value = swiperItemLength.value - 1;\n            }, props.duration);\n          }\n        }\n      }\n      currentIndex.value = targetIndex;\n    };\n    const clearTimer = () => {\n      if (swiperTimer) {\n        clearTimeout(swiperTimer);\n        swiperTimer = 0;\n      }\n    };\n    const setTimer = () => {\n      if (props.autoplay && props.interval > 0) {\n        clearTimer();\n        swiperTimer = setTimeout(\n          () => {\n            swiperTo(currentIndex.value + 1, { source: 'autoplay' });\n          },\n          currentIndex.value === 0 ? props.interval - (props.duration + 50) : props.interval, // 当 index 为 0 的时候，表明刚从克隆的最后一项跳转过来，已经经历了duration + 50 的间隔时间，减去即可\n        ) as unknown as number;\n      }\n    };\n\n    const onMouseEnter = () => {\n      isHovering.value = true;\n      if (props.stopOnHover) {\n        clearTimer();\n      }\n      if (navigationConfig.value.showSlideBtn === 'hover') {\n        showArrow.value = true;\n      }\n    };\n    const onMouseLeave = () => {\n      isHovering.value = false;\n      if (!isEnd.value) {\n        setTimer();\n      }\n      if (navigationConfig.value.showSlideBtn === 'hover') {\n        showArrow.value = false;\n      }\n    };\n    const onMouseEnterNavigationItem = (i: number) => {\n      swiperTo(i, { source: 'hover' });\n    };\n    const onClickNavigationItem = (i: number) => {\n      swiperTo(i, { source: 'click' });\n    };\n    const goNext = (context: { source: SwiperChangeSource }) => {\n      if (isSwitching.value) return;\n      if (props.type === 'card') {\n        return swiperTo(currentIndex.value + 1 >= swiperItemLength.value ? 0 : currentIndex.value + 1, context);\n      }\n      return swiperTo(currentIndex.value + 1, context);\n    };\n    const goPrevious = (context: { source: SwiperChangeSource }) => {\n      if (isSwitching.value) return;\n      if (currentIndex.value - 1 < 0) {\n        if (props.animation === 'slide' && swiperItemLength.value === 2) {\n          return swiperTo(0, context);\n        }\n        return swiperTo(swiperItemLength.value - 1, context);\n      }\n      return swiperTo(currentIndex.value - 1, context);\n    };\n    const getWrapAttribute = (attr: string) => {\n      return swiperWrap.value?.parentNode?.[attr];\n    };\n    const renderPagination = () => {\n      const fractionIndex = currentIndex.value + 1 > swiperItemLength.value ? 1 : currentIndex.value + 1;\n      return (\n        <div class={`${prefix.value}-swiper__arrow`}>\n          <div class={`${prefix.value}-swiper__arrow-left`} onClick={() => goPrevious({ source: 'click' })}>\n            <ChevronLeftIcon />\n          </div>\n          <div class={`${prefix.value}-swiper__navigation-text-fraction`}>\n            {fractionIndex}/{swiperItemLength.value}\n          </div>\n          <div class={`${prefix.value}-swiper__arrow-right`} onClick={() => goNext({ source: 'click' })}>\n            <ChevronRightIcon />\n          </div>\n        </div>\n      );\n    };\n    const renderArrow = () => {\n      if (!showArrow.value) return null;\n      return (\n        <div class={[`${prefix.value}-swiper__arrow`, `${prefix.value}-swiper__arrow--default`]}>\n          <div class={`${prefix.value}-swiper__arrow-left`} onClick={() => goPrevious({ source: 'click' })}>\n            <ChevronLeftIcon />\n          </div>\n          <div class={`${prefix.value}-swiper__arrow-right`} onClick={() => goNext({ source: 'click' })}>\n            <ChevronRightIcon />\n          </div>\n        </div>\n      );\n    };\n    const renderNavigation = () => {\n      if (isVNode(props.navigation)) return props.navigation;\n      if (navigationConfig.value.type === 'fraction') {\n        return (\n          <div class={[`${prefix.value}-swiper__navigation`, `${prefix.value}-swiper__navigation--fraction`]}>\n            {renderPagination()}\n          </div>\n        );\n      }\n      const swiperItemList = getChildComponentByName('SwiperItem');\n      return (\n        <ul\n          class={[\n            `${prefix.value}-swiper__navigation`,\n            {\n              [`${prefix.value}-swiper__navigation-bars`]: navigationConfig.value.type === 'bars',\n              [`${prefix.value}-swiper__navigation-dots`]: navigationConfig.value.type === 'dots',\n              [`${prefix.value}-swiper__navigation-dots-bar`]: navigationConfig.value.type === 'dots-bar',\n            },\n          ]}\n        >\n          {swiperItemList.map((_, i: number) => (\n            <li\n              key={i}\n              class={[\n                `${prefix.value}-swiper__navigation-item`,\n                {\n                  [`${prefix.value}-is-active`]: i === currentIndex.value,\n                },\n              ]}\n              onMouseenter={() => onMouseEnterNavigationItem(i)}\n              onClick={() => onClickNavigationItem(i)}\n            >\n              <span></span>\n            </li>\n          ))}\n        </ul>\n      );\n    };\n    const renderSwiperItems = () => {\n      return swiperItems();\n    };\n\n    watch(\n      () => propsToUpdateSetTimer.value,\n      () => {\n        setTimer();\n      },\n    );\n    watch(\n      () => isSwitching.value,\n      () => {\n        if (isSwitching.value) {\n          if (swiperSwitchingTimer) clearTimeout(swiperSwitchingTimer);\n          swiperSwitchingTimer = setTimeout(() => {\n            isSwitching.value = false;\n            swiperSwitchingTimer = 0;\n            if (isEnd.value) {\n              clearTimer();\n            }\n          }, props.duration + 50) as unknown as number;\n        }\n      },\n    );\n    watch(\n      () => props.current,\n      () => {\n        swiperTo(props.current, { source: 'autoplay' });\n      },\n    );\n\n    onMounted(() => {\n      setTimer();\n      showArrow.value = navigationConfig.value.showSlideBtn === 'always';\n    });\n\n    return () => (\n      <div class={[`${prefix.value}-swiper`]} onMouseenter={onMouseEnter} onMouseLeave={onMouseLeave} ref={swiperWrap}>\n        <div class={swiperWrapClass.value}>\n          <div\n            class={[\n              `${prefix.value}-swiper__content`,\n              {\n                [`${prefix.value}-swiper-fade`]: props.animation === 'fade',\n                [`${prefix.value}-swiper-card`]: props.type === 'card',\n              },\n            ]}\n          >\n            <div class={`${prefix.value}-swiper__container`} style={containerStyle.value}>\n              {renderSwiperItems()}\n            </div>\n          </div>\n          {renderNavigation()}\n          {renderArrow()}\n        </div>\n      </div>\n    );\n  },\n});\n"],"names":["defaultNavigation","placement","showSlideBtn","size","type","defineComponent","name","props","setup","prefix","usePrefixClass","useGlobalIcon","ChevronLeftIcon","TdChevronLeftIcon","ChevronRightIcon","TdChevronRightIcon","swiperTimer","swiperSwitchingTimer","isBeginToEnd","isEndToBegin","currentIndex","ref","current","defaultCurrent","isHovering","isSwitching","showArrow","swiperWrap","getChildComponentByName","useChildComponentSlots","swiperItemLength","navigationConfig","computed","isVNode","navigation","isEnd","loop","value","propsToUpdateSetTimer","autoplay","duration","interval","swiperWrapClass","direction","containerStyle","offsetHeight","height","getWrapAttribute","animation","style","transition","active","transform","forEach","key","swiperItems","swiperItemList","length","items","map","swiperItem","index","p","_createVNode","TSwiperItem","_mergeProps","children","first","cloneVNode","last","unshift","push","swiperTo","context","targetIndex","onChange","clearTimer","setTimeout","clearTimeout","setTimer","source","onMouseEnter","stopOnHover","onMouseLeave","onMouseEnterNavigationItem","i","onClickNavigationItem","goNext","goPrevious","attr","parentNode","renderPagination","fractionIndex","renderArrow","renderNavigation","_","renderSwiperItems","watch","onMounted"],"mappings":"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"}