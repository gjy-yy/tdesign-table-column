{"version":3,"file":"ImageViewerModal.mjs","sources":["../../../src/image-viewer/base/ImageViewerModal.tsx"],"sourcesContent":["import { computed, defineComponent, PropType } from 'vue';\nimport { CloseIcon } from 'tdesign-icons-vue-next';\nimport TDialog from '../../dialog';\nimport TImageItem from './ImageItem';\nimport TImageViewerUtils from './ImageViewerUtils';\nimport { usePrefixClass } from '../../hooks/useConfig';\nimport { useTNodeJSX } from '../../hooks/tnode';\nimport { ImageInfo, TdImageViewerProps } from '../type';\nimport props from '../props';\n\nexport default defineComponent({\n  name: 'TImageViewerModal',\n  props: {\n    zIndex: Number,\n    visible: Boolean,\n    index: Number,\n    images: props.images,\n    scale: Number,\n    rotate: Number,\n    mirror: Number,\n    currentImage: {\n      type: Object as PropType<ImageInfo>,\n      default() {\n        return {};\n      },\n    },\n    onRotate: Function as PropType<() => void>,\n    onZoomIn: Function as PropType<() => void>,\n    onZoomOut: Function as PropType<() => void>,\n    onMirror: Function as PropType<() => void>,\n    onReset: Function as PropType<() => void>,\n    onClose: props.onClose,\n    draggable: {\n      type: Boolean,\n      default: true,\n    },\n    viewerScale: {\n      type: Object as PropType<TdImageViewerProps['viewerScale']>,\n      default() {\n        return {};\n      },\n    },\n    showOverlay: Boolean,\n    closeBtn: props.closeBtn,\n  },\n  setup(props) {\n    const classPrefix = usePrefixClass();\n    const renderJSX = useTNodeJSX();\n    const style = computed(() => ({\n      minWidth: props.viewerScale.minWidth,\n      minHeight: props.viewerScale.minHeight,\n    }));\n\n    return () => (\n      <TDialog\n        destroyOnClose\n        attach=\"body\"\n        onClose={props.onClose}\n        visible={props.visible}\n        placement=\"center\"\n        mode=\"modeless\"\n        width={1000}\n        cancelBtn={null}\n        confirmBtn={null}\n        closeBtn={false}\n        draggable={props.draggable}\n        zIndex={props.zIndex}\n        showOverlay={props.showOverlay}\n        class={`${classPrefix.value}-image-viewer__dialog`}\n        header={() => (\n          <div class={`${classPrefix.value}-image-viewer__mini--header`}>\n            {`${props.index + 1}/${props.images.length}`}\n            <span\n              class={`${classPrefix.value}-image-viewer__mini--close`}\n              onClick={(e: MouseEvent) => {\n                props.onClose({ e, trigger: 'close-btn' });\n              }}\n            >\n              {renderJSX('closeBtn', <CloseIcon size=\"1.5rem\" />)}\n            </span>\n          </div>\n        )}\n        footer={() => (\n          <div class={`${classPrefix.value}-image-viewer-mini__footer`}>\n            <TImageViewerUtils\n              onZoomIn={props.onZoomIn}\n              onZoomOut={props.onZoomOut}\n              scale={props.scale}\n              currentImage={props.currentImage}\n              onRotate={props.onRotate}\n              onMirror={props.onMirror}\n              onReset={props.onReset}\n            />\n          </div>\n        )}\n      >\n        <div class={`${classPrefix.value}-image-viewer-mini__content`} style={style.value}>\n          <TImageItem\n            rotate={props.rotate}\n            scale={props.scale}\n            mirror={props.mirror}\n            src={props.currentImage.mainImage}\n            placementSrc={props.currentImage.thumbnail}\n          />\n        </div>\n      </TDialog>\n    );\n  },\n});\n"],"names":["defineComponent","name","props","zIndex","Number","visible","Boolean","index","images","scale","rotate","mirror","currentImage","type","Object","onRotate","Function","onZoomIn","onZoomOut","onMirror","onReset","onClose","draggable","viewerScale","showOverlay","closeBtn","setup","classPrefix","usePrefixClass","renderJSX","useTNodeJSX","style","computed","minWidth","minHeight","_createVNode","TDialog","value","length","e","trigger","mainImage","thumbnail"],"mappings":"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"}