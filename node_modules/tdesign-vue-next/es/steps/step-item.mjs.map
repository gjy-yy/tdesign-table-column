{"version":3,"file":"step-item.mjs","sources":["../../src/steps/step-item.tsx"],"sourcesContent":["import { computed, defineComponent, h, inject } from 'vue';\nimport isFunction from 'lodash/isFunction';\nimport { CheckIcon as TdCheckIcon, CloseIcon as TdCloseIcon } from 'tdesign-icons-vue-next';\n\nimport props from './step-item-props';\nimport { SlotReturnValue } from '../common';\nimport { useConfig, usePrefixClass } from '../hooks/useConfig';\nimport { useGlobalIcon } from '../hooks/useGlobalIcon';\nimport { useTNodeJSX, useContent } from '../hooks';\n\nexport default defineComponent({\n  name: 'TStepItem',\n  props: { ...props, index: Number },\n\n  setup(props) {\n    const stepsState = inject('StepsState', undefined);\n    const stepsProps = inject('StepsProps', undefined);\n\n    const { globalConfig } = useConfig('steps');\n    const { CheckIcon, CloseIcon } = useGlobalIcon({ CheckIcon: TdCheckIcon, CloseIcon: TdCloseIcon });\n    const canClick = computed(() => {\n      return props.status !== 'process' && !stepsProps?.readonly;\n    });\n\n    // when props.value is undefined\n    const onStepClick = (e: MouseEvent) => {\n      if (!canClick.value) return;\n      const val = props.value === undefined ? props.index : props.value;\n      stepsState.setCurrent(val, stepsState.current, { e });\n    };\n\n    // class\n    const COMPONENT_NAME = usePrefixClass('steps-item');\n    const statusClass = computed(() => ({ [`${COMPONENT_NAME.value}--${props.status}`]: props.status }));\n    const baseClass = computed(() => [COMPONENT_NAME.value, statusClass.value]);\n    const iconClass = computed(() => [`${COMPONENT_NAME.value}__icon`, statusClass.value]);\n\n    // render\n    const renderTNodeJSX = useTNodeJSX();\n    const renderContent = useContent();\n    const renderIcon = () => {\n      let defaultIcon;\n      if (stepsProps.theme === 'default') {\n        let icon: SlotReturnValue = '';\n        switch (props.status) {\n          case 'finish':\n            icon = <CheckIcon />;\n            break;\n          case 'error':\n            if (isFunction(globalConfig.value.errorIcon)) {\n              icon = globalConfig.value.errorIcon(h);\n            } else {\n              icon = <CloseIcon />;\n            }\n            break;\n          default:\n            icon = String(props.index + 1);\n            break;\n        }\n        defaultIcon = <span class={`${COMPONENT_NAME.value}__icon--number`}>{icon}</span>;\n      }\n      return renderTNodeJSX('icon', defaultIcon);\n    };\n\n    return () => (\n      <div class={baseClass.value}>\n        <div\n          class={`${COMPONENT_NAME.value}__inner ${canClick.value ? `${COMPONENT_NAME.value}--clickable` : ''}`}\n          onClick={onStepClick}\n        >\n          <div class={iconClass.value}>{renderIcon()}</div>\n          <div class={`${COMPONENT_NAME.value}__content`}>\n            <div class={`${COMPONENT_NAME.value}__title`}>{renderTNodeJSX('title')}</div>\n            <div class={`${COMPONENT_NAME.value}__description`}>{renderContent('default', 'content')}</div>\n            <div class={`${COMPONENT_NAME.value}__extra`}>{renderTNodeJSX('extra')}</div>\n          </div>\n        </div>\n      </div>\n    );\n  },\n});\n"],"names":["defineComponent","name","props","index","Number","setup","stepsState","inject","stepsProps","useConfig","globalConfig","useGlobalIcon","CheckIcon","TdCheckIcon","CloseIcon","TdCloseIcon","canClick","computed","status","readonly","onStepClick","e","value","val","setCurrent","current","COMPONENT_NAME","usePrefixClass","statusClass","baseClass","iconClass","renderTNodeJSX","useTNodeJSX","renderContent","useContent","renderIcon","defaultIcon","theme","icon","_createVNode","isFunction","errorIcon","h","String"],"mappings":"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"}