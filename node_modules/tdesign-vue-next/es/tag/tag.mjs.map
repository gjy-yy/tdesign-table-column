{"version":3,"file":"tag.mjs","sources":["../../src/tag/tag.tsx"],"sourcesContent":["import { computed, defineComponent, h, VNode } from 'vue';\nimport { CloseIcon as TdCloseIcon } from 'tdesign-icons-vue-next';\n\nimport props from './props';\nimport { useConfig, usePrefixClass, useCommonClassName } from '../hooks/useConfig';\nimport { useGlobalIcon } from '../hooks/useGlobalIcon';\nimport { useTNodeJSX, useContent } from '../hooks/tnode';\n\nexport default defineComponent({\n  name: 'TTag',\n  props,\n  setup(props) {\n    const { globalConfig: tagGlobalConfig } = useConfig('tag');\n    const COMPONENT_NAME = usePrefixClass('tag');\n    const { CloseIcon } = useGlobalIcon({ CloseIcon: TdCloseIcon });\n    const renderTNodeJSX = useTNodeJSX();\n    const renderContent = useContent();\n    const { SIZE } = useCommonClassName();\n\n    const tagClass = computed(() => {\n      return [\n        `${COMPONENT_NAME.value}`,\n        `${COMPONENT_NAME.value}--${props.theme}`,\n        `${COMPONENT_NAME.value}--${props.variant}`,\n        {\n          [`${COMPONENT_NAME.value}--ellipsis`]: props.maxWidth,\n          [`${COMPONENT_NAME.value}--close`]: props.closable,\n          [`${COMPONENT_NAME.value}--disabled`]: props.disabled,\n        },\n        SIZE.value[props.size],\n        props.shape !== 'square' && `${COMPONENT_NAME.value}--${props.shape}`,\n      ];\n    });\n\n    const tagStyle = computed<Record<string, string>>(() => {\n      return props.maxWidth ? { maxWidth: `${props.maxWidth}px` } : {};\n    });\n\n    const handleClick = (e: MouseEvent) => {\n      props.onClick?.({ e });\n    };\n\n    const getCloseIcon = () => {\n      if (!props.closable) return null;\n      const iconClassName = `${COMPONENT_NAME.value}__icon-close`;\n      if (tagGlobalConfig.value.closeIcon) {\n        return h(tagGlobalConfig.value.closeIcon(h) as VNode, { class: iconClassName });\n      }\n      return <CloseIcon onClick={({ e }: { e: MouseEvent }) => props.onClose?.({ e })} class={iconClassName} />;\n    };\n\n    return () => {\n      // 关闭按钮 自定义组件使用 nativeOnClick 绑定事件\n      const closeIcon = getCloseIcon();\n      // 标签内容\n      const tagContent = renderContent('default', 'content');\n      // 图标\n      const icon = renderTNodeJSX('icon');\n\n      return (\n        <span class={tagClass.value} style={tagStyle.value} onClick={handleClick}>\n          {icon}\n          {props.maxWidth ? (\n            <span style={tagStyle.value} class={`${COMPONENT_NAME.value}--text`}>\n              {tagContent}\n            </span>\n          ) : (\n            tagContent\n          )}\n          {closeIcon}\n        </span>\n      );\n    };\n  },\n});\n"],"names":["defineComponent","name","props","setup","useConfig","tagGlobalConfig","globalConfig","COMPONENT_NAME","usePrefixClass","useGlobalIcon","CloseIcon","TdCloseIcon","renderTNodeJSX","useTNodeJSX","renderContent","useContent","useCommonClassName","SIZE","tagClass","computed","value","theme","variant","maxWidth","closable","disabled","size","shape","tagStyle","handleClick","e","onClick","getCloseIcon","iconClassName","closeIcon","h","_createVNode","onClose","tagContent","icon"],"mappings":"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"}