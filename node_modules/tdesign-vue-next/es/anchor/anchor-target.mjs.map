{"version":3,"file":"anchor-target.mjs","sources":["../../src/anchor/anchor-target.tsx"],"sourcesContent":["import { defineComponent } from 'vue';\nimport { FileCopyIcon as TdFileCopyIcon } from 'tdesign-icons-vue-next';\nimport { copyText } from '../utils/clipboard';\nimport Message from '../message/plugin';\nimport props from './anchor-target-props';\nimport { useGlobalIcon } from '../hooks/useGlobalIcon';\nimport { useConfig, usePrefixClass } from '../hooks/useConfig';\n\nexport default defineComponent({\n  name: 'TAnchorTarget',\n  props,\n  setup(props, { slots }) {\n    const { globalConfig, classPrefix } = useConfig('anchor');\n    const { FileCopyIcon } = useGlobalIcon({ FileCopyIcon: TdFileCopyIcon });\n    const COMPONENT_NAME = usePrefixClass('anchor');\n    /**\n     * 复制当前target的链接\n     *\n     */\n    const toCopyText = () => {\n      // 通过构造一个a标签, 自动拼接好传入的id为href\n      const a = document.createElement('a');\n      a.href = `#${props.id}`;\n      copyText(a.href);\n      Message.success(globalConfig.value.copySuccessText, 1000);\n    };\n    return () => {\n      const { default: children } = slots;\n      const { tag: TAG, id } = props;\n      const className = [`${COMPONENT_NAME.value}__target`];\n      const iconClassName = `${classPrefix.value}-copy`;\n      return (\n        <TAG id={id} class={className}>\n          {children && children(null)}\n          <t-popup content={globalConfig.value.copyText} placement=\"top\" showArrow class={iconClassName}>\n            <FileCopyIcon onClick={toCopyText} />\n          </t-popup>\n        </TAG>\n      );\n    };\n  },\n});\n"],"names":["defineComponent","name","props","setup","slots","useConfig","globalConfig","classPrefix","useGlobalIcon","FileCopyIcon","TdFileCopyIcon","COMPONENT_NAME","usePrefixClass","toCopyText","a","document","createElement","href","id","copyText","Message","success","value","copySuccessText","children","TAG","tag","className","iconClassName","_createVNode","_resolveComponent"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQA,oBAAeA,eAAgB,CAAA;AAC7BC,EAAAA,IAAM,EAAA,eADuB;AAE7BC,EAAAA,KAAA,EAAAA,KAF6B;EAG7BC,KAH6B,EAAA,SAAA,KAAA,CAGvBD,MAHuB,EAGL,IAAA,EAAA;IAAA,IAATE,KAAS,QAATA,KAAS,CAAA;;IACtB,IAAsCC,UAAAA,GAAAA,UAAU,SAAhD;QAAQC,YAAR,cAAQA,YAAR;QAAsBC,WAAtB,cAAsBA,WAAtB,CAAA;;AACA,IAAA,IAAA,cAAA,GAAyBC,cAAc;AAAEC,MAAAA,YAAA,EAAcC,YAAAA;AAAhB,MAAvC;QAAQD,cAAR,kBAAQA,YAAR,CAAA;;AACM,IAAA,IAAAE,cAAA,GAAiBC,eAAe,SAAhC,CAAA;;AAKN,IAAA,IAAMC,aAAa,SAAbA,UAAa,GAAM;AAEjB,MAAA,IAAAC,CAAA,GAAIC,QAAS,CAAAC,aAAT,CAAuB,GAAvB,CAAJ,CAAA;AACJF,MAAAA,CAAA,CAAAG,IAAA,GAAWf,GAAAA,CAAAA,MAAAA,CAAAA,MAAM,CAAAgB,EAAjB,CAAA,CAAA;AACFC,MAAAA,QAAA,CAASL,EAAEG,IAAX,CAAA,CAAA;MACAG,aAAA,CAAQC,OAAR,CAAgBf,YAAA,CAAagB,KAAb,CAAmBC,eAAnC,EAAoD,GAApD,CAAA,CAAA;KALF,CAAA;;AAOA,IAAA,OAAO,YAAM;MACL,IAAWC,QAAX,GAAwBpB,KAAxB,CAAA,SAAA,CAAA,CAAA;AACN,MAAA,IAAaqB,GAAb,GAAyBvB,MAAzB,CAAQwB,GAAR;AAAA,UAAkBR,EAAlB,GAAyBhB,MAAzB,CAAkBgB,EAAlB,CAAA;AACA,MAAA,IAAMS,SAAY,GAAA,CAAA,EAAA,CAAA,MAAA,CAAIhB,cAAA,CAAeW,KAAnB,EAAlB,UAAA,CAAA,CAAA,CAAA;AACM,MAAA,IAAAM,aAAA,GAAA,EAAA,CAAA,MAAA,CAAmBrB,WAAY,CAAAe,KAA/B,EAAA,OAAA,CAAA,CAAA;AACN,MAAA,OAAAO,WAAA,CAAA,GAAA,EAAA;AAAA,QAAA,IAAA,EACWX,EADX;QAAA,OACsBS,EAAAA,SAAAA;AADtB,OAAA,EAAA;AAAA,QAAA,SAAA,EAAA,SAAA,QAAA,GAAA;AAAA,UAAA,OAAA,CAEKH,QAAA,IAAYA,SAAS,KAF1B,EAAAK,WAAA,CAAAC,gBAAA,CAAA,SAAA,CAAA,EAAA;AAAA,YAAA,SAAA,EAGsBxB,YAAa,CAAAgB,KAAb,CAAmBH,QAHzC;AAAA,YAAA,WAAA,EAG6D,KAH7D;AAAA,YAAA,WAAA,EAAA,IAAA;YAAA,OAGoFS,EAAAA,aAAAA;AAHpF,WAAA,EAAA;AAAA,YAAA,SAAA,EAAA,SAAA,QAAA,GAAA;AAAA,cAAA,OAAA,CAAAC,WAAA,CAAApB,cAAA,EAAA;gBAAA,SAI6BI,EAAAA,UAAAA;AAJ7B,eAAA,EAAA,IAAA,CAAA,CAAA,CAAA;AAAA,aAAA;AAAA,WAAA,CAAA,CAAA,CAAA;AAAA,SAAA;AAAA,OAAA,CAAA,CAAA;KALF,CAAA;AAcF,GAAA;AAhC6B,CAAA,CAA/B;;;;"}