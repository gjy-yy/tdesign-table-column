{"version":3,"file":"hooks.mjs","sources":["../../src/drawer/hooks.ts"],"sourcesContent":["import { computed, ref } from 'vue';\nimport { Styles } from '../common';\nimport { TdDrawerProps } from './type';\n\nexport const useDrag = (props: TdDrawerProps) => {\n  // 以下为拖拽改变抽屉大小相关 可以抽成hooks\n  const isSizeDragging = ref(false);\n  const draggedSizeValue = ref<string>(null);\n\n  const enableDrag = () => {\n    // mousedown绑定mousemove和mouseup事件\n    document.addEventListener('mouseup', handleMouseup, true);\n    document.addEventListener('mousemove', handleMousemove, true);\n    isSizeDragging.value = true;\n  };\n\n  const handleMouseup = () => {\n    document.removeEventListener('mouseup', handleMouseup, true);\n    document.removeEventListener('mousemove', handleMousemove, true);\n    isSizeDragging.value = false;\n  };\n\n  const handleMousemove = (e: MouseEvent) => {\n    // 鼠标移动时计算draggedSizeValue的值\n    const { x, y } = e;\n    const maxHeight = document.documentElement.clientHeight;\n    const maxWidth = document.documentElement.clientWidth;\n    const offsetHeight = 8;\n    const offsetWidth = 8;\n\n    if (isSizeDragging.value && props.sizeDraggable) {\n      if (props.placement === 'right') {\n        const moveLeft = Math.min(Math.max(maxWidth - x + offsetWidth, offsetWidth), maxWidth);\n        draggedSizeValue.value = `${moveLeft}px`;\n      }\n      if (props.placement === 'left') {\n        const moveRight = Math.min(Math.max(x + offsetWidth, offsetWidth), maxWidth);\n        draggedSizeValue.value = `${moveRight}px`;\n      }\n      if (props.placement === 'top') {\n        const moveBottom = Math.min(Math.max(y + offsetHeight, offsetHeight), maxHeight);\n        draggedSizeValue.value = `${moveBottom}px`;\n      }\n      if (props.placement === 'bottom') {\n        const moveTop = Math.min(Math.max(maxHeight - y + offsetHeight, offsetHeight), maxHeight);\n        draggedSizeValue.value = `${moveTop}px`;\n      }\n    }\n  };\n\n  const draggableLineStyles = computed(() => {\n    // 设置拖拽control的样式\n    const isHorizontal = ['right', 'left'].includes(props.placement);\n    const oppositeMap = {\n      left: 'right',\n      right: 'left',\n      top: 'bottom',\n      bottom: 'top',\n    };\n    return {\n      zIndex: 1,\n      position: 'absolute',\n      background: 'transparent',\n      [oppositeMap[props.placement]]: 0,\n      width: isHorizontal ? '16px' : '100%',\n      height: isHorizontal ? '100%' : '16px',\n      cursor: isHorizontal ? 'col-resize' : 'row-resize',\n    } as Styles;\n  });\n\n  return { draggedSizeValue, enableDrag, draggableLineStyles };\n};\n"],"names":["useDrag","props","isSizeDragging","ref","draggedSizeValue","enableDrag","document","addEventListener","handleMouseup","handleMousemove","value","removeEventListener","e","x","y","maxHeight","documentElement","clientHeight","maxWidth","clientWidth","offsetHeight","offsetWidth","sizeDraggable","placement","moveLeft","Math","min","max","moveRight","moveBottom","moveTop","draggableLineStyles","computed","isHorizontal","includes","oppositeMap","left","right","top","bottom","zIndex","position","background"],"mappings":"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"}