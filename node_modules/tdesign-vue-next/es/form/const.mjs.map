{"version":3,"file":"const.mjs","sources":["../../src/form/const.ts"],"sourcesContent":["import { computed, InjectionKey } from 'vue';\nimport { FormItemValidateResult } from './form-item';\nimport {\n  AllValidateResult,\n  Data,\n  FormItemValidateMessage,\n  FormRule,\n  TdFormItemProps,\n  TdFormProps,\n  ValidateResultType,\n  ValidateTriggerType,\n} from './type';\nimport { usePrefixClass, useTNodeJSX } from '../hooks';\n\n// 允许 Form 统一控制的表单\nexport const FORM_CONTROL_COMPONENTS = [\n  'TInput',\n  'TInputNumber',\n  'TTextarea',\n  'TCascader',\n  'TSelect',\n  'TOption',\n  'TSwitch',\n  'TCheckbox',\n  'TCheckboxGroup',\n  'TRadio',\n  'TRadioGroup',\n  'TTreeSelect',\n  'TDatePicker',\n  'TTimePicker',\n  'TUpload',\n  'TTransfer',\n  'TSlider',\n];\n\nexport const useCLASSNAMES = () => {\n  const classPrefix = usePrefixClass();\n\n  return computed(() => {\n    const form = `${classPrefix.value}-form`;\n    const input = `${classPrefix.value}-input`;\n    const is = `${classPrefix.value}-is`;\n\n    return {\n      form,\n      label: `${form}__label`,\n      labelTop: `${form}__label--top`,\n      inline: `${form}-inline`,\n      formItem: `${form}__item`,\n      formItemWithHelp: `${form}__item-with-help`,\n      formItemWithExtra: `${form}__item-with-extra`,\n      controls: `${form}__controls`,\n      controlsContent: `${form}__controls-content`,\n      status: `${form}__status`,\n      extra: `${input}__extra`,\n      help: `${input}__help`,\n      success: `${is}-success`,\n      successBorder: `${form}--success-border`,\n      error: `${is}-error`,\n      warning: `${is}-warning`,\n    };\n  });\n};\n\nexport const enum ValidateStatus {\n  TO_BE_VALIDATED = 'not',\n  SUCCESS = 'success',\n  FAIL = 'fail',\n}\n\nexport type ErrorListType =\n  | {\n      result: false;\n      message: string;\n      type: 'error' | 'warning';\n    }\n  | ValidateResultType;\n\nexport type SuccessListType =\n  | {\n      result: true;\n      message: string;\n      type: 'success';\n    }\n  | ValidateResultType;\n\nexport interface AnalysisValidateResult {\n  successList?: SuccessListType[];\n  errorList?: ErrorListType[];\n  rules: FormRule[];\n  resultList: AllValidateResult[];\n  allowSetValue: boolean;\n}\n\nexport interface FormItemContext {\n  name: TdFormItemProps['name'];\n  resetHandler: () => void;\n  resetField: (resetType?: 'initial' | 'empty') => Promise<void>;\n  validate: <T extends Data = Data>(\n    trigger: ValidateTriggerType,\n    showErrorMessage?: boolean,\n  ) => Promise<FormItemValidateResult<T>>;\n  validateOnly: <T = Data>(trigger: ValidateTriggerType) => Promise<FormItemValidateResult<T>>;\n  setValidateMessage: (validateMessage: FormItemValidateMessage[]) => void;\n}\n\nexport const FormInjectionKey: InjectionKey<{\n  showErrorMessage: TdFormProps['showErrorMessage'];\n  labelWidth: TdFormProps['labelWidth'];\n  labelAlign: TdFormProps['labelAlign'];\n  data: TdFormProps['data'];\n  colon: TdFormProps['colon'];\n  requiredMark: TdFormProps['requiredMark'];\n  rules: TdFormProps['rules'];\n  errorMessage: TdFormProps['errorMessage'];\n  resetType: TdFormProps['resetType'];\n  children: FormItemContext[];\n  renderContent: ReturnType<typeof useTNodeJSX>;\n}> = Symbol('FormProvide');\n\nexport const FormItemInjectionKey: InjectionKey<{\n  handleBlur: () => Promise<void>;\n}> = Symbol('FormItemProvide');\n"],"names":["FORM_CONTROL_COMPONENTS","useCLASSNAMES","classPrefix","usePrefixClass","computed","form","value","input","is","label","labelTop","inline","formItem","formItemWithHelp","formItemWithExtra","controls","controlsContent","status","extra","help","success","successBorder","error","warning","ValidateStatus","FormInjectionKey","Symbol","FormItemInjectionKey"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAeaA,uBAA0B,GAAA,CACrC,QADqC,EAErC,cAFqC,EAGrC,WAHqC,EAIrC,WAJqC,EAKrC,SALqC,EAMrC,SANqC,EAOrC,SAPqC,EAQrC,WARqC,EASrC,gBATqC,EAUrC,QAVqC,EAWrC,aAXqC,EAYrC,aAZqC,EAarC,aAbqC,EAcrC,aAdqC,EAerC,SAfqC,EAgBrC,WAhBqC,EAiBrC,SAjBqC,EAAhC;AAoBMC,IAAAA,gBAAgB,SAAhBA,aAAgB,GAAM;EACjC,IAAMC,cAAcC,cAAe,EAAnC,CAAA;EAEA,OAAOC,SAAS,YAAM;AACd,IAAA,IAAAC,IAAA,GAAA,EAAA,CAAA,MAAA,CAAUH,WAAY,CAAAI,KAAtB,EAAA,OAAA,CAAA,CAAA;AACA,IAAA,IAAAC,KAAA,GAAA,EAAA,CAAA,MAAA,CAAWL,WAAY,CAAAI,KAAvB,EAAA,QAAA,CAAA,CAAA;AACA,IAAA,IAAAE,EAAA,GAAA,EAAA,CAAA,MAAA,CAAQN,WAAY,CAAAI,KAApB,EAAA,KAAA,CAAA,CAAA;IAEC,OAAA;AACLD,MAAAA,IAAA,EAAAA,IADK;MAELI,iBAAUJ,MAFL,SAAA,CAAA;MAGLK,oBAAaL,MAHR,cAAA,CAAA;MAILM,kBAAWN,MAJN,SAAA,CAAA;MAKLO,oBAAaP,MALR,QAAA,CAAA;MAMLQ,4BAAqBR,MANhB,kBAAA,CAAA;MAOLS,6BAAsBT,MAPjB,mBAAA,CAAA;MAQLU,oBAAaV,MARR,YAAA,CAAA;MASLW,2BAAoBX,MATf,oBAAA,CAAA;MAULY,kBAAWZ,MAVN,UAAA,CAAA;MAWLa,iBAAUX,OAXL,SAAA,CAAA;MAYLY,gBAASZ,OAZJ,QAAA,CAAA;MAaLa,mBAAYZ,IAbP,UAAA,CAAA;MAcLa,yBAAkBhB,MAdb,kBAAA,CAAA;MAeLiB,iBAAUd,IAfL,QAAA,CAAA;AAgBLe,MAAAA,mBAAYf;KAhBP,CAAA;AAkBR,IAvBD,CAAA;AAwBF,EA3BO;IA6BWgB,cAAA,4BAAAA,iBAAX;AACLA,EAAAA,gBAAA,kBAAAA,GAAkB,KAAlBA,CAAAA;AACAA,EAAAA,gBAAA,UAAAA,GAAU,SAAVA,CAAAA;AACAA,EAAAA,gBAAA,OAAAA,GAAO,MAAPA,CAAAA;AAHgBA,EAAAA,OAAAA,eAAAA,CAAAA;AAAA,EAAAA,cAAA,IAAA,IAAA;IA0CLC,gBAAA,GAYRC,OAAO,eAZC;IAcAC,oBAAA,GAERD,OAAO;;;;"}