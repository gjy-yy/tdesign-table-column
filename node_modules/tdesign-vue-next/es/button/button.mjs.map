{"version":3,"file":"button.mjs","sources":["../../src/button/button.tsx"],"sourcesContent":["import { computed, defineComponent, h, ref } from 'vue';\nimport TLoading from '../loading';\nimport props from './props';\nimport useRipple from '../hooks/useRipple';\nimport { useFormDisabled } from '../form/hooks';\nimport { usePrefixClass, useCommonClassName } from '../hooks/useConfig';\nimport { useTNodeJSX, useContent } from '../hooks/tnode';\n\nexport default defineComponent({\n  name: 'TButton',\n  props,\n  setup(props, { attrs }) {\n    const renderTNodeJSX = useTNodeJSX();\n    const renderContent = useContent();\n    const COMPONENT_NAME = usePrefixClass('button');\n    const { STATUS, SIZE } = useCommonClassName();\n    const disabled = useFormDisabled();\n    const btnRef = ref<HTMLElement>();\n\n    useRipple(btnRef);\n\n    const isDisabled = computed(() => props.disabled || props.loading || disabled.value);\n    const mergeTheme = computed(() => {\n      const { theme, variant } = props;\n      if (theme) return theme;\n      if (variant === 'base') return 'primary';\n      return 'default';\n    });\n    const buttonClass = computed(() => [\n      `${COMPONENT_NAME.value}`,\n      SIZE.value[props.size],\n      `${COMPONENT_NAME.value}--variant-${props.variant}`,\n      `${COMPONENT_NAME.value}--theme-${mergeTheme.value}`,\n      {\n        [STATUS.value.disabled]: props.disabled || disabled.value,\n        [STATUS.value.loading]: props.loading,\n        [`${COMPONENT_NAME.value}--shape-${props.shape}`]: props.shape !== 'rectangle',\n        [`${COMPONENT_NAME.value}--ghost`]: props.ghost,\n        [SIZE.value.block]: props.block,\n      },\n    ]);\n\n    return () => {\n      let buttonContent = renderContent('default', 'content');\n      const icon = props.loading ? <TLoading inheritColor={true} /> : renderTNodeJSX('icon');\n      const iconOnly = icon && !buttonContent;\n\n      buttonContent = buttonContent ? <span class={`${COMPONENT_NAME.value}__text`}>{buttonContent}</span> : '';\n      if (icon) {\n        buttonContent = [icon, buttonContent];\n      }\n\n      const renderTag = () => {\n        if (!props.tag && props.href) return 'a';\n        return props.tag || 'button';\n      };\n\n      const buttonAttrs = {\n        class: [...buttonClass.value, { [`${COMPONENT_NAME.value}--icon-only`]: iconOnly }],\n        type: props.type,\n        disabled: isDisabled.value,\n        href: props.href,\n      };\n\n      return h(\n        renderTag(),\n        {\n          ref: btnRef,\n          ...attrs,\n          ...buttonAttrs,\n          onClick: props.onClick,\n        },\n        [buttonContent],\n      );\n    };\n  },\n});\n"],"names":["defineComponent","name","props","setup","attrs","renderTNodeJSX","useTNodeJSX","renderContent","useContent","COMPONENT_NAME","usePrefixClass","useCommonClassName","STATUS","SIZE","disabled","useFormDisabled","btnRef","ref","useRipple","isDisabled","computed","loading","value","mergeTheme","theme","variant","buttonClass","size","shape","ghost","block","buttonContent","icon","iconOnly","_createVNode","renderTag","tag","href","buttonAttrs","type","h","onClick"],"mappings":"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"}